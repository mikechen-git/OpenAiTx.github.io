<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Immich + cn-clip + RapidOCR + InsightFace - eric-gitta-moore/immich-all-in-one</title>

    <!-- Primary Meta Tags -->
    <meta name="title" content="Immich + cn-clip + RapidOCR + InsightFace - eric-gitta-moore/immich-all-in-one">
    <meta name="description" content="eric-gitta-moore/immich-all-in-one - GitHub repository vi documentation and information">
    <meta name="keywords" content="eric-gitta-moore, immich-all-in-one, GitHub, repository, vi documentation">
    <meta name="author" content="Open AI Tx">
    <meta name="robots" content="index, follow">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://openaitx.github.io/projects/eric-gitta-moore/immich-all-in-one/README-vi.html">
    <meta property="og:title" content="Immich + cn-clip + RapidOCR + InsightFace - eric-gitta-moore/immich-all-in-one">
    <meta property="og:description" content="eric-gitta-moore/immich-all-in-one - GitHub repository vi documentation and information">
    <meta property="og:image" content="https://openaitx.github.io/logo_crop.png">

    <!-- Favicon -->
    <link rel="icon" type="image/jpeg" href="/icon.jpg">
    <link rel="apple-touch-icon" href="/icon.jpg">

    <!-- Marked.js for Markdown rendering -->
    <script type="text/javascript" async="" src="https://www.statcounter.com/counter/recorder.js"></script><script src="/js/marked.min.js?v=20250613"></script>
    <!-- Highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="/css/github.min.css?v=20250613">
    <script src="/js/highlight.min.js?v=20250613"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/view.css?v=20250613">
    <style>
        /* Layout */
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .main-container {
            margin: 0 auto;
            width: 100%;
            max-width: 980px;
            padding: 0 20px;
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 0 15px;
            }
        }

        /* Image size restrictions */
        .markdown-body img {
            max-width: 100%;
            height: auto;
        }

        /* Existing styles */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: #f6f8fa;
            border-bottom: 1px solid #e1e4e8;
            position: relative;
        }

        .back-button {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #0366d6;
            text-decoration: none;
            display: flex;
            align-items: center;
            font-size: 14px;
            padding: 5px 10px;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            background-color: #fff;
        }

        .back-button:hover {
            background-color: #f6f8fa;
            border-color: #0366d6;
        }

        .back-button::before {
            content: "←";
            margin-right: 5px;
            font-size: 16px;
        }

        .header .links {
            margin-top: 10px;
            font-size: 16px;
        }

        .header .links a {
            color: #0366d6;
            text-decoration: none;
            margin-left: 5px;
        }

        .header .links a:hover {
            text-decoration: underline;
        }
        
        /* Language badges styles */
        .language-badges {
            margin-top: 15px;
            text-align: center;
        }
        .language-badges a {
            display: inline-block;
            margin: 2px;
            text-decoration: none;
        }
        .language-badges img {
            height: 20px;
            border-radius: 3px;
        }
        .language-badges a:hover img {
            opacity: 0.8;
        }
    </style>
</head>

<body>
    <div class="header">
        <div class="links">
            GitHub Repository: <a href="https://github.com/eric-gitta-moore/immich-all-in-one" id="githubRepoLink" target="_blank">eric-gitta-moore/immich-all-in-one</a>
        </div>
        <div class="language-badges" id="languageBadges"><a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=en"><img src="https://img.shields.io/badge/EN-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=zh-CN"><img src="https://img.shields.io/badge/简中-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=zh-TW"><img src="https://img.shields.io/badge/繁中-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=ja"><img src="https://img.shields.io/badge/日本語-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=ko"><img src="https://img.shields.io/badge/한국어-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=th"><img src="https://img.shields.io/badge/ไทย-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=fr"><img src="https://img.shields.io/badge/Français-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=de"><img src="https://img.shields.io/badge/Deutsch-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=es"><img src="https://img.shields.io/badge/Español-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=it"><img src="https://img.shields.io/badge/Italiano-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=ru"><img src="https://img.shields.io/badge/Русский-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=pt"><img src="https://img.shields.io/badge/Português-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=nl"><img src="https://img.shields.io/badge/Nederlands-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=pl"><img src="https://img.shields.io/badge/Polski-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=ar"><img src="https://img.shields.io/badge/العربية-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=tr"><img src="https://img.shields.io/badge/Türkçe-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=vi"><img src="https://img.shields.io/badge/Tiếng Việt-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=hi"><img src="https://img.shields.io/badge/हिंदी-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=fa"><img src="https://img.shields.io/badge/فارسی-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=id"><img src="https://img.shields.io/badge/Bahasa Indonesia-white" alt="version"></a></div>
    </div>

    <div class="main-container">
        <div class="markdown-body" id="content"><h1>Immich + cn-clip + RapidOCR + InsightFace</h1>
<div style="text-align: center"><p><a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=en"><img src="https://img.shields.io/badge/EN-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=zh-CN"><img src="https://img.shields.io/badge/简中-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=zh-TW"><img src="https://img.shields.io/badge/繁中-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=ja"><img src="https://img.shields.io/badge/日本語-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=ko"><img src="https://img.shields.io/badge/한국어-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=th"><img src="https://img.shields.io/badge/ไทย-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=fr"><img src="https://img.shields.io/badge/Français-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=de"><img src="https://img.shields.io/badge/Deutsch-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=es"><img src="https://img.shields.io/badge/Español-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=it"><img src="https://img.shields.io/badge/Italiano-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=ru"><img src="https://img.shields.io/badge/Русский-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=pt"><img src="https://img.shields.io/badge/Português-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=nl"><img src="https://img.shields.io/badge/Nederlands-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=pl"><img src="https://img.shields.io/badge/Polski-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=ar"><img src="https://img.shields.io/badge/العربية-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=tr"><img src="https://img.shields.io/badge/Türkçe-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=eric-gitta-moore&amp;project=immich-all-in-one&amp;lang=vi"><img src="https://img.shields.io/badge/Tiếng Việt-white" alt="version"></a> </p></div>

<blockquote>
<p><del>Kế hoạch sau này sẽ chuyển sang ente-io/ente, vì tôi cần s3 để lưu trữ ảnh</del></p>
<p>ente vẫn còn quá ít chức năng</p>
<p>Đã chuyển sang sử dụng juicedata/juicefs để mount s3</p>
</blockquote>
<h2>Giới thiệu dự án</h2>
<p>Dự án này là giải pháp tăng cường AI cho hệ thống quản lý ảnh <a href="https://github.com/immich-app/immich">Immich</a>. Chủ yếu mở rộng các chức năng gốc của Immich thông qua các thành phần sau:</p>
<ul>
<li><strong>inference-gateway</strong>: Dịch vụ gateway viết bằng Go, chịu trách nhiệm phân luồng thông minh các yêu cầu máy học của Immich</li>
<li><strong>mt-photos-ai</strong>: Dịch vụ AI dựa trên Python và FastAPI, tích hợp RapidOCR và mô hình cn-clip</li>
<li>Mở rộng chức năng cho Immich, bao gồm nhận diện văn bản OCR để tìm kiếm và xử lý lại dữ liệu AI cho từng phương tiện, trộn điểm số sắp xếp giữa vector toàn văn OCR và vector CLIP</li>
<li>PostgreSQL bổ sung phân từ tiếng Trung bằng zhparser</li>
</ul>
<h2>Tính năng chính</h2>
<h3>1. Nhận diện và tìm kiếm văn bản OCR</h3>
<ul>
<li>Sử dụng RapidOCR để nhận diện chữ trong ảnh</li>
<li>Hỗ trợ nhận diện văn bản hỗn hợp tiếng Trung và tiếng Anh</li>
<li>Thực hiện chức năng tìm kiếm dựa trên nội dung văn bản trong ảnh</li>
</ul>
<h3>2. Xử lý vector hình ảnh bằng CLIP</h3>
<ul>
<li>Dựa trên mô hình cn-clip để khớp hình ảnh - văn bản tiếng Trung chính xác hơn</li>
<li>Hỗ trợ tìm kiếm ngữ nghĩa, nâng cao độ chính xác tìm kiếm</li>
</ul>
<h3>3. Xử lý lại dữ liệu AI cho từng phương tiện</h3>
<ul>
<li>Hỗ trợ tái tạo dữ liệu OCR cho từng ảnh/video</li>
<li>Hỗ trợ tái tạo vector CLIP cho từng ảnh/video</li>
<li>Cung cấp khả năng làm mới thủ công trong trường hợp kết quả nhận diện chưa chính xác</li>
</ul>
<h2>Kiến trúc hệ thống</h2>
<pre><code class="hljs language-css">┌─────────────┐      ┌──────────────────┐      ┌───────────────┐
│             │      │                  │      │               │
│   Immich    │─────▶│ inference-gateway│─────▶│  Immich ML    │
│   Server    │      │    (Go网关)      │      │   Server      │
│             │      │                  │      │               │
└─────────────┘      └──────────────────┘      └───────────────┘
                              │
                              │ OCR/<span class="hljs-attribute">CLIP</span>请求
                              ▼
                     ┌──────────────────┐
                     │                  │
                     │   mt-photos-ai   │
                     │  (Python服务)    │
                     │                  │
                     └──────────────────┘
</code></pre>
<h2>Phân tích chi tiết các thành phần</h2>
<h3>inference-gateway</h3>
<p>Dịch vụ gateway viết bằng Go, nhiệm vụ chính:</p>
<ul>
<li>Nhận các yêu cầu máy học từ Immich</li>
<li>Chuyển tiếp các yêu cầu OCR và CLIP tới dịch vụ mt-photos-ai dựa vào loại yêu cầu</li>
<li>Chuyển tiếp các yêu cầu máy học khác (như nhận diện khuôn mặt) tới dịch vụ máy học gốc của Immich</li>
<li>Xử lý xác thực và chuyển đổi định dạng dữ liệu</li>
</ul>
<h3>mt-photos-ai</h3>
<p>Dịch vụ AI viết bằng Python và FastAPI, cung cấp:</p>
<ul>
<li>API nhận diện văn bản OCR (dựa trên RapidOCR)</li>
<li>API xử lý vector CLIP (dựa trên cn-clip)</li>
<li>Hỗ trợ tăng tốc GPU</li>
</ul>
<h2>Hướng dẫn triển khai</h2>
<h3>Yêu cầu môi trường</h3>
<ul>
<li>Docker và Docker Compose</li>
<li>NVIDIA GPU (tùy chọn, nhưng khuyến nghị để tăng tốc xử lý)</li>
<li>Dung lượng lưu trữ đủ lớn</li>
</ul>
<h3>Hướng dẫn cấu hình</h3>
<ol>
<li><strong>Cấu hình inference-gateway</strong></li>
</ol>
<p>Các biến môi trường chính:</p>
<pre><code class="hljs language-ini"><span class="hljs-attr">IMMICH_API</span>=http://localhost:<span class="hljs-number">3003</span>  <span class="hljs-comment"># Địa chỉ API của Immich</span>
<span class="hljs-attr">MT_PHOTOS_API</span>=http://localhost:<span class="hljs-number">8060</span>  <span class="hljs-comment"># Địa chỉ dịch vụ mt-photos-ai</span>
<span class="hljs-attr">MT_PHOTOS_API_KEY</span>=mt_photos_ai_extra  <span class="hljs-comment"># API key</span>
<span class="hljs-attr">PORT</span>=<span class="hljs-number">8080</span>  <span class="hljs-comment"># Cổng lắng nghe của gateway</span>
</code></pre>
<ol start="2">
<li><strong>Cấu hình mt-photos-ai</strong></li>
</ol>
<p>Các biến môi trường chính:</p>
<pre><code class="hljs language-ini"><span class="hljs-attr">CLIP_MODEL</span>=ViT-B-<span class="hljs-number">16</span>  <span class="hljs-comment"># Tên mô hình CLIP</span>
<span class="hljs-attr">CLIP_DOWNLOAD_ROOT</span>=./models/clip  <span class="hljs-comment"># Đường dẫn tải mô hình</span>
<span class="hljs-attr">DEVICE</span>=cuda  <span class="hljs-comment"># hoặc cpu, thiết bị suy luận</span>
<span class="hljs-attr">HTTP_PORT</span>=<span class="hljs-number">8060</span>  <span class="hljs-comment"># Cổng dịch vụ lắng nghe</span>
</code></pre>
<h3>Các bước triển khai</h3>
<ol>
<li>Clone kho mã:</li>
</ol>
<pre><code class="language-bash hljs">git <span class="hljs-built_in">clone</span> https://github.com/your-username/immich-all-in-one.git
<span class="hljs-built_in">cd</span> immich-all-in-one
</code></pre>
<ol start="2">
<li>Khởi động dịch vụ:</li>
</ol>
<pre><code class="language-bash hljs">docker-compose up -d
</code></pre>
<h2>Hướng dẫn sử dụng</h2>
<ol>
<li><strong>Cấu hình Immich sử dụng dịch vụ ML tùy chỉnh</strong></li>
</ol>
<p>Trong file cấu hình của Immich, trỏ địa chỉ dịch vụ máy học về inference-gateway:</p>
<pre><code class="hljs language-ini"><span class="hljs-attr">MACHINE_LEARNING_URL</span>=http://inference-gateway:<span class="hljs-number">8080</span>
</code></pre>
<ol start="2">
<li><strong>Sử dụng tìm kiếm OCR</strong></li>
</ol>
<ul>
<li>Sử dụng tiền tố <code>ocr:</code> trong thanh tìm kiếm của Immich để tìm kiếm OCR</li>
<li>Ví dụ: <code>ocr:hoá đơn</code> sẽ tìm các ảnh có chứa chữ "hoá đơn" trong ảnh</li>
</ul>
<ol start="3">
<li><strong>Xử lý lại dữ liệu AI cho từng phương tiện</strong></li>
</ol>
<ul>
<li>Trong trang chi tiết ảnh, nhấn vào menu tuỳ chọn</li>
<li>Chọn "Tạo lại dữ liệu OCR" hoặc "Tạo lại vector CLIP"</li>
<li>Hệ thống sẽ xử lý lại dữ liệu AI cho ảnh đó</li>
</ul>
<h2>Hướng dẫn phát triển</h2>
<h3>inference-gateway (Go)</h3>
<p>Biên dịch và chạy:</p>
<pre><code class="language-bash hljs"><span class="hljs-built_in">cd</span> inference-gateway
go build
./inference-gateway
</code></pre>
<h3>mt-photos-ai (Python)</h3>
<p>Thiết lập môi trường phát triển:</p>
<pre><code class="language-bash hljs"><span class="hljs-built_in">cd</span> mt-photos-ai
pip install -r requirements.txt
python -m app.main
</code></pre>
<h2>Giấy phép</h2>
<p>Dự án này được phát hành mã nguồn mở theo giấy phép MIT.</p>
<h2>Lời cảm ơn</h2>
<ul>
<li><a href="https://github.com/immich-app/immich">Immich</a> - Giải pháp sao lưu ảnh và video tự lưu trữ mã nguồn mở</li>
<li><a href="https://github.com/RapidAI/RapidOCR">RapidOCR</a> - Thư viện OCR đa nền tảng dựa trên PaddleOCR</li>
<li><a href="https://github.com/OFA-Sys/Chinese-CLIP">cn-clip</a> - Mô hình tiền huấn luyện đối sánh đa phương thức tiếng Trung</li>
</ul>
<hr>
<p>Tranlated By <a href="https://github.com/OpenAiTx/OpenAiTx">Open Ai Tx</a> | Last indexed: 2025-06-09</p>
<hr>
</div>
    </div>

    <footer class="footer">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank">Open AI Tx</a>
    </footer>
    <!-- Default Statcounter code for openaitx
https://openaitx.github.io/ -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async=""></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>
    <!-- End of Statcounter Code -->
    


</body></html>