<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>helm-chartsnap - jlandowner/helm-chartsnap fr</title>
    <meta name="title" content="helm-chartsnap - jlandowner/helm-chartsnap fr | helm-chartsnap 📸 Outil de tests de snapshots pour les charts Helm. Apportez de puissantes fonctionnalités de tests d’interface utilisateur pour vos charts Helm...">
    <meta name="description" content="jlandowner/helm-chartsnap - GitHub repository fr documentation and information | helm-chartsnap 📸 Outil de tests de snapshots pour les charts Helm. Apportez de puissantes fonctionnalités de tests d’interface utilisateur pour vos charts Helm...">
    <meta name="keywords" content="jlandowner, helm-chartsnap, GitHub, repository, fr documentation">
    <meta name="author" content="Open AI Tx">
    <meta name="robots" content="index, follow">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://openaitx.github.io/projects/jlandowner/helm-chartsnap/README-fr.html">
    <meta property="og:title" content="helm-chartsnap - jlandowner/helm-chartsnap fr | helm-chartsnap 📸 Outil de tests de snapshots pour les charts Helm. Apportez de puissantes fonctionnalités de tests d’interface utilisateur pour vos charts Helm...">
    <meta property="og:description" content="jlandowner/helm-chartsnap - GitHub repository fr documentation and information | helm-chartsnap 📸 Outil de tests de snapshots pour les charts Helm. Apportez de puissantes fonctionnalités de tests d’interface utilisateur pour vos charts Helm...">
    <meta property="og:image" content="https://openaitx.github.io/logo_crop.png">
    <link rel="icon" type="image/jpeg" href="/icon.jpg">
    <link rel="apple-touch-icon" href="/icon.jpg">
    <script src="/js/marked.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/css/github.min.css?v=20250613">
    <script src="/js/highlight.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/view.css?v=20250613">
    <style>
        body { display: flex; flex-direction: column; min-height: 100vh; }
        .main-container { margin: 0 auto; width: 100%; max-width: 980px; padding: 0 20px; }
        @media (max-width: 768px) { .main-container { padding: 0 15px; } }
        .markdown-body img { max-width: 100%; height: auto; }
        .header { text-align: center; margin-bottom: 30px; padding: 20px; background-color: #f6f8fa; border-bottom: 1px solid #e1e4e8; position: relative; }
        .header .links { margin-top: 10px; font-size: 16px; }
        .header .links a { color: #0366d6; text-decoration: none; margin-left: 5px; }
        .header .links a:hover { text-decoration: underline; }
        .language-badges { margin-top: 15px; text-align: center; }
        .language-badges a { display: inline-block; margin: 2px; text-decoration: none; }
        .language-badges img { height: 20px; border-radius: 3px; }
        .language-badges a:hover img { opacity: 0.8; }
    </style>
</head>
<body>
    <div class="header">
        <div class="links">
            GitHub Repository: <a href="https://github.com/jlandowner/helm-chartsnap" id="githubRepoLink" target="_blank">jlandowner/helm-chartsnap</a>
<h1 style="display: none;">helm-chartsnap 📸 Outil de tests de snapshots pour les charts Helm. Apportez de puissantes fonctionnalités de tests d’interface utilisateur pour vos charts Helm...</h1>
        </div>
        <div class="language-badges" id="languageBadges">
            <!-- You can generate language badges here if needed -->
        </div>
    </div>
    <div class="main-container">
        <div class="markdown-body" id="content">
            <h1>helm-chartsnap 📸</h1>
<p><a href="https://pkg.go.dev/github.com/jlandowner/helm-chartsnap"><img src="https://pkg.go.dev/badge/github.com/jlandowner/helm-chartsnap.svg" alt="Go Reference" /></a>
<a href="https://goreportcard.com/report/github.com/jlandowner/helm-chartsnap"><img src="https://goreportcard.com/badge/github.com/jlandowner/helm-chartsnap" alt="Go Report Card" /></a>
<a href="https://codecov.io/gh/jlandowner/helm-chartsnap"><img src="https://codecov.io/gh/jlandowner/helm-chartsnap/graph/badge.svg?token=8ARG53CRL7" alt="codecov" /></a>
<a href="https://github.com/jlandowner/helm-chartsnap/actions/workflows/release.yaml"><img src="https://github.com/jlandowner/helm-chartsnap/actions/workflows/release.yaml/badge.svg" alt="Workflow Status" /></a>
<a href="https://github.com/jlandowner/helm-chartsnap/actions/workflows/ci.yaml"><img src="https://github.com/jlandowner/helm-chartsnap/actions/workflows/ci.yaml/badge.svg" alt="CI" /></a>
<a href="https://github.com/marketplace/actions/helm-chartsnap-action"><img src="https://img.shields.io/badge/Marketplace-Helm%20chartsnap%20action-blue.svg?colorA=24292e&amp;colorB=0366d6&amp;style=flat&amp;longCache=true&amp;logo=github" alt="GitHub Marketplace" /></a></p>
<p>Outil de tests de snapshots pour les charts Helm.</p>
<p>Apportez de puissantes fonctionnalités de tests d’interface utilisateur pour vos charts Helm avec une configuration minimale uniquement dans le fichier <code>values.yaml</code>.</p>
<p><img src="https://raw.githubusercontent.com/jlandowner/helm-chartsnap/main/docs/screenshot.png" alt="capture d'écran" /></p>
<h2>Vue d'ensemble</h2>
<ul>
<li><a href="#fonctionnalit%C3%A9s-">Fonctionnalités 🔑</a></li>
<li><a href="#pourquoi-les-tests-de-snapshot-">Pourquoi les tests de snapshot ? 📸</a>
<ul>
<li><a href="#motivation">Motivation</a></li>
</ul>
</li>
<li><a href="#installation-">Installation 🚀</a></li>
<li><a href="#utilisation">Utilisation</a>
<ul>
<li><a href="#gestion-des-valeurs-dynamiques-">Gestion des valeurs dynamiques 💪</a></li>
</ul>
</li>
<li><a href="#vitrine--utilisateurs-">Vitrine &amp; Utilisateurs ✨</a></li>
</ul>
<h2>Fonctionnalités 🔑</h2>
<ul>
<li><p><strong>Tests de snapshot faciles et intuitifs pour les développeurs Helm</strong></p>
<ul>
<li><strong>Pas de format de fichier TestSuite spécifique à l’outil</strong> : Contrairement à certains outils qui nécessitent la création de TestSuites séparés avec des formats de fichiers personnalisés, cet outil ne requiert aucun format de fichier supplémentaire. Vous pouvez simplement préparer des variantes du fichier standard <code>values.yaml</code> pour chaque cas de test. Cela élimine la nécessité d’apprendre de nouveaux formats et simplifie les tests.</li>
</ul>
</li>
<li><p><strong>Optimisé pour les charts Helm</strong></p>
<ul>
<li><strong>Gestion de la sortie dynamique générée par les fonctions helm</strong> : Vous pouvez spécifier des propriétés supplémentaires dans le fichier values.yaml pour chaque cas de test afin d’ajuster le comportement du test. Par exemple, vous pouvez contrôler la sortie générée dynamiquement par des fonctions helm comme <a href="https://helm.sh/docs/chart_template_guide/function_list/">randAlphaNum</a>.</li>
</ul>
</li>
<li><p><strong>Tests de snapshot continus</strong></p>
<ul>
<li><strong><a href="https://github.com/jlandowner/helm-chartsnap-action">GitHub Action</a> disponible</strong> : Une action GitHub permettant d’effectuer des tests de snapshot continus pour des charts Helm locaux ou distants dans votre CI est prête 🚀 -&gt; <a href="https://github.com/jlandowner/helm-chartsnap-action"><code>helm-chart-action</code></a></li>
</ul>
</li>
</ul>
<h2>Pourquoi les tests de snapshot ? 📸</h2>
<p>Je pense que les tests de snapshot, une approche de test populaire dans le Web ou les tests UI avec des outils comme Jest, sont la meilleure façon de tester les charts Helm. Les tests de snapshot offrent plusieurs avantages :</p>
<ul>
<li><p><strong>Comparaisons visuelles :</strong> Les tests de snapshot créent une sortie de référence, puis la comparent aux résultats des tests ultérieurs. Cela permet une inspection visuelle facile des changements et régressions dans le rendu des charts Helm.</p>
</li>
<li><p><strong>Meilleure maintenabilité :</strong> Les tests de snapshot simplifient le processus de configuration des tests, le rendant plus accessible et maintenable, surtout pour les charts Helm complexes. L'entrée du chart Helm est une combinaison de valeurs. Il suffit de maintenir les combinaisons d’entrées supposées (=values.yaml) et leurs snapshots.</p>
</li>
<li><p><strong>Tests continus :</strong> En prenant continuellement des snapshots du chart Helm dans votre processus CI, vous pouvez rapidement remarquer les changements dans l’ensemble de votre chart et éviter les régressions.</p>
</li>
</ul>
<p>Ces avantages ne sont pas limités au chart Helm que vous avez créé, mais concernent aussi les charts tiers que vous avez installés sur votre Kubernetes si vous êtes administrateur Kubernetes. Lors de la mise à jour d’un cluster, vous pouvez constater tout changement dans les manifests générés par vos <em>values</em>, même minime.</p>
<h3>Motivation</h3>
<p>Il existe des outils de test Helm qui prennent en charge les tests de snapshot.</p>
<ul>
<li><a href="https://github.com/helm-unittest/helm-unittest">helm-unittest</a>, un outil de tests unitaires populaire, dispose d’une option pour effectuer des <a href="https://github.com/helm-unittest/helm-unittest#snapshot-testing">tests de snapshot</a>.</li>
<li><a href="https://terratest.gruntwork.io/">terratest</a>, tests automatisés pour votre code d’infrastructure. Il permet d’écrire des tests en Go et propose une fonctionnalité pour tester la sortie de Helm. <a href="https://blog.gruntwork.io/automated-testing-for-kubernetes-and-helm-charts-using-terratest-a4ddc4e67344">article de blog</a></li>
</ul>
<blockquote>
<p>L’outil officiel de test Helm <a href="https://github.com/helm/chart-testing"><code>ct</code></a> n’est pas destiné aux tests unitaires ni aux tests de snapshot mais aux tests de lint et d’intégration.</p>
</blockquote>
<p>Bien qu’ils soient utiles pour tester les charts Helm, ces outils présentent certaines limitations pour les tests de snapshot.</p>
<ul>
<li><p>Il est nécessaire d’apprendre et de préparer les fichiers Test Suite de ces outils, même uniquement pour les tests de snapshot.</p>
</li>
<li><p>Par défaut, ils ne réalisent pas de snapshot de l’ensemble du chart, mais sont conçus pour tester fichier par fichier à l’intérieur du chart Helm.</p>
</li>
<li><p>Les sorties dynamiques des fonctions Helm ne sont pas prises en compte.</p>
</li>
</ul>
<p>helm-unittest est conçu pour effectuer des tests fichier par fichier dans le chart Helm. Cela signifie qu’il évalue chaque fichier indépendamment, et lorsque les valeurs ou conditions du chart Helm conduisent à l’inclusion ou l’exclusion conditionnelle d’un fichier entier, cela peut conduire à ce que les tests ne couvrent pas des scénarios importants.</p>
<p>Voici un exemple de fichier de spécification de test pour les tests de snapshot dans helm-unittest.</p>
<blockquote>
<p>https://github.com/helm-unittest/helm-unittest#snapshot-testing</p>
<pre><code class="language-yaml">templates:
  - templates/deployment.yaml
tests:
  - it: pod spec should match snapshot
    asserts:
      - matchSnapshot:
          path: spec.template.spec
  # or you can snapshot the whole manifest
  - it: manifest should match snapshot
    asserts:
      - matchSnapshot: {}
</code></pre>
</blockquote>
<p>Par exemple, imaginez un scénario où le chart Helm peut créer une ressource <code>Certificate</code> de <code>cert-manager</code> lorsque TLS est activé et cert-manager aussi, mais créer une ressource <code>Secret</code> TLS auto-signée avec la fonction helm <a href="https://helm.sh/docs/chart_template_guide/function_list/#genselfsignedcert"><code>genSelfSignedCert</code></a> lorsque cert-manager n’est pas activé. De plus, l’activation ou non de TLS affecte les propriétés TLS d’Ingress, les options TLS spécifiques à l’application dans Deployment, etc.</p>
<p>Dans ces cas, helm-unittest peut ne pas être capable de tester adéquatement le comportement global du chart, car la sortie de ces fichiers conditionnels peut être vide, entraînant des tests incomplets.</p>
<p>Cependant, avec <code>helm-chartsnap</code>, il vous suffit de préparer quelques fichiers <code>values.yaml</code> correspondant aux cas que vous attendez 😊</p>
<h2>Installation 🚀</h2>
<p>Vous pouvez l’installer comme plugin Helm.</p>
<pre><code class="language-sh">helm plugin install https://github.com/jlandowner/helm-chartsnap
</code></pre>
<p>Autres options :</p>
<ul>
<li><p>Installation via Go</p>
<pre><code class="language-sh">go install github.com/jlandowner/helm-chartsnap@latest
</code></pre>
</li>
<li><p><a href="https://github.com/jlandowner/helm-chartsnap/releases">Télécharger le binaire de la release</a></p>
</li>
</ul>
<h2>Utilisation</h2>
<p>Passez simplement votre chart pour un démarrage rapide.</p>
<pre><code>helm chartsnap -c VOTRE_CHART
</code></pre>
<p>Un répertoire <code>__snapshot__</code> est créé dans le répertoire du chart et <code>default.snap</code> est généré.</p>
<p>Vous pouvez également créer des cas de test comme variantes des fichiers Values de votre chart.</p>
<p>Voici l’utilisation complète de la commande.</p>
<pre><code class="language-sh">Utilisation :
  chartsnap -c CHART [flags]

Exemples :

  # Snapshot avec les valeurs par défaut :
  chartsnap -c VOTRE_CHART
  
  # Mettre à jour les fichiers de snapshot :
  chartsnap -c VOTRE_CHART -u

  # Snapshot avec des valeurs de cas de test :
  chartsnap -c VOTRE_CHART -f VOTRE_FICHIER_VALUES_TEST
  
  # Snapshot de tous les cas de test :
  chartsnap -c VOTRE_CHART -f VOTRE_RÉPERTOIRE_DE_FICHIERS_VALUES_TEST
  
  # Définir des arguments ou flags supplémentaires pour la commande 'helm template' :
  chartsnap -c VOTRE_CHART -f VOTRE_FICHIER_VALUES_TEST -- --skip-tests

  # Snapshot d’un chart distant dans un dépôt Helm :
  chartsnap -c NOM_DU_CHART -f VOTRE_FICHIER_VALUES -- --repo URL_REPO_HELM

  # Snapshot du chart ingress-nginx (https://kubernetes.github.io/ingress-nginx/) pour une version spécifique avec votre fichier de valeurs :
  chartsnap -c ingress-nginx -f VOTRE_FICHIER_VALUES -- --repo https://kubernetes.github.io/ingress-nginx --namespace kube-system --version 4.8.3

  # Snapshot du chart cilium (https://cilium.io) avec la valeur par défaut et des flags définis :
  chartsnap -c cilium -- --repo https://helm.cilium.io --namespace kube-system --set hubble.relay.enabled=true --set hubble.ui.enabled=true

  # Snapshot de charts dans un registre OCI
  chartsnap -c oci://ghcr.io/nginxinc/charts/nginx-gateway-fabric -n nginx-gateway

  # Sortie sans couleurs :
  NO_COLOR=1 chartsnap -c VOTRE_CHART

Flags :
  -c, --chart string              chemin vers le répertoire du chart. ce flag est passé à 'helm template RELEASE_NAME CHART --values VALUES' comme 'CHART'
      --config-file string        nom ou chemin du fichier de configuration, qui définit le comportement du snapshot ex : champs dynamiques (par défaut &quot;.chartsnap.yaml&quot;)
  -N, --ctx-lines int             nombre de lignes à afficher dans la sortie diff. 0 pour la sortie complète (par défaut 3)
      --debug                     mode debug
      --fail-helm-error           échouer si la commande 'helm template' a échoué
      --failfast                  échouer dès qu’un cas de test échoue
  -h, --help                      aide pour chartsnap
  -n, --namespace string          namespace. ce flag est passé à 'helm template RELEASE_NAME CHART --values VALUES --namespace NAMESPACE' comme 'NAMESPACE' (par défaut &quot;default&quot;)
  -o, --output-dir string         répertoire dans lequel le dossier __snapshot__ est créé. (par défaut : répertoire du fichier values si --values est défini ; répertoire du chart si chart local ; sinon répertoire courant)
      --parallelism int           parallélisme des tests si plusieurs snapshots sont pris pour un répertoire de fichiers de valeurs de test. par défaut illimité (par défaut -1)
      --release-name string       nom de la release. ce flag est passé à 'helm template RELEASE_NAME CHART --values VALUES' comme 'RELEASE_NAME' (par défaut &quot;chartsnap&quot;)
      --snapshot-version string   utiliser une version spécifique du format de snapshot. v1, v2, v3 sont supportées. (par défaut : la plus récente)
  -u, --update-snapshot           mode mise à jour du snapshot
  -f, --values string             chemin vers un fichier ou un dossier de valeurs de test. si un dossier est indiqué, tous les fichiers de test sont testés. si vide, valeurs par défaut utilisées. ce flag est passé à 'helm template RELEASE_NAME CHART --values VALUES' comme 'VALUES'
  -v, --version                   version de chartsnap

</code></pre>
<h3>Gestion des valeurs dynamiques 💪</h3>
<p>Helm dispose d’une fonctionnalité appelée &quot;fonctions Helm&quot; qui génère des valeurs aléatoires ou des certificats auto-signés comme <a href="https://helm.sh/docs/chart_template_guide/function_list/#randalphanum-randalpha-randnumeric-and-randascii"><code>randAlphaNum</code></a> et <a href="https://helm.sh/docs/chart_template_guide/function_list/#cryptographic-and-security-functions"><code>genCA</code>, <code>genPrivateKey</code>, <code>genSelfSignedCert</code></a></p>
<p>Lorsque vous utilisez ces fonctions, la sortie varie à chaque exécution de Helm.
Pour ce cas, chartsnap propose une fonctionnalité qui évite des snapshots non concordants en les remplaçant par une valeur fixe, <code>###DYNAMIC_FIELD###</code>.</p>
<p>Vous pouvez spécifier les chemins des valeurs dynamiques dans le YAML généré en utilisant <a href="https://datatracker.ietf.org/doc/html/rfc6901">JSONPath</a>.</p>
<pre><code class="language-yaml:.chartsnap.yaml">dynamicFields:
  - apiVersion: v1
    kind: Secret
    name: cosmo-auth-env
    jsonPath:
      - /data/COOKIE_HASHKEY
      - /data/COOKIE_BLOCKKEY
      - /data/COOKIE_HASHKEY
      - /data/COOKIE_SESSION_NAME
    base64: true
</code></pre>
<blockquote>
<p>REMARQUE :
En JSONPath, l’échappement du caractère / est documenté dans <a href="https://datatracker.ietf.org/doc/html/rfc6901#section-3">RFC6901, section 3</a></p>
<pre><code>   Parce que les caractères '~' (%x7E) et '/' (%x2F) ont des significations spéciales dans JSON Pointer, '~' doit être encodé en '~0' et '/' en '~1' lorsqu’ils apparaissent dans un token de référence.
</code></pre>
<p>Donc si vous gérez un manifest comme ci-dessous, vous devez spécifier le chemin json comme <code>/metadata/annotaions/checksum~1values</code>.</p>
<pre><code class="language-yaml">metadata:
  annotations:
    checksum/values: RANDOM_VALUES
</code></pre>
</blockquote>
<p>Si vous avez un répertoire de fichiers de valeurs de test, placez-y un fichier <code>.chartsnap.yaml</code>. Ce comportement est commun à tous les tests de snapshot du dossier.</p>
<p>Pour plus d’exemples, voir <a href="https://raw.githubusercontent.com/jlandowner/helm-chartsnap/main/example/app1">example/app1</a>.</p>
<p>Alternativement, vous pouvez ajouter directement la configuration dans le fichier de valeurs de test via la propriété <code>testSpec</code>.
Dans ce cas, il n’est pas nécessaire de préparer un <code>.chartsnap.yaml</code>. C’est utile pour prendre des snapshots de charts distants ou tiers avec un seul fichier de valeurs.</p>
<p>Votre fichier de valeurs peut ressembler à ceci :</p>
<pre><code class="language-yaml"># Ajoutez cette propriété à vos valeurs.
testSpec:
  dynamicFields:
    - apiVersion: v1
      kind: Secret
      name: cilium-ca
      jsonPath:
        - /data/ca.crt
        - /data/ca.key
      base64: true
    - apiVersion: v1
      kind: Secret
      name: hubble-server-certs
      jsonPath:
        - /data/ca.crt
        - /data/tls.crt
        - /data/tls.key
      base64: true
    - apiVersion: v1
      kind: Secret
      name: hubble-relay-client-certs
      jsonPath:
        - /data/ca.crt
        - /data/tls.crt
        - /data/tls.key
      base64: true

# Le reste peut être n’importe quelle valeur de votre chart.
# ...
</code></pre>
<p>Pour plus d’exemples, voir <a href="https://raw.githubusercontent.com/jlandowner/helm-chartsnap/main/example/remote">example/remote</a>.</p>
<h2>Vitrine &amp; Utilisateurs ✨</h2>
<p>| Utilisateurs / Projets | Description | URL |
|:---|:---|:---|
| Exemple | Chart exemple généré par la commande <code>helm create</code> | <a href="https://raw.githubusercontent.com/jlandowner/helm-chartsnap/main/example/app1"><code>example/app1</code></a> |
| Exemple | Exemple de snapshot de charts dans des dépôts Helm distants | <a href="https://raw.githubusercontent.com/jlandowner/helm-chartsnap/main/example/remote"><code>example/remote</code></a> |
| <a href="https://github.com/jlandowner/helm-chartsnap-action">helm-chartsnap-action</a> | Action GitHub pour utiliser helm chartsnap en CI | https://github.com/jlandowner/helm-chartsnap-action |
| <a href="https://github.com/cosmo-workspace/cosmo">cosmo-workspace</a> | Plateforme WebIDE &amp; DevEnvironment open source sur Kubernetes | https://github.com/cosmo-workspace/cosmo/tree/main/charts/cosmo/test |
| <a href="https://github.com/Kong/kong">Kong</a> | 🦍 La passerelle API Cloud-Native et AI Gateway. | https://github.com/Kong/charts |</p>
<hr />
<p>Tranlated By <a href="https://github.com/OpenAiTx/OpenAiTx">Open Ai Tx</a> | Last indexed: 2025-06-07</p>
<hr />

        </div>
    </div>
    <footer class="footer">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank">Open AI Tx</a>
    </footer>
    <!-- Default Statcounter code for openaitx
https://openaitx.github.io/ -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>
    <!-- End of Statcounter Code -->
</body>
</html>