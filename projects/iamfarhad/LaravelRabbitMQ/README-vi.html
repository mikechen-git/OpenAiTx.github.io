<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LaravelRabbitMQ - iamfarhad/LaravelRabbitMQ vi</title>
    <meta name="title" content="LaravelRabbitMQ - iamfarhad/LaravelRabbitMQ vi | Laravel RabbitMQ Queue Driver Một trình điều khiển hàng đợi RabbitMQ mạnh mẽ cho Laravel, cung cấp khả năng xếp hàng tin nhắn nâng cao với hiệu suất cao và độ t...">
    <meta name="description" content="iamfarhad/LaravelRabbitMQ - GitHub repository vi documentation and information | Laravel RabbitMQ Queue Driver Một trình điều khiển hàng đợi RabbitMQ mạnh mẽ cho Laravel, cung cấp khả năng xếp hàng tin nhắn nâng cao với hiệu suất cao và độ t...">
    <meta name="keywords" content="iamfarhad, LaravelRabbitMQ, GitHub, repository, vi documentation">
    <meta name="author" content="Open AI Tx">
    <meta name="robots" content="index, follow">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://openaitx.github.io/projects/iamfarhad/LaravelRabbitMQ/README-vi.html">
    <meta property="og:title" content="LaravelRabbitMQ - iamfarhad/LaravelRabbitMQ vi | Laravel RabbitMQ Queue Driver Một trình điều khiển hàng đợi RabbitMQ mạnh mẽ cho Laravel, cung cấp khả năng xếp hàng tin nhắn nâng cao với hiệu suất cao và độ t...">
    <meta property="og:description" content="iamfarhad/LaravelRabbitMQ - GitHub repository vi documentation and information | Laravel RabbitMQ Queue Driver Một trình điều khiển hàng đợi RabbitMQ mạnh mẽ cho Laravel, cung cấp khả năng xếp hàng tin nhắn nâng cao với hiệu suất cao và độ t...">
    <meta property="og:image" content="https://openaitx.github.io/logo_crop.png">
    <link rel="icon" type="image/jpeg" href="/icon.jpg">
    <link rel="apple-touch-icon" href="/icon.jpg">
    <script src="/js/marked.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/css/github.min.css?v=20250613">
    <script src="/js/highlight.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/view.css?v=20250613">
    <style>
        body { display: flex; flex-direction: column; min-height: 100vh; }
        .main-container { margin: 0 auto; width: 100%; max-width: 980px; padding: 0 20px; }
        @media (max-width: 768px) { .main-container { padding: 0 15px; } }
        .markdown-body img { max-width: 100%; height: auto; }
        .header { text-align: center; margin-bottom: 30px; padding: 20px; background-color: #f6f8fa; border-bottom: 1px solid #e1e4e8; position: relative; }
        .header .links { margin-top: 10px; font-size: 16px; }
        .header .links a { color: #0366d6; text-decoration: none; margin-left: 5px; }
        .header .links a:hover { text-decoration: underline; }
        .language-badges { margin-top: 15px; text-align: center; }
        .language-badges a { display: inline-block; margin: 2px; text-decoration: none; }
        .language-badges img { height: 20px; border-radius: 3px; }
        .language-badges a:hover img { opacity: 0.8; }
    </style>
</head>
<body>
    <div style="position: fixed; top: 2px; left: 2px; z-index: 2000; background: rgba(255,255,255,0.95); border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); padding: 4px 14px; font-size: 15px; color: #222; font-family: 'Segoe UI', Arial, sans-serif; font-weight: 500; letter-spacing: 0.5px;">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank" style="color: #0366d6; text-decoration: none; font-weight: 600;">Open AI Tx</a>
    </div>
    <div class="header">
        <div class="links">
            GitHub Repository: <a href="https://github.com/iamfarhad/LaravelRabbitMQ" id="githubRepoLink" target="_blank">iamfarhad/LaravelRabbitMQ</a>
<h1 style="display: none;">Laravel RabbitMQ Queue Driver Một trình điều khiển hàng đợi RabbitMQ mạnh mẽ cho Laravel, cung cấp khả năng xếp hàng tin nhắn nâng cao với hiệu suất cao và độ t...</h1>
        </div>
        <div class="language-badges" id="languageBadges">
            <!-- You can generate language badges here if needed -->
        </div>
    </div>
    <div class="main-container">
        <div class="markdown-body" id="content">
            <h1>Laravel RabbitMQ Queue Driver</h1>
<p><a href="https://packagist.org/packages/iamfarhad/laravel-rabbitmq"><img src="https://poser.pugx.org/iamfarhad/laravel-rabbitmq/v/stable?format=flat-square" alt="Latest Stable Version" /></a>
<a href="https://packagist.org/packages/iamfarhad/laravel-rabbitmq"><img src="https://poser.pugx.org/iamfarhad/laravel-rabbitmq/downloads?format=flat-square" alt="Total Downloads" /></a>
<a href="https://packagist.org/packages/iamfarhad/laravel-rabbitmq"><img src="https://poser.pugx.org/iamfarhad/laravel-rabbitmq/license?format=flat-square" alt="License" /></a>
<a href="https://github.com/iamfarhad/LaravelRabbitMQ/actions/workflows/tests.yml"><img src="https://github.com/iamfarhad/LaravelRabbitMQ/actions/workflows/tests.yml/badge.svg" alt="Tests" /></a>
<a href="https://github.com/iamfarhad/LaravelRabbitMQ/actions/workflows/code-style.yml"><img src="https://github.com/iamfarhad/LaravelRabbitMQ/actions/workflows/code-style.yml/badge.svg" alt="Code style" /></a></p>
<p>Một trình điều khiển hàng đợi RabbitMQ mạnh mẽ cho Laravel, cung cấp khả năng xếp hàng tin nhắn nâng cao với hiệu suất cao và độ tin cậy.</p>
<h2>Tính năng</h2>
<ul>
<li>Tích hợp API Queue gốc của Laravel</li>
<li>Hỗ trợ jobs trì hoãn/lên lịch</li>
<li>Hàng đợi ưu tiên</li>
<li>Xử lý lỗi và tự động thử lại</li>
<li>Kết nối an toàn SSL/TLS</li>
<li>Xử lý song song với nhiều consumer</li>
<li>Tự động tạo và liên kết hàng đợi</li>
<li>Tùy chỉnh cấu hình hàng đợi toàn diện</li>
<li>Hỗ trợ thuộc tính tin nhắn RabbitMQ</li>
<li>Dead letter exchanges</li>
<li>Thiết lập Chất lượng Dịch vụ (QoS)</li>
<li>Hỗ trợ quorum queue</li>
</ul>
<h2>Chính sách Hỗ trợ</h2>
<p>Chỉ phiên bản mới nhất sẽ nhận được các tính năng mới. Sửa lỗi sẽ được cung cấp theo sơ đồ sau:</p>
<p>| Phiên bản Package | Phiên bản Laravel | Phiên bản PHP | Sửa lỗi đến         |                                                                                      |
|-------------------|-------------------|---------------|---------------------|--------------------------------------------------------------------------------------|
| 0.1               | 10, 11, 12        | ^8.2          | 26 tháng 8, 2025    | <a href="https://github.com/iamfarhad/LaravelRabbitMQ/blob/master/README.md">Tài liệu</a>        |</p>
<h2>Yêu cầu</h2>
<ul>
<li>PHP 8.2+</li>
<li>Laravel 10.x, 11.x hoặc 12.x</li>
<li>RabbitMQ Server 3.8+</li>
<li>ext-pcntl (cho xử lý song song)</li>
</ul>
<h2>Cài đặt</h2>
<p>Cài đặt package thông qua Composer:</p>
<pre><code class="language-bash">composer require iamfarhad/laravel-rabbitmq
</code></pre>
<p>Package sẽ tự động đăng ký thông qua tính năng phát hiện package của Laravel.</p>
<p>Đối với Lumen, đăng ký thủ công service provider trong <code>bootstrap/app.php</code>:</p>
<pre><code class="language-php">$app-&gt;register(iamfarhad\LaravelRabbitMQ\LaravelRabbitQueueServiceProvider::class);
</code></pre>
<h2>Cấu hình</h2>
<p>Thêm kết nối RabbitMQ vào file <code>config/queue.php</code> của bạn:</p>
<pre><code class="language-php">'connections' =&gt; [
    // ... các kết nối khác
    
    'rabbitmq' =&gt; [
        'driver' =&gt; 'rabbitmq',
        'queue'  =&gt; env('RABBITMQ_QUEUE', 'default'),

        'hosts' =&gt; [
            'host'      =&gt; env('RABBITMQ_HOST', '127.0.0.1'),
            'port'      =&gt; env('RABBITMQ_PORT', 5672),
            'user'      =&gt; env('RABBITMQ_USER', 'guest'),
            'password'  =&gt; env('RABBITMQ_PASSWORD', 'guest'),
            'vhost'     =&gt; env('RABBITMQ_VHOST', '/'),
            'lazy'      =&gt; env('RABBITMQ_LAZY_CONNECTION', true),
            'keepalive' =&gt; env('RABBITMQ_KEEPALIVE_CONNECTION', false),
            'heartbeat' =&gt; env('RABBITMQ_HEARTBEAT_CONNECTION', 0),
            'secure'    =&gt; env('RABBITMQ_SECURE', false),
        ],

        'options' =&gt; [
            'ssl_options' =&gt; [
                'cafile'      =&gt; env('RABBITMQ_SSL_CAFILE', null),
                'local_cert'  =&gt; env('RABBITMQ_SSL_LOCALCERT', null),
                'local_key'   =&gt; env('RABBITMQ_SSL_LOCALKEY', null),
                'verify_peer' =&gt; env('RABBITMQ_SSL_VERIFY_PEER', true),
                'passphrase'  =&gt; env('RABBITMQ_SSL_PASSPHRASE', null),
            ],
            'queue' =&gt; [
                'job' =&gt; \iamfarhad\LaravelRabbitMQ\Jobs\RabbitMQJob::class,
                'qos' =&gt; [
                    'prefetch_size'  =&gt; 0,
                    'prefetch_count' =&gt; 10,
                    'global'         =&gt; false
                ]
            ],
        ],
    ],
]
</code></pre>
<p>Thêm các biến môi trường sau vào file <code>.env</code> của bạn:</p>
<pre><code>QUEUE_CONNECTION=rabbitmq
RABBITMQ_HOST=127.0.0.1
RABBITMQ_PORT=5672
RABBITMQ_USER=guest
RABBITMQ_PASSWORD=guest
RABBITMQ_VHOST=/
</code></pre>
<h2>Sử dụng cơ bản</h2>
<p>Sau khi cấu hình, bạn có thể sử dụng API Queue của Laravel như bình thường. Nếu bạn đã quen với hàng đợi Laravel, bạn không cần thay đổi gì trong mã nguồn của mình.</p>
<h3>Dispatch Jobs</h3>
<pre><code class="language-php">// Dispatch một job vào queue mặc định
dispatch(new ProcessPodcast($podcast));

// Dispatch một job vào queue cụ thể
dispatch(new ProcessPodcast($podcast))-&gt;onQueue('podcasts');

// Dispatch một job với delay
dispatch(new ProcessPodcast($podcast))-&gt;delay(now()-&gt;addMinutes(10));
</code></pre>
<h3>Tạo Job</h3>
<pre><code class="language-php">namespace App\Jobs;

use Illuminate\Bus\Queueable;
use Illuminate\Contracts\Queue\ShouldQueue;
use Illuminate\Foundation\Bus\Dispatchable;
use Illuminate\Queue\InteractsWithQueue;
use Illuminate\Queue\SerializesModels;

class ProcessPodcast implements ShouldQueue
{
    use Dispatchable, InteractsWithQueue, Queueable, SerializesModels;

    public function __construct(private $podcast)
    {
        // Chỉ định một queue tùy chỉnh
        $this-&gt;onQueue('podcasts');
    }

    public function handle()
    {
        // Xử lý podcast...
    }
}
</code></pre>
<h2>Tiêu thụ Tin nhắn</h2>
<p>Có hai cách để tiêu thụ tin nhắn từ RabbitMQ:</p>
<h3>1. Worker Queue chuẩn của Laravel</h3>
<p>Sử dụng queue worker tích hợp của Laravel với <code>basic_get</code>:</p>
<pre><code class="language-bash">php artisan queue:work rabbitmq --queue=default
</code></pre>
<h3>2. Consumer RabbitMQ chuyên dụng</h3>
<p>Package này cung cấp một consumer RabbitMQ chuyên biệt sử dụng <code>basic_consume</code> và mang lại hiệu suất tốt hơn:</p>
<pre><code class="language-bash">php artisan rabbitmq:consume --queue=default
</code></pre>
<h4>Tùy chọn cho Consumer</h4>
<pre><code class="language-bash">php artisan rabbitmq:consume [options]
</code></pre>
<p>Tùy chọn:</p>
<ul>
<li><code>--connection=</code>: Tên kết nối (mặc định là kết nối mặc định)</li>
<li><code>--queue=</code>: Tên queue muốn tiêu thụ</li>
<li><code>--name=default</code>: Tên consumer</li>
<li><code>--once</code>: Xử lý chỉ một job rồi thoát</li>
<li><code>--stop-when-empty</code>: Dừng khi queue rỗng</li>
<li><code>--delay=0</code>: Độ trễ cho các job thất bại (giây)</li>
<li><code>--max-jobs=0</code>: Số lượng job tối đa xử lý trước khi dừng</li>
<li><code>--max-time=0</code>: Thời gian tối đa worker chạy (giây)</li>
<li><code>--memory=128</code>: Giới hạn bộ nhớ (MB)</li>
<li><code>--timeout=60</code>: Số giây một job có thể chạy trước khi timeout</li>
<li><code>--tries=1</code>: Số lần thử trước khi job bị coi là thất bại</li>
<li><code>--max-priority=null</code>: Mức ưu tiên tối đa để tiêu thụ</li>
<li><code>--num-processes=2</code>: Số process song song chạy</li>
</ul>
<h2>Tính năng Nâng cao</h2>
<h3>Hàng đợi Ưu tiên</h3>
<p>Để sử dụng hàng đợi ưu tiên:</p>
<ol>
<li>Thiết lập mức ưu tiên tối đa trong cấu hình queue (1-255, số lớn hơn là ưu tiên cao hơn)</li>
<li>Dispatch job với ưu tiên:</li>
</ol>
<pre><code class="language-php">$job = (new ProcessPodcast($podcast))-&gt;onQueue('podcasts');
dispatch($job-&gt;withProperty('priority', 10));
</code></pre>
<h3>Xử lý Song song</h3>
<p>Chạy nhiều process consumer song song:</p>
<pre><code class="language-bash">php artisan rabbitmq:consume --queue=default --num-processes=4
</code></pre>
<h3>Chất lượng Dịch vụ (QoS)</h3>
<p>Cấu hình prefetch trong cấu hình queue:</p>
<pre><code class="language-php">'queue' =&gt; [
    'qos' =&gt; [
        'prefetch_size'  =&gt; 0,    // Không giới hạn kích thước
        'prefetch_count' =&gt; 10,   // Xử lý 10 tin nhắn mỗi lần
        'global'         =&gt; false // Áp dụng cho mỗi consumer, không phải channel
    ]
]
</code></pre>
<h3>Kết nối SSL/TLS</h3>
<p>Để bật kết nối bảo mật:</p>
<ol>
<li>Đặt <code>secure</code> thành <code>true</code> trong cấu hình</li>
<li>Cấu hình ssl_options với chứng chỉ và cài đặt thích hợp</li>
</ol>
<pre><code class="language-php">'secure' =&gt; true,
'ssl_options' =&gt; [
    'cafile'      =&gt; '/path/to/ca.pem',
    'local_cert'  =&gt; '/path/to/cert.pem',
    'local_key'   =&gt; '/path/to/key.pem',
    'verify_peer' =&gt; true,
    'passphrase'  =&gt; 'certificate-passphrase',
],
</code></pre>
<h2>Xử lý lỗi và Thử lại</h2>
<p>Các job thất bại sẽ tự động được thử lại dựa trên tùy chọn <code>--tries</code>. Những job vượt quá số lần thử sẽ được chuyển vào bảng failed jobs.</p>
<p>Bạn có thể tùy chỉnh hành vi thử lại:</p>
<pre><code class="language-php">// Trong class job của bạn
public function failed(Throwable $exception)
{
    // Xử lý job thất bại
}

// Tùy chỉnh thời gian delay thử lại
public function retryAfter()
{
    return 30; // giây
}
</code></pre>
<h2>Đóng góp</h2>
<p>Chào mừng đóng góp! Hãy gửi Pull Request.</p>
<ol>
<li>Fork repository</li>
<li>Tạo branch cho tính năng của bạn (<code>git checkout -b feature/amazing-feature</code>)</li>
<li>Commit thay đổi của bạn (<code>git commit -m 'Add some amazing feature'</code>)</li>
<li>Push lên branch (<code>git push origin feature/amazing-feature</code>)</li>
<li>Tạo Pull Request</li>
</ol>
<h2>Giấy phép</h2>
<p>Package này là phần mềm mã nguồn mở, được cấp phép theo <a href="LICENSE">MIT license</a>.</p>
<hr />
<p>Tranlated By <a href="https://github.com/OpenAiTx/OpenAiTx">Open Ai Tx</a> | Last indexed: 2025-06-07</p>
<hr />

        </div>
    </div>
    <footer class="footer">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank">Open AI Tx</a>
    </footer>
    <!-- Default Statcounter code for openaitx
https://openaitx.github.io/ -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>
    <!-- End of Statcounter Code -->
</body>
</html>