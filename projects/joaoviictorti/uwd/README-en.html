<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uwd - joaoviictorti/uwd en</title>
    <meta name="title" content="uwd - joaoviictorti/uwd en | uwd 🦀 uwd is a Rust library for call stack spoofing on Windows, allowing you to execute arbitrary functions with a forged call stack that evades analysis, logg...">
    <meta name="description" content="joaoviictorti/uwd - GitHub repository en documentation and information | uwd 🦀 uwd is a Rust library for call stack spoofing on Windows, allowing you to execute arbitrary functions with a forged call stack that evades analysis, logg...">
    <meta name="keywords" content="joaoviictorti, uwd, GitHub, repository, en documentation">
    <meta name="author" content="Open AI Tx">
    <meta name="robots" content="index, follow">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://openaitx.github.io/projects/joaoviictorti/uwd/README-en.html">
    <meta property="og:title" content="uwd - joaoviictorti/uwd en | uwd 🦀 uwd is a Rust library for call stack spoofing on Windows, allowing you to execute arbitrary functions with a forged call stack that evades analysis, logg...">
    <meta property="og:description" content="joaoviictorti/uwd - GitHub repository en documentation and information | uwd 🦀 uwd is a Rust library for call stack spoofing on Windows, allowing you to execute arbitrary functions with a forged call stack that evades analysis, logg...">
    <meta property="og:image" content="https://openaitx.github.io/logo_crop.png">
    <link rel="icon" type="image/jpeg" href="/icon.jpg">
    <link rel="apple-touch-icon" href="/icon.jpg">
    <script src="/js/marked.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/css/github.min.css?v=20250613">
    <script src="/js/highlight.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/view.css?v=20250613">
    <style>
        body { display: flex; flex-direction: column; min-height: 100vh; }
        .main-container { margin: 0 auto; width: 100%; max-width: 980px; padding: 0 20px; }
        @media (max-width: 768px) { .main-container { padding: 0 15px; } }
        .markdown-body img { max-width: 100%; height: auto; }
        .header { text-align: center; margin-bottom: 30px; padding: 20px; background-color: #f6f8fa; border-bottom: 1px solid #e1e4e8; position: relative; }
        .header .links { margin-top: 10px; font-size: 16px; }
        .header .links a { color: #0366d6; text-decoration: none; margin-left: 5px; }
        .header .links a:hover { text-decoration: underline; }
        .language-badges { margin-top: 15px; text-align: center; }
        .language-badges a { display: inline-block; margin: 2px; text-decoration: none; }
        .language-badges img { height: 20px; border-radius: 3px; }
        .language-badges a:hover img { opacity: 0.8; }
    </style>
</head>
<body>
    <div style="position: fixed; top: 2px; left: 2px; z-index: 2000; background: rgba(255,255,255,0.95); border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); padding: 4px 14px; font-size: 15px; color: #222; font-family: 'Segoe UI', Arial, sans-serif; font-weight: 500; letter-spacing: 0.5px;">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank" style="color: #0366d6; text-decoration: none; font-weight: 600;">Open AI Tx</a>
    </div>
    <div class="header">
        <div class="links">
            GitHub Repository: <a href="https://github.com/joaoviictorti/uwd" id="githubRepoLink" target="_blank">joaoviictorti/uwd</a>
<h1 style="display: none;">uwd 🦀 uwd is a Rust library for call stack spoofing on Windows, allowing you to execute arbitrary functions with a forged call stack that evades analysis, logg...</h1>
        </div>
        <div class="language-badges" id="languageBadges">
            <!-- You can generate language badges here if needed -->
        </div>
    </div>
    <div class="main-container">
        <div class="markdown-body" id="content">
            <h1>uwd 🦀</h1>
<p><img src="https://img.shields.io/badge/made%20with-Rust-red" alt="Rust" />
<img src="https://img.shields.io/crates/v/uwd.svg" alt="crate" />
<img src="https://docs.rs/uwd/badge.svg" alt="docs" />
<a href="https://github.com/joaoviictorti/uwd/actions/workflows/ci.yml"><img src="https://github.com/joaoviictorti/uwd/actions/workflows/ci.yml/badge.svg" alt="build" /></a>
<img src="https://img.shields.io/github/forks/joaoviictorti/uwd" alt="Forks" />
<img src="https://img.shields.io/github/stars/joaoviictorti/uwd" alt="Stars" />
<img src="https://img.shields.io/github/license/joaoviictorti/uwd" alt="License" /></p>
<p><code>uwd</code> is a Rust library for call stack spoofing on Windows, allowing you to execute arbitrary functions with a forged call stack that evades analysis, logging, or detection during stack unwinding.</p>
<p>Inspired by <a href="https://github.com/klezVirus/SilentMoonwalk">SilentMoonwalk</a>, this crate brings low-level spoofing capabilities into a clean, idiomatic Rust interface with full support for <code>#[no_std]</code>, <code>MSVC</code> and <code>GNU</code> toolchains, and automated gadget resolution.</p>
<h2>Features</h2>
<ul>
<li>✅ Call stack spoofing via <code>Synthetic</code> and <code>Desync</code>.</li>
<li>✅ Compatible with both <code>MSVC</code> and <code>GNU</code> toolchains (<strong>x64</strong>).</li>
<li>✅ Inline macros: <code>spoof!</code>, <code>spoof_synthetic!</code>, <code>syscall!</code>, <code>syscall_synthetic!</code>.</li>
<li>✅ Supports <code>#[no_std]</code> environments (with <code>alloc</code>).</li>
</ul>
<h2>Getting started</h2>
<p>Add <code>uwd</code> to your project by updating your <code>Cargo.toml</code>:</p>
<pre><code class="language-bash">cargo add uwd
</code></pre>
<h2>Usage</h2>
<p><code>uwd</code> allows you to spoof the call stack in Rust when calling either standard Windows APIs or performing indirect syscalls. The library handles the full setup of fake frames, gadget chains, and register preparation to make execution appear as if it came from a legitimate source.</p>
<p>You can spoof:</p>
<ul>
<li>Normal functions (like <code>VirtualAlloc</code>, <code>WinExec</code>, etc.)</li>
<li>Native syscalls with automatic SSN and stub resolution (like <code>NtAllocateVirtualMemory</code>)</li>
</ul>
<p>The macros <code>spoof!</code> / <code>spoof_synthetic!</code> and <code>syscall!</code> / <code>syscall_synthetic!</code> abstract all the complexity.</p>
<h3>Spoofing WinExec</h3>
<p>This example shows how to spawn <code>calc.exe</code> using a spoofed call stack. We call <code>WinExec</code> twice once using the Desync technique, and again using the Synthetic one.</p>
<pre><code class="language-rs">use dinvk::{GetModuleHandle, GetProcAddress};
use uwd::{spoof, spoof_synthetic};

fn main() -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {
    // Resolves addresses of the WinAPI functions to be used
    let kernel32 = GetModuleHandle(&quot;kernel32.dll&quot;, None);
    let win_exec = GetProcAddress(kernel32, &quot;WinExec&quot;, None);
    
    // Execute command with `WinExec`
    // Call Stack Spoofing (Desync)
    let cmd = c&quot;calc.exe&quot;;
    let mut result = spoof!(win_exec, cmd.as_ptr(), 1)?;
    if result.is_null() {
        eprintln!(&quot;WinExec Failed&quot;);
        return Ok(());
    }

    // Call Stack Spoofing (Synthetic)
    result = spoof_synthetic!(win_exec, cmd.as_ptr(), 1)?;
    if result.is_null() {
        eprintln!(&quot;WinExec Failed [2]&quot;);
        return Ok(());
    }

    Ok(())
}
</code></pre>
<h3>Spoofing an Indirect Syscall</h3>
<p>This example performs a indirect system call to <code>NtAllocateVirtualMemory</code> with a spoofed call stack.</p>
<pre><code class="language-rs">use std::{ffi::c_void, ptr::null_mut};
use dinvk::NT_SUCCESS;
use uwd::{syscall, syscall_synthetic, AsUwd};

fn main() -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {
    // Running indirect syscall with Call Stack Spoofing (Desync)
    let mut addr = null_mut::&lt;c_void&gt;();
    let mut size = (1 &lt;&lt; 12) as usize;
    let mut status = syscall!(&quot;NtAllocateVirtualMemory&quot;, -1isize, addr.as_uwd_mut(), 0, size.as_uwd_mut(), 0x3000, 0x04)? as i32;
    if !NT_SUCCESS(status) {
        eprintln!(&quot;NtAllocateVirtualMemory Failed With Status: {status:#X}&quot;);
        return Ok(())
    }

    println!(&quot;[+] Address allocated: {:?}&quot;, addr);

    // Running indirect syscall with Call Stack Spoofing (Synthetic)
    let mut addr = null_mut::&lt;c_void&gt;();
    let mut size = (1 &lt;&lt; 12) as usize;
    status = syscall_synthetic!(&quot;NtAllocateVirtualMemory&quot;, -1isize, addr.as_uwd_mut(), 0, size.as_uwd_mut(), 0x3000, 0x04)? as i32;
    if !NT_SUCESS(status) {
        eprintln!(&quot;NtAllocateVirtualMemory Failed With Status [2]: {status:#X}&quot;);
        return Ok(())
</code></pre>
<pre><code>}

println!(&quot;[+] Address allocated: {:?}&quot;, addr);

Ok(())
</code></pre>
<p>}</p>
<pre><code>
## Additional Resources

For more examples, check the [examples](/examples) folder in the repository.

## References

I want to express my gratitude to these projects that inspired me to create `uwd` and contribute with some features:

- [SilentMoonwalk](https://github.com/klezVirus/SilentMoonwalk)

Special thanks to:

- [Kudaes](https://x.com/_Kudaes_)
- [Klez](https://x.com/KlezVirus)
- [Waldo-IRC](https://x.com/waldoirc)
- [Trickster0](https://x.com/trickster012)
- [namazso](https://x.com/namazso)

## License

This project is licensed under the MIT License. See the [LICENSE](/LICENSE) file for details.
</code></pre>
<hr />
<p>Tranlated By <a href="https://github.com/OpenAiTx/OpenAiTx">Open Ai Tx</a> | Last indexed: 2025-07-07</p>
<hr />

        </div>
    </div>
    <footer class="footer">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank">Open AI Tx</a>
    </footer>
    <!-- Default Statcounter code for openaitx
https://openaitx.github.io/ -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>
    <!-- End of Statcounter Code -->
</body>
</html>