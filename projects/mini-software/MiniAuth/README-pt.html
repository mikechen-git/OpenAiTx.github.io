<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open AI Tx - Markdown Viewer</title>

    <!-- Primary Meta Tags -->
    <meta name="title" content="Open AI Tx - Markdown Viewer">
    <meta name="description" content="GitHub style markdown viewer for Open AI Tx projects">
    <meta name="keywords" content="Open AI Tx, Markdown, GitHub Style, Documentation">
    <meta name="author" content="Open AI Tx">
    <meta name="robots" content="index, follow">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://openaitx.github.io/view.html">
    <meta property="og:title" content="Open AI Tx - Markdown Viewer">
    <meta property="og:description" content="GitHub style markdown viewer for Open AI Tx projects">
    <meta property="og:image" content="https://openaitx.github.io/logo_crop.png">

    <!-- Favicon -->
    <link rel="icon" type="image/jpeg" href="icon.jpg">
    <link rel="apple-touch-icon" href="icon.jpg">

    <!-- Marked.js for Markdown rendering -->
    <script type="text/javascript" async="" src="https://www.statcounter.com/counter/recorder.js"></script><script src="js/marked.min.js"></script>
    <!-- Highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="css/github.min.css">
    <script src="js/highlight.min.js"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="view.css">
    <style>
        /* Layout */
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .main-container {
            margin: 0 auto;
            width: 100%;
            max-width: 980px;
            padding: 0 20px;
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 0 15px;
            }
        }

        /* Image size restrictions */
        .markdown-body img {
            max-width: 100%;
            height: auto;
        }

        /* Existing styles */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: #f6f8fa;
            border-bottom: 1px solid #e1e4e8;
            position: relative;
        }

        .back-button {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #0366d6;
            text-decoration: none;
            display: flex;
            align-items: center;
            font-size: 14px;
            padding: 5px 10px;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            background-color: #fff;
        }

        .back-button:hover {
            background-color: #f6f8fa;
            border-color: #0366d6;
        }

        .back-button::before {
            content: "←";
            margin-right: 5px;
            font-size: 16px;
        }

        .header .links {
            margin-top: 10px;
            font-size: 16px;
        }

        .header .links a {
            color: #0366d6;
            text-decoration: none;
            margin-left: 5px;
        }

        .header .links a:hover {
            text-decoration: underline;
        }
        
        /* Language badges styles */
        .language-badges {
            margin-top: 15px;
            text-align: center;
        }
        .language-badges a {
            display: inline-block;
            margin: 2px;
            text-decoration: none;
        }
        .language-badges img {
            height: 20px;
            border-radius: 3px;
        }
        .language-badges a:hover img {
            opacity: 0.8;
        }
    </style>
</head>

<body>
    <div class="header">
        <a href="javascript:history.back()" class="back-button">Back</a>
        <div class="links">
            GitHub Repository: <a href="https://github.com/mini-software/MiniAuth" id="githubRepoLink" target="_blank">mini-software/MiniAuth</a>
        </div>
        <div class="language-badges" id="languageBadges"><a href="https://openaitx.github.io/view.html?user=mini-software&amp;project=MiniAuth&amp;lang=en"><img src="https://img.shields.io/badge/EN-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=mini-software&amp;project=MiniAuth&amp;lang=zh-CN"><img src="https://img.shields.io/badge/简中-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=mini-software&amp;project=MiniAuth&amp;lang=zh-TW"><img src="https://img.shields.io/badge/繁中-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=mini-software&amp;project=MiniAuth&amp;lang=ja"><img src="https://img.shields.io/badge/日本語-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=mini-software&amp;project=MiniAuth&amp;lang=ko"><img src="https://img.shields.io/badge/한국어-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=mini-software&amp;project=MiniAuth&amp;lang=th"><img src="https://img.shields.io/badge/ไทย-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=mini-software&amp;project=MiniAuth&amp;lang=fr"><img src="https://img.shields.io/badge/Français-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=mini-software&amp;project=MiniAuth&amp;lang=de"><img src="https://img.shields.io/badge/Deutsch-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=mini-software&amp;project=MiniAuth&amp;lang=es"><img src="https://img.shields.io/badge/Español-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=mini-software&amp;project=MiniAuth&amp;lang=it"><img src="https://img.shields.io/badge/Italiano-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=mini-software&amp;project=MiniAuth&amp;lang=ru"><img src="https://img.shields.io/badge/Русский-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=mini-software&amp;project=MiniAuth&amp;lang=pt"><img src="https://img.shields.io/badge/Português-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=mini-software&amp;project=MiniAuth&amp;lang=nl"><img src="https://img.shields.io/badge/Nederlands-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=mini-software&amp;project=MiniAuth&amp;lang=pl"><img src="https://img.shields.io/badge/Polski-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=mini-software&amp;project=MiniAuth&amp;lang=ar"><img src="https://img.shields.io/badge/العربية-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=mini-software&amp;project=MiniAuth&amp;lang=tr"><img src="https://img.shields.io/badge/Türkçe-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=mini-software&amp;project=MiniAuth&amp;lang=vi"><img src="https://img.shields.io/badge/Tiếng Việt-white" alt="version"></a></div>
    </div>

    <div class="main-container">
        <div class="markdown-body" id="content"><div align="center">
<p><a href="https://www.nuget.org/packages/MiniAuth"><img src="https://img.shields.io/nuget/v/MiniAuth.svg" alt="NuGet"></a>  <a href="https://www.nuget.org/packages/MiniAuth"><img src="https://img.shields.io/nuget/dt/MiniAuth.svg" alt=""></a>  
<a href="https://gitee.com/shps951023/MiniAuth"><img src="https://gitee.com/shps951023/MiniAuth/badge/star.svg" alt="star"></a> <a href="https://github.com/Mini-Software/MiniAuth" rel="nofollow"><img src="https://img.shields.io/github/stars/Mini-Software/MiniAuth?logo=github" alt="GitHub stars"></a> <a href="https://www.nuget.org/packages/MiniAuth"><img src="https://img.shields.io/badge/.NET-%3E%3D%206.0-red.svg" alt="version"></a>
</p>
</div>

<hr>
<div align="center">
<p><strong>
    <a href="README.md">English</a> | <a href="README.zh-CN.md">简体中文</a> | <a href="README.zh-Hant.md">繁體中文</a> | <a href="README.ja.md">日本語</a> | <a href="README.ko.md">한국어</a> | <a href="README.es.md">Español</a>  
</strong></p>
</div>



<hr>
<div align="center">
 Seu <a href="https://github.com/mini-software/miniauth">Star</a>, <a href="https://miniexcel.github.io/">Doação</a>, <a href="https://www.linkedin.com/in/itweihan/">Recomendação</a> pode tornar o MiniAuth melhor 
</div>




<h3>Introdução</h3>
<p>"Uma linha de código" adiciona gerenciamento de usuários/papéis (role) do asp.net core identity web para seus projetos novos/antigos</p>
<table>
    <tbody><tr>
        <td><img src="https://github.com/mini-software/MiniExcel/assets/12729184/d2aec694-158d-4ebc-bd8b-0e9ae1f855ac" alt="Imagem 1"></td>
        <td><img src="https://github.com/mini-software/MiniAuth/assets/12729184/2f791e25-9158-495e-9383-4fbedf9b982b" alt="Imagem 2"></td>
    </tr>
    <tr>
        <td><img src="https://github.com/mini-software/MiniAuth/assets/12729184/03d72ed7-8fb9-465f-9093-24b00279eeb2" alt="Imagem 3"></td>
        <td><img src="https://github.com/mini-software/MiniAuth/assets/12729184/841df179-7e5f-481a-9039-46738b20aa2e" alt="Imagem 4"></td>
    </tr>
</tbody></table>


<h3>Funcionalidades</h3>
<ul>
<li>Compatibilidade: Suporta .NET Identity baseado em JWT, Cookie, Session, etc.</li>
<li>Simples: Design plug-and-play, API, SPA, MVC, Razor Page, etc.</li>
<li>Suporta múltiplos bancos de dados: Suporta Oracle, SQL Server, MySQL, etc. via EF Core</li>
<li>Não intrusivo: Não afeta bancos de dados ou estruturas de projetos existentes</li>
<li>Multi-plataforma: Suporta ambientes Linux, macOS</li>
</ul>
<h3>Instalação</h3>
<p>Instale o pacote pelo NuGet</p>
<h3>Início Rápido</h3>
<p>Adicione uma única linha de código <code>services.AddMiniAuth()</code> no Startup e execute seu projeto. Exemplo:</p>
<pre><code class="language-csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
    {
        <span class="hljs-keyword">var</span> builder = WebApplication.CreateBuilder(args);

        builder.Services.AddMiniAuth(); <span class="hljs-comment">// &lt;= ❗❗❗</span>

        <span class="hljs-keyword">var</span> app = builder.Build();
        app.Run();
    }
}
</code></pre>
<p>A conta padrão de administrador é <code>admin@mini-software.github.io</code> com a senha <code>E7c4f679-f379-42bf-b547-684d456bc37f</code> (lembre-se de alterar a senha). A página de administração pode ser acessada em <code>http(s)://seuhost/miniauth/index.html</code>.</p>
<p>Adicione <code>[Authorize]</code> às categorias ou métodos que exigem gerenciamento de permissão, ou controle por papel <code>[Authorize(Roles = "role")]</code>. Retorna status 401 se não estiver logado, e retorna status 403 se não houver permissão.</p>
<h3>MiniAuth Cookie Identity</h3>
<p>O MiniAuth vem pré-configurado como identidade baseada em Cookie único, por favor, altere para JWT, etc., para projetos com separação entre frontend e backend.</p>
<h3>MiniAuth JWT Identity</h3>
<p>Configurando AuthenticationType = BearerJwt</p>
<pre><code class="language-C# hljs language-C">builder.Services.AddMiniAuth(options:(options) =&gt;
{
    options.AuthenticationType = MiniAuthOptions.AuthType.BearerJwt;
});
</code></pre>
<p>Lembre-se de definir uma nova chave de segurança JWT, por exemplo:</p>
<pre><code class="language-C# hljs language-C">builder.Services.AddMiniAuth(options: (options) =&gt;
{
    options.JWTKey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(<span class="hljs-string">"6ee3edbf-488e-4484-9c2c-e3ffa6dcbc09"</span>));
});
</code></pre>
<h4>Obtendo o token</h4>
<p>Exemplo de XHR em Javascript no frontend</p>
<pre><code class="language-javascript hljs"><span class="hljs-keyword">var</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
  <span class="hljs-string">"username"</span>: <span class="hljs-string">"admin@mini-software.github.io"</span>,
  <span class="hljs-string">"password"</span>: <span class="hljs-string">"E7c4f679-f379-42bf-b547-684d456bc37f"</span>,
  <span class="hljs-string">"remember"</span>: <span class="hljs-literal">false</span>
});
<span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
xhr.<span class="hljs-property">withCredentials</span> = <span class="hljs-literal">true</span>;
xhr.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"readystatechange"</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">readyState</span> === <span class="hljs-number">4</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">responseText</span>);
  }
});
xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">"POST"</span>, <span class="hljs-string">"http://seuhost/miniauth/login"</span>);
xhr.<span class="hljs-title function_">setRequestHeader</span>(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json"</span>);
xhr.<span class="hljs-title function_">send</span>(data);
</code></pre>
<p>resposta</p>
<pre><code class="language-json hljs"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"ok"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"tokenType"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Bearer"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"accessToken"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1laWQiOiIxZTIxOGY4My1iZjE3LTRhY2YtODhmOS1iOTQ3NjhjOWUwMGMiLCJuYW1lIjoiYWRtaW5AbWluaS1zb2Z0d2FyZS5naXRodWIuaW8iLCJyb2xlIjoibWluaWF1dGgtYWRtaW4iLCJzdWIiOiJhZG1pbkBtaW5pLXNvZnR3YXJlLmdpdGh1Yi5pbyIsIm5iZiI6MTcxODIwNDg5NSwiZXhwIjoxNzE4MjA1Nzk1LCJpYXQiOjE3MTgyMDQ4OTUsImlzcyI6Ik1pbmlBdXRoIn0._-DQ_rcbeju8_nrK2lD5we0rre04_xdDZNF6NhM0Rg0"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"expiresIn"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">900</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>Salve o <code>accessToken</code> no localstorage ou em um cookie. Ao chamar sua API com [Authorize], defina o <code>Header Authorization</code> como <code>Bearer + espaço + accessToken</code>, e o sistema fará a verificação automaticamente.</p>
<p>Exemplo:</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
xhr.<span class="hljs-property">withCredentials</span> = <span class="hljs-literal">true</span>;
xhr.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"readystatechange"</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">readyState</span> === <span class="hljs-number">4</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">responseText</span>);
  }
});
xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">"GET"</span>, <span class="hljs-string">"http://seuhost:5014/sua/api"</span>);
xhr.<span class="hljs-title function_">setRequestHeader</span>(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1laWQiOiIxZTIxOGY4My1iZjE3LTRhY2YtODhmOS1iOTQ3NjhjOWUwMGMiLCJuYW1lIjoiYWRtaW5AbWluaS1zb2Z0d2FyZS5naXRodWIuaW8iLCJyb2xlIjoibWluaWF1dGgtYWRtaW4iLCJzdWIiOiJhZG1pbkBtaW5pLXNvZnR3YXJlLmdpdGh1Yi5pbyIsIm5iZiI6MTcxODIwNDg5NSwiZXhwIjoxNzE4MjA1Nzk1LCJpYXQiOjE3MTgyMDQ4OTUsImlzcyI6Ik1pbmlBdXRoIn0._-DQ_rcbeju8_nrK2lD5we0rre04_xdDZNF6NhM0Rg0"</span>);
xhr.<span class="hljs-title function_">send</span>();
</code></pre>
<h4>Definir Tempo de Expiração</h4>
<pre><code class="language-c# hljs language-c">options.TokenExpiresIn = <span class="hljs-number">30</span> * <span class="hljs-number">60</span>; 
</code></pre>
<p>A unidade é em segundos, com configuração padrão de 30 minutos. Além disso, observe que o .NET JWT ClockSkew em JwtBearerOptions está pré-configurado para adicionar mais 5 minutos <a href="https://stackoverflow.com/questions/43045035/jwt-token-authentication-expired-tokens-still-working-net-core-web-api">motivo</a>.</p>
<h4>API de Refresh Token (JWT)</h4>
<p>API : <code>/MiniAuth/refreshToken</code><br>Body:</p>
<pre><code class="language-json hljs"><span class="hljs-punctuation">{</span>
   <span class="hljs-attr">"refreshToken"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxZTIxOGY4My1iZjE3LTRhY2YtODhmOS1iOTQ3NjhjOWUwMGMiLCJuYmYiOjE3MTg1MjIxOTEsImV4cCI6MTcxODUyMzk5MSwiaWF0IjoxNzE4NTIyMTkxLCJpc3MiOiJNaW5pQXV0aCJ9.HYBWrM2suDiM4OG0FSlXhNgktZIG9l3ufmIAnwZiIoU"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>Header:</p>
<pre><code class="hljs language-makefile"><span class="hljs-section">Authorization:Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiYWRtaW5AbWluaS1zb2Z0d2FyZS5naXRodWIuaW8iLCJyb2xlIjoibWluaWF1dGgtYWRtaW4iLCJzdWIiOiIxZTIxOGY4My1iZjE3LTRhY2YtODhmOS1iOTQ3NjhjOWUwMGMiLCJuYmYiOjE3MTg1MjIxOTEsImV4cCI6MTcxODUyNTc5MSwiaWF0IjoxNzE4NTIyMTkxLCJpc3MiOiJNaW5pQXV0aCJ9.rgAgsziAdLqOC9NYra-M9WQl8BJ99sRdfzRKNkMz9dk</span>
</code></pre>
<p>O tempo de expiração é definido como <code>MiniAuthOptions.TokenExpiresIn / 2</code>, com padrão de 30 minutos.</p>
<h3>Configurações, Opções, Personalização</h3>
<h4>Modo Padrão</h4>
<ul>
<li>O modo padrão do MiniAuth é o gerenciamento centralizado de usuários por administradores de TI. Operações como registro de usuários e redefinição de senha exigem uma conta de administrador com o papel pré-definido = miniauth-admin.</li>
</ul>
<h4>Desabilitar Login MiniAuth</h4>
<p>Se você deseja usar apenas sua própria lógica de login, páginas e APIs, pode especificar o caminho de login e desabilitar o login do MiniAuth.</p>
<pre><code class="language-C# hljs language-C"><span class="hljs-comment">// Coloque antes do registro do serviço </span>
builder.Services.AddMiniAuth(options: (options) =&gt;
{
    options.LoginPath = <span class="hljs-string">"/Identity/Account/Login"</span>;
    options.DisableMiniAuthLogin = <span class="hljs-literal">true</span>;
});
</code></pre>
<h4>Personalizar a String de Conexão SQLite Padrão</h4>
<pre><code class="language-C# hljs language-C">builder.Services.AddMiniAuth(options: (options) =&gt;
{
    options.SqliteConnectionString = <span class="hljs-string">"Data Source=miniauth_identity.db"</span>;
});
</code></pre>
<h3>Banco de Dados, Usuários e Papéis Personalizados</h3>
<p>O MiniAuth foi projetado para funcionar perfeitamente com SQLite EF Core, IdentityUser e IdentityRole por padrão. Se precisar mudar, especifique diferentes bancos de dados e suas próprias classes de usuário e papel usando genéricos em <code>app.UseMiniAuth</code>.</p>
<pre><code class="language-C# hljs language-C">app.UseMiniAuth&lt;YourDbContext, YourIdentityUser, YourIdentityRole&gt;();
</code></pre>
<h3>Login, Autenticação de Usuário</h3>
<p>Para non-ApiController, o redirecionamento de login padrão é para a página login.html (determinado verificando se Headers["X-Requested-With"] == "XMLHttpRequest" ou pela presença do ApiControllerAttribute).<br>Controllers marcados como ApiController não redirecionam para uma página de login por padrão; em vez disso, retornam um código de status 401.</p>
<h3>Frontend Personalizado</h3>
<ul>
<li>O frontend do painel de administração está localizado em <code>/src/Frontend_Identity</code> e utiliza principalmente Vue3 + Vite. Executar <code>npm run build</code> atualizará a interface do MiniAuth.</li>
<li>Se você não quiser usar a página de login padrão do MiniAuth, o MVC permite utilizar o Login.cshtml gerado pelo scaffold do identity ou modificar os arquivos login.html, js e css do frontend do MiniAuth.</li>
</ul>
<h3>Prefixo de Rota Personalizado</h3>
<pre><code class="hljs language-javascript">builder.<span class="hljs-property">Services</span>.<span class="hljs-title class_">AddMiniAuth</span>(<span class="hljs-attr">options</span>: <span class="hljs-function">(<span class="hljs-params">options</span>) =&gt;</span>
{
    options.<span class="hljs-property">RoutePrefix</span> = <span class="hljs-string">"YourName"</span>;
});
</code></pre>
<p>O RoutePrefix padrão é <code>MiniAuth</code>.</p>
<h3>API de Login (JWT)</h3>
<p>API: <code>/MiniAuth/login</code></p>
<p>Corpo:</p>
<pre><code class="language-json hljs"><span class="hljs-punctuation">{</span>
   <span class="hljs-attr">"username"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"admin@mini-software.github.io"</span><span class="hljs-punctuation">,</span>
   <span class="hljs-attr">"password"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"E7c4f679-f379-42bf-b547-684d456bc37f"</span><span class="hljs-punctuation">,</span>
   <span class="hljs-attr">"remember"</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">false</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>Resposta: </p>
<pre><code class="language-json hljs"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"ok"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"tokenType"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Bearer"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"accessToken"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiYWRtaW5AbWluaS1zb2Z0d2FyZS5naXRodWIuaW8iLCJyb2xlIjoibWluaWF1dGgtYWRtaW4iLCJzdWIiOiIxZTIxOGY4My1iZjE3LTRhY2YtODhmOS1iOTQ3NjhjOWUwMGMiLCJuYmYiOjE3MTg1MjIxOTEsImV4cCI6MTcxODUyNTc5MSwiaWF0IjoxNzE4NTIyMTkxLCJpc3MiOiJNaW5pQXV0aCJ9.rgAgsziAdLqOC9NYra-M9WQl8BJ99sRdfzRKNkMz9dk"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"expiresIn"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3600</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"refreshToken"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxZTIxOGY4My1iZjE3LTRhY2YtODhmOS1iOTQ3NjhjOWUwMGMiLCJuYmYiOjE3MTg1MjIxOTEsImV4cCI6MTcxODUyMzk5MSwiaWF0IjoxNzE4NTIyMTkxLCJpc3MiOiJNaW5pQXV0aCJ9.HYBWrM2suDiM4OG0FSlXhNgktZIG9l3ufmIAnwZiIoU"</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3>Registro</h3>
<p>Por favor, utilize a API e as páginas de registro integradas fornecidas pelo ASP.NET Core Identity.</p>
<h3>Esqueci a Senha</h3>
<p>Por favor, utilize a API e as páginas de recuperação de senha integradas fornecidas pelo ASP.NET Core Identity.</p>
<h3>Obter Informações do Usuário</h3>
<p>Por favor, utilize as APIs e páginas integradas fornecidas pelo ASP.NET Core Identity para recuperar informações do usuário. Observe que pode ser necessário implementar lógica ou endpoints adicionais para expor os dados necessários do usuário, dependendo das necessidades específicas da sua aplicação. O ASP.NET Core Identity fornece uma estrutura robusta para gerenciamento de informações do usuário, incluindo dados de perfil, papéis e claims.</p>
<h3>Observações</h3>
<h4>Atenção à Ordem</h4>
<p>Por favor, coloque o UseMiniAuth após a geração das rotas, caso contrário, o sistema não poderá obter dados de roteamento para verificações de permissão, conforme segue:</p>
<pre><code class="language-c# hljs language-c">app.UseRouting();
app.UseMiniAuth();
</code></pre>
<h4>Atenção: Adicione Regras de Papel</h4>
<p>Por favor, adicione <code>AddRoles&lt;IdentityRole&gt;()</code>, caso contrário <code>[Authorize(Roles = "permission")]</code> não terá efeito.</p>
<pre><code class="language-C# hljs language-C">builder.Services.AddDefaultIdentity&lt;IdentityUser&gt;(options =&gt; options.SignIn.RequireConfirmedAccount = <span class="hljs-literal">true</span>)
    .AddRoles&lt;IdentityRole&gt;() <span class="hljs-comment">// ❗❗❗ </span>
    .AddEntityFrameworkStores&lt;ApplicationDbContext&gt;();
</code></pre>
<h3>Integrando MiniAuth em um Projeto Identity Existente com Lógica Personalizada</h3>
<p>Desabilite o autoUse do AddMiniAuth e coloque o UseMiniAuth após sua própria autenticação, substituindo os parâmetros genéricos pelo seu IdentityDBContext, usuário e autenticação de permissão. Veja um exemplo:</p>
<pre><code class="language-csharp hljs">        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
        {
            <span class="hljs-keyword">var</span> builder = WebApplication.CreateBuilder(args);

            <span class="hljs-keyword">var</span> connectionString = builder.Configuration.GetConnectionString(<span class="hljs-string">"DefaultConnection"</span>) ?? <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> InvalidOperationException(<span class="hljs-string">"Connection string 'DefaultConnection' not found."</span>);
            builder.Services.AddDbContext&lt;ApplicationDbContext&gt;(options =&gt;
                options.UseSqlServer(connectionString));
            builder.Services.AddDatabaseDeveloperPageExceptionFilter();

            builder.Services.AddDefaultIdentity&lt;IdentityUser&gt;(options =&gt; options.SignIn.RequireConfirmedAccount = <span class="hljs-literal">true</span>)
                .AddRoles&lt;IdentityRole&gt;()
                .AddEntityFrameworkStores&lt;ApplicationDbContext&gt;();

            builder.Services.AddControllersWithViews();

            builder.Services.AddMiniAuth(autoUse: <span class="hljs-literal">false</span>); <span class="hljs-comment">// &lt;= ❗❗❗</span>


            <span class="hljs-keyword">var</span> app = builder.Build();

            app.UseMiniAuth&lt;ApplicationDbContext, IdentityUser, IdentityRole&gt;();  <span class="hljs-comment">// &lt;= ❗❗❗ </span>
            app.MapControllerRoute(
                name: <span class="hljs-string">"default"</span>,
                pattern: <span class="hljs-string">"{controller=Home}/{action=Index}/{id?}"</span>);
            app.MapRazorPages();

            app.Run();
        }
</code></pre>
<p>Isso permite alternar entre o uso dos seus próprios usuários, papéis, banco de dados e lógica do Identity.</p>
<h4>Sistemas Distribuídos</h4>
<ul>
<li>Para fontes de banco de dados, considere a troca para bancos como SQL Server, MySQL, PostgreSQL, etc.</li>
<li>Recomenda-se trocar para métodos de autenticação como JWT para melhor integração em ambientes distribuídos.</li>
</ul>
<h3>Notas de Lançamento</h3>
<p>Consulte as <a href="https://raw.githubusercontent.com/mini-software/MiniAuth/main/releases">Notas de Lançamento</a> para atualizações.</p>
<h3>TODO</h3>
<p>Link: <a href="https://github.com/orgs/mini-software/projects/7/views/1">Projeto MiniAuth.Identify</a></p>
<pre><code class="hljs language-yaml">

<span class="hljs-meta">---

</span>
<span class="hljs-string">Tranlated</span> <span class="hljs-string">By</span> [<span class="hljs-string">Open</span> <span class="hljs-string">Ai</span> <span class="hljs-string">Tx</span>]<span class="hljs-string">(https://github.com/OpenAiTx/OpenAiTx)</span> <span class="hljs-string">|</span> <span class="hljs-attr">Last indexed:</span> <span class="hljs-number">2025-06-11</span>


<span class="hljs-meta">---
</span></code></pre>
</div>
    </div>

    <footer class="footer">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank">Open AI Tx</a>
    </footer>
    <!-- Default Statcounter code for openaitx
https://openaitx.github.io/ -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async=""></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>
    <!-- End of Statcounter Code -->
    <script src="view.js"></script>


</body></html>