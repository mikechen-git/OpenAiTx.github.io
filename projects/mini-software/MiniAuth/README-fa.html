<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiniAuth - mini-software/MiniAuth</title>
    <meta name="title" content="MiniAuth - mini-software/MiniAuth">
    <meta name="description" content="mini-software/MiniAuth - GitHub repository fa documentation and informationEnglish | 简体中文 | 繁體中文 | 日本語 | 한국어 | Español ستاره Star، حمایت مالی، پیشنهاد شما می‌تواند MiniAuth را بهتر کند مقدمه با &quot;یک خط کد&quot;، مدیریت کاربران/نقش‌های هویت asp.net core را به پروژه‌های جدید/قدیمی خود اضافه کنید امکانات سازگاری: پشتیبانی از هویت .NET مبتنی بر JWT، کوکی، نشست و غیره ساده: طراحی plug-and-play، پشتیبانی از API، SPA، MVC، Razor Page و غیره پشتیبانی از چند پایگاه داده: پشتیبانی از Oracle، SQL Server، MySQL و غیره با EF Core غیرتهاجمی: بدون تأثیر بر پایگاه داده یا ساختار پروژه‌های موجود چندسکویی: پشتیبانی از محیط‌های Linux و macOS نصب پکیج را از NuGet نصب کنید شروع سریع در Startup تنها یک خط کد services.AddMiniAuth() اضافه کنید و پروژه خود را اجرا نمایید. مثال: public class Program { public static void Main(string[] args) { var builder = WebApplication.CreateBuilder(args); builder.Services.AddMiniAuth(); // &lt;= ❗❗❗ var app = builder.Build(); app.Run(); } } حساب کاربری پیش‌فرض...">
    <meta name="keywords" content="mini-software, MiniAuth, GitHub, repository, fa documentation">
    <meta name="author" content="Open AI Tx">
    <meta name="robots" content="index, follow">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://openaitx.github.io/projects/mini-software/MiniAuth/README-fa.html">
    <meta property="og:title" content="MiniAuth - mini-software/MiniAuth">
    <meta property="og:description" content="mini-software/MiniAuth - GitHub repository fa documentation and information">
    <meta property="og:image" content="https://openaitx.github.io/logo_crop.png">
    <link rel="icon" type="image/jpeg" href="/icon.jpg">
    <link rel="apple-touch-icon" href="/icon.jpg">
    <script src="/js/marked.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/css/github.min.css?v=20250613">
    <script src="/js/highlight.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/view.css?v=20250613">
    <style>
        body { display: flex; flex-direction: column; min-height: 100vh; }
        .main-container { margin: 0 auto; width: 100%; max-width: 980px; padding: 0 20px; }
        @media (max-width: 768px) { .main-container { padding: 0 15px; } }
        .markdown-body img { max-width: 100%; height: auto; }
        .header { text-align: center; margin-bottom: 30px; padding: 20px; background-color: #f6f8fa; border-bottom: 1px solid #e1e4e8; position: relative; }
        .header .links { margin-top: 10px; font-size: 16px; }
        .header .links a { color: #0366d6; text-decoration: none; margin-left: 5px; }
        .header .links a:hover { text-decoration: underline; }
        .language-badges { margin-top: 15px; text-align: center; }
        .language-badges a { display: inline-block; margin: 2px; text-decoration: none; }
        .language-badges img { height: 20px; border-radius: 3px; }
        .language-badges a:hover img { opacity: 0.8; }
    </style>
</head>
<body>
    <div class="header">
        <div class="links">
            GitHub Repository: <a href="https://github.com/mini-software/MiniAuth" id="githubRepoLink" target="_blank">mini-software/MiniAuth</a>
<br>
<h1 style="display: none;">English | 简体中文 | 繁體中文 | 日本語 | 한국어 | Español ستاره Star، حمایت مالی، پیشنهاد شما می‌تواند MiniAuth را بهتر کند مقدمه با &quot;یک خط کد&quot;، مدیریت کاربران/نقش‌های هویت asp.net core را به پروژه‌های جدید/قدیمی خود اضافه کنید امکانات سازگاری: پشتیبانی از هویت .NET مبتنی بر JWT، کوکی، نشست و غیره ساده: طراحی plug-and-play، پشتیبانی از API، SPA، MVC، Razor Page و غیره پشتیبانی از چند پایگاه داده: پشتیبانی از Oracle، SQL Server، MySQL و غیره با EF Core غیرتهاجمی: بدون تأثیر بر پایگاه داده یا ساختار پروژه‌های موجود چندسکویی: پشتیبانی از محیط‌های Linux و macOS نصب پکیج را از NuGet نصب کنید شروع سریع در Startup تنها یک خط کد services.AddMiniAuth() اضافه کنید و پروژه خود را اجرا نمایید. مثال: public class Program { public static void Main(string[] args) { var builder = WebApplication.CreateBuilder(args); builder.Services.AddMiniAuth(); // &lt;= ❗❗❗ var app = builder.Build(); app.Run(); } } حساب کاربری پیش‌فرض...</h1>
        </div>
        <div class="language-badges" id="languageBadges">
            <!-- You can generate language badges here if needed -->
        </div>
    </div>
    <div class="main-container">
        <div class="markdown-body" id="content">
            <div align="center">
<p><a href="https://www.nuget.org/packages/MiniAuth"><img src="https://img.shields.io/nuget/v/MiniAuth.svg" alt="NuGet"></a>  <a href="https://www.nuget.org/packages/MiniAuth"><img src="https://img.shields.io/nuget/dt/MiniAuth.svg" alt=""></a>  
<a href="https://gitee.com/shps951023/MiniAuth"><img src="https://gitee.com/shps951023/MiniAuth/badge/star.svg" alt="star"></a> <a href="https://github.com/Mini-Software/MiniAuth" rel="nofollow"><img src="https://img.shields.io/github/stars/Mini-Software/MiniAuth?logo=github" alt="GitHub stars"></a> <a href="https://www.nuget.org/packages/MiniAuth"><img src="https://img.shields.io/badge/.NET-%3E%3D%206.0-red.svg" alt="version"></a>
</p>
</div>
<hr />
<div align="center">
<p><strong>
    <a href="README.md">English</a> | <a href="README.zh-CN.md">简体中文</a> | <a href="README.zh-Hant.md">繁體中文</a> | <a href="README.ja.md">日本語</a> | <a href="README.ko.md">한국어</a> | <a href="README.es.md">Español</a>  
</strong></p>
</div>
<hr />
<div align="center">
 ستاره <a href="https://github.com/mini-software/miniauth">Star</a>، <a href="https://miniexcel.github.io/">حمایت مالی</a>، <a href="https://www.linkedin.com/in/itweihan/">پیشنهاد</a> شما می‌تواند MiniAuth را بهتر کند 
</div>
<h3>مقدمه</h3>
<p>با &quot;یک خط کد&quot;، مدیریت کاربران/نقش‌های هویت asp.net core را به پروژه‌های جدید/قدیمی خود اضافه کنید</p>
<table>
    <tr>
        <td><img src="https://github.com/mini-software/MiniExcel/assets/12729184/d2aec694-158d-4ebc-bd8b-0e9ae1f855ac" alt="Image 1"></td>
        <td><img src="https://github.com/mini-software/MiniAuth/assets/12729184/2f791e25-9158-495e-9383-4fbedf9b982b" alt="Image 2"></td>
    </tr>
    <tr>
        <td><img src="https://github.com/mini-software/MiniAuth/assets/12729184/03d72ed7-8fb9-465f-9093-24b00279eeb2" alt="Image 3"></td>
        <td><img src="https://github.com/mini-software/MiniAuth/assets/12729184/841df179-7e5f-481a-9039-46738b20aa2e" alt="Image 4"></td>
    </tr>
</table>
<h3>امکانات</h3>
<ul>
<li>سازگاری: پشتیبانی از هویت .NET مبتنی بر JWT، کوکی، نشست و غیره</li>
<li>ساده: طراحی plug-and-play، پشتیبانی از API، SPA، MVC، Razor Page و غیره</li>
<li>پشتیبانی از چند پایگاه داده: پشتیبانی از Oracle، SQL Server، MySQL و غیره با EF Core</li>
<li>غیرتهاجمی: بدون تأثیر بر پایگاه داده یا ساختار پروژه‌های موجود</li>
<li>چندسکویی: پشتیبانی از محیط‌های Linux و macOS</li>
</ul>
<h3>نصب</h3>
<p>پکیج را از NuGet نصب کنید</p>
<h3>شروع سریع</h3>
<p>در Startup تنها یک خط کد <code>services.AddMiniAuth()</code> اضافه کنید و پروژه خود را اجرا نمایید. مثال:</p>
<pre><code class="language-csharp">public class Program
{
    public static void Main(string[] args)
    {
        var builder = WebApplication.CreateBuilder(args);

        builder.Services.AddMiniAuth(); // &lt;= ❗❗❗

        var app = builder.Build();
        app.Run();
    }
}
</code></pre>
<p>حساب کاربری پیش‌فرض مدیریت، <code>admin@mini-software.github.io</code> با رمز عبور <code>E7c4f679-f379-42bf-b547-684d456bc37f</code> می‌باشد (حتماً رمز عبور را تغییر دهید). صفحه مدیریت از طریق <code>http(s)://yourhost/miniauth/index.html</code> در دسترس است.</p>
<p>برای کنترل سطح دسترسی، روی دسته‌ها یا متدهایی که نیاز به مدیریت مجوز یا نقش دارند، <code>[Authorize]</code> یا کنترل نقش <code>[Authorize(Roles = &quot;role&quot;)]</code> اضافه کنید؛ در صورت عدم ورود، وضعیت 401 بازگردانده می‌شود و در صورت عدم داشتن مجوز، وضعیت 403 برگردانده می‌شود.</p>
<h3>هویت کوکی MiniAuth</h3>
<p>MiniAuth به صورت پیش‌فرض بر پایه کوکی (Cookie Based identity) تنظیم شده است؛ لطفاً برای پروژه‌های جدا از فرانت و بک‌اند به JWT و غیره تغییر دهید.</p>
<h3>هویت JWT در MiniAuth</h3>
<p>تنظیم AuthenticationType به BearerJwt</p>
<pre><code class="language-C#">builder.Services.AddMiniAuth(options:(options) =&gt;
{
    options.AuthenticationType = MiniAuthOptions.AuthType.BearerJwt;
});
</code></pre>
<p>حتماً کلید امنیتی JWT جدید تعیین کنید، مانند:</p>
<pre><code class="language-C#">builder.Services.AddMiniAuth(options: (options) =&gt;
{
    options.JWTKey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(&quot;6ee3edbf-488e-4484-9c2c-e3ffa6dcbc09&quot;));
});
</code></pre>
<h4>دریافت توکن</h4>
<p>نمونه XHR جاوااسکریپت فرانت‌اند</p>
<pre><code class="language-javascript">var data = JSON.stringify({
  &quot;username&quot;: &quot;admin@mini-software.github.io&quot;,
  &quot;password&quot;: &quot;E7c4f679-f379-42bf-b547-684d456bc37f&quot;,
  &quot;remember&quot;: false
});
var xhr = new XMLHttpRequest();
xhr.withCredentials = true;
xhr.addEventListener(&quot;readystatechange&quot;, function() {
  if(this.readyState === 4) {
    console.log(this.responseText);
  }
});
xhr.open(&quot;POST&quot;, &quot;http://yourhost/miniauth/login&quot;);
xhr.setRequestHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);
xhr.send(data);
</code></pre>
<p>پاسخ</p>
<pre><code class="language-json">{
    &quot;ok&quot;: true,
    &quot;code&quot;: 200,
    &quot;message&quot;: null,
    &quot;data&quot;: {
        &quot;tokenType&quot;: &quot;Bearer&quot;,
        &quot;accessToken&quot;: &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1laWQiOiIxZTIxOGY4My1iZjE3LTRhY2YtODhmOS1iOTQ3NjhjOWUwMGMiLCJuYW1lIjoiYWRtaW5AbWluaS1zb2Z0d2FyZS5naXRodWIuaW8iLCJyb2xlIjoibWluaWF1dGgtYWRtaW4iLCJzdWIiOiJhZG1pbkBtaW5pLXNvZnR3YXJlLmdpdGh1Yi5pbyIsIm5iZiI6MTcxODIwNDg5NSwiZXhwIjoxNzE4MjA1Nzk1LCJpYXQiOjE3MTgyMDQ4OTUsImlzcyI6Ik1pbmlBdXRoIn0._-DQ_rcbeju8_nrK2lD5we0rre04_xdDZNF6NhM0Rg0&quot;,
        &quot;expiresIn&quot;: 900
    }
}
</code></pre>
<p><code>accessToken</code> را در localstorage یا کوکی ذخیره کنید. هنگام فراخوانی API دارای [Authorize]، در هدر درخواست مقدار <code>Authorization</code> را به صورت <code>Bearer + فاصله + accessToken</code> قرار دهید؛ سیستم به صورت خودکار آن را اعتبارسنجی می‌کند.</p>
<p>نمونه:</p>
<pre><code class="language-js">var xhr = new XMLHttpRequest();
xhr.withCredentials = true;
xhr.addEventListener(&quot;readystatechange&quot;, function() {
  if(this.readyState === 4) {
    console.log(this.responseText);
  }
});
xhr.open(&quot;GET&quot;, &quot;http://yourhost:5014/your/api&quot;);
xhr.setRequestHeader(&quot;Authorization&quot;, &quot;Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1laWQiOiIxZTIxOGY4My1iZjE3LTRhY2YtODhmOS1iOTQ3NjhjOWUwMGMiLCJuYW1lIjoiYWRtaW5AbWluaS1zb2Z0d2FyZS5naXRodWIuaW8iLCJyb2xlIjoibWluaWF1dGgtYWRtaW4iLCJzdWIiOiJhZG1pbkBtaW5pLXNvZnR3YXJlLmdpdGh1Yi5pbyIsIm5iZiI6MTcxODIwNDg5NSwiZXhwIjoxNzE4MjA1Nzk1LCJpYXQiOjE3MTgyMDQ4OTUsImlzcyI6Ik1pbmlBdXRoIn0._-DQ_rcbeju8_nrK2lD5we0rre04_xdDZNF6NhM0Rg0&quot;);
xhr.send();
</code></pre>
<h4>تنظیم زمان انقضا</h4>
<pre><code class="language-c#">options.TokenExpiresIn = 30 * 60; 
</code></pre>
<p>واحد زمان بر حسب ثانیه است و مقدار پیش‌فرض ۳۰ دقیقه می‌باشد. همچنین توجه داشته باشید که .NET JWT ClockSkew در JwtBearerOptions به طور پیش‌فرض ۵ دقیقه به زمان اضافه می‌کند <a href="https://stackoverflow.com/questions/43045035/jwt-token-authentication-expired-tokens-still-working-net-core-web-api">دلیل</a>.</p>
<h4>API رفرش توکن (JWT)</h4>
<p>API : <code>/MiniAuth/refreshToken</code>
بدنه:</p>
<pre><code class="language-json">{
   &quot;refreshToken&quot;:&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxZTIxOGY4My1iZjE3LTRhY2YtODhmOS1iOTQ3NjhjOWUwMGMiLCJuYmYiOjE3MTg1MjIxOTEsImV4cCI6MTcxODUyMzk5MSwiaWF0IjoxNzE4NTIyMTkxLCJpc3MiOiJNaW5pQXV0aCJ9.HYBWrM2suDiM4OG0FSlXhNgktZIG9l3ufmIAnwZiIoU&quot;
}
</code></pre>
<p>هدر:</p>
<pre><code>Authorization:Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiYWRtaW5AbWluaS1zb2Z0d2FyZS5naXRodWIuaW8iLCJyb2xlIjoibWluaWF1dGgtYWRtaW4iLCJzdWIiOiIxZTIxOGY4My1iZjE3LTRhY2YtODhmOS1iOTQ3NjhjOWUwMGMiLCJuYmYiOjE3MTg1MjIxOTEsImV4cCI6MTcxODUyNTc5MSwiaWF0IjoxNzE4NTIyMTkxLCJpc3MiOiJNaW5pQXV0aCJ9.rgAgsziAdLqOC9NYra-M9WQl8BJ99sRdfzRKNkMz9dk
</code></pre>
<p>زمان انقضا به صورت <code>MiniAuthOptions.TokenExpiresIn / 2</code> تعیین می‌شود که به طور پیش‌فرض ۳۰ دقیقه است.</p>
<h3>تنظیمات، گزینه‌ها و سفارشی‌سازی</h3>
<h4>حالت پیش‌فرض</h4>
<ul>
<li>حالت پیش‌فرض MiniAuth مدیریت متمرکز کاربران توسط مدیر IT است. عملیات‌هایی مانند ثبت‌نام کاربر و بازنشانی رمز عبور نیازمند حساب کاربری با نقش از پیش تعریف شده = miniauth-admin می‌باشد.</li>
</ul>
<h4>غیرفعال کردن ورود MiniAuth</h4>
<p>اگر فقط قصد دارید از منطق ورود، صفحات و APIهای اختصاصی خود استفاده کنید، می‌توانید مسیر ورود را مشخص کرده و سوییچ ورود MiniAuth را غیرفعال نمایید.</p>
<pre><code class="language-C#">// قبل از ثبت سرویس قرار دهید
builder.Services.AddMiniAuth(options: (options) =&gt;
{
    options.LoginPath = &quot;/Identity/Account/Login&quot;;
    options.DisableMiniAuthLogin = true;
});
</code></pre>
<h4>شخصی‌سازی رشته اتصال پیش‌فرض SQLite</h4>
<pre><code class="language-C#">builder.Services.AddMiniAuth(options: (options) =&gt;
{
    options.SqliteConnectionString = &quot;Data Source=miniauth_identity.db&quot;;
});
</code></pre>
<h3>پایگاه داده سفارشی، کاربران و نقش‌ها</h3>
<p>MiniAuth به طور پیش‌فرض برای کار با SQLite EF Core، IdentityUser و IdentityRole طراحی شده است. اگر نیاز به تغییر دارید، لطفاً پایگاه داده‌های مختلف و کلاس‌های کاربر و نقش خود را با استفاده از جنریک‌ها در <code>app.UseMiniAuth</code> مشخص کنید.</p>
<pre><code class="language-C#">app.UseMiniAuth&lt;YourDbContext, YourIdentityUser, YourIdentityRole&gt;();
</code></pre>
<h3>ورود، احراز هویت کاربر</h3>
<p>برای کنترلرهایی که ApiController نیستند، هدایت ورود پیش‌فرض به صفحه login.html است (با بررسی Headers[&quot;X-Requested-With&quot;] == &quot;XMLHttpRequest&quot; یا وجود ApiControllerAttribute تعیین می‌شود).
کنترلرهایی که با ApiController علامت‌گذاری شده‌اند، به طور پیش‌فرض به صفحه ورود هدایت نمی‌شوند؛ بلکه کد وضعیت 401 را باز می‌گردانند.</p>
<h3>رابط کاربری سفارشی</h3>
<ul>
<li>رابط کاربری داشبورد مدیریت در مسیر <code>/src/Frontend_Identity</code> قرار دارد و عمدتاً از Vue3 + Vite استفاده می‌کند. اجرای <code>npm run build</code> رابط کاربری miniauth را به‌روزرسانی می‌کند.</li>
<li>اگر نمی‌خواهید از صفحه ورود پیش‌فرض miniauth استفاده کنید، MVC به شما اجازه می‌دهد از Login.cshtml اسکفلد شده که توسط identity ارائه شده استفاده کنید یا فایل‌های login.html، js و css را در رابط کاربری miniauth ویرایش کنید.</li>
</ul>
<h3>پیشوند مسیر سفارشی</h3>
<pre><code>builder.Services.AddMiniAuth(options: (options) =&gt;
{
    options.RoutePrefix = &quot;YourName&quot;;
});
</code></pre>
<p>RoutePrefix پیش‌فرض <code>MiniAuth</code> است.</p>
<h3>API ورود (JWT)</h3>
<p>آدرس API: <code>/MiniAuth/login</code></p>
<p>بدنه:</p>
<pre><code class="language-json">{
   &quot;username&quot;:&quot;admin@mini-software.github.io&quot;,
   &quot;password&quot;:&quot;E7c4f679-f379-42bf-b547-684d456bc37f&quot;,
   &quot;remember&quot;:false
}
</code></pre>
<p>پاسخ:</p>
<pre><code class="language-json">{
    &quot;ok&quot;: true,
    &quot;code&quot;: 200,
    &quot;message&quot;: null,
    &quot;data&quot;: {
        &quot;tokenType&quot;: &quot;Bearer&quot;,
        &quot;accessToken&quot;: &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiYWRtaW5AbWluaS1zb2Z0d2FyZS5naXRodWIuaW8iLCJyb2xlIjoibWluaWF1dGgtYWRtaW4iLCJzdWIiOiIxZTIxOGY4My1iZjE3LTRhY2YtODhmOS1iOTQ3NjhjOWUwMGMiLCJuYmYiOjE3MTg1MjIxOTEsImV4cCI6MTcxODUyNTc5MSwiaWF0IjoxNzE4NTIyMTkxLCJpc3MiOiJNaW5pQXV0aCJ9.rgAgsziAdLqOC9NYra-M9WQl8BJ99sRdfzRKNkMz9dk&quot;,
        &quot;expiresIn&quot;: 3600,
        &quot;refreshToken&quot;: &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxZTIxOGY4My1iZjE3LTRhY2YtODhmOS1iOTQ3NjhjOWUwMGMiLCJuYmYiOjE3MTg1MjIxOTEsImV4cCI6MTcxODUyMzk5MSwiaWF0IjoxNzE4NTIyMTkxLCJpc3MiOiJNaW5pQXV0aCJ9.HYBWrM2suDiM4OG0FSlXhNgktZIG9l3ufmIAnwZiIoU&quot;
    }
}
</code></pre>
<h3>ثبت‌نام</h3>
<p>لطفاً از API و صفحات ثبت‌نام داخلی ارائه شده توسط ASP.NET Core Identity استفاده کنید.</p>
<h3>فراموشی رمز عبور</h3>
<p>لطفاً از API و صفحات فراموشی رمز عبور داخلی ارائه شده توسط ASP.NET Core Identity استفاده کنید.</p>
<h3>دریافت اطلاعات کاربر</h3>
<p>لطفاً برای دریافت اطلاعات کاربر از API‌ها و صفحات داخلی ارائه شده توسط ASP.NET Core Identity استفاده نمایید. توجه داشته باشید که ممکن است بسته به نیاز برنامه خود، نیاز به پیاده‌سازی منطق یا نقاط پایانی اضافی برای نمایش داده‌های مورد نیاز داشته باشید. ASP.NET Core Identity یک چارچوب قدرتمند برای مدیریت اطلاعات کاربر از جمله داده‌های پروفایل، نقش‌ها و claims فراهم می‌کند.</p>
<h3>نکات</h3>
<h4>توجه به ترتیب</h4>
<p>لطفاً UseMiniAuth را بعد از تولید مسیرها قرار دهید، در غیر این صورت سیستم نمی‌تواند داده‌های مسیر را برای بررسی دسترسی دریافت کند، مانند زیر:</p>
<pre><code class="language-c#">app.UseRouting();
app.UseMiniAuth();
</code></pre>
<h4>توجه: افزودن قوانین نقش</h4>
<p>لطفاً <code>AddRoles&lt;IdentityRole&gt;()</code> را اضافه کنید، در غیر این صورت <code>[Authorize(Roles = &quot;permission&quot;)]</code> اعمال نخواهد شد.</p>
<pre><code class="language-C#">builder.Services.AddDefaultIdentity&lt;IdentityUser&gt;(options =&gt; options.SignIn.RequireConfirmedAccount = true)
    .AddRoles&lt;IdentityRole&gt;() // ❗❗❗ 
    .AddEntityFrameworkStores&lt;ApplicationDbContext&gt;();
</code></pre>
<h3>یکپارچه‌سازی MiniAuth با پروژه Identity موجود با منطق سفارشی</h3>
<p>autoUse مربوط به AddMiniAuth را غیرفعال کنید و UseMiniAuth را بعد از احراز هویت خود قرار دهید و پارامترهای جنریک را با IdentityDBContext، کاربر و احراز هویت مجوز خود جایگزین کنید. یک مثال:</p>
<pre><code class="language-csharp">        public static void Main(string[] args)
        {
            var builder = WebApplication.CreateBuilder(args);

            var connectionString = builder.Configuration.GetConnectionString(&quot;DefaultConnection&quot;) ?? throw new InvalidOperationException(&quot;Connection string 'DefaultConnection' not found.&quot;);
            builder.Services.AddDbContext&lt;ApplicationDbContext&gt;(options =&gt;
                options.UseSqlServer(connectionString));
            builder.Services.AddDatabaseDeveloperPageExceptionFilter();

            builder.Services.AddDefaultIdentity&lt;IdentityUser&gt;(options =&gt; options.SignIn.RequireConfirmedAccount = true)
                .AddRoles&lt;IdentityRole&gt;()
                .AddEntityFrameworkStores&lt;ApplicationDbContext&gt;();

            builder.Services.AddControllersWithViews();

            builder.Services.AddMiniAuth(autoUse: false); // &lt;= ❗❗❗


            var app = builder.Build();

            app.UseMiniAuth&lt;ApplicationDbContext, IdentityUser, IdentityRole&gt;();  // &lt;= ❗❗❗ 
            app.MapControllerRoute(
                name: &quot;default&quot;,
                pattern: &quot;{controller=Home}/{action=Index}/{id?}&quot;);
            app.MapRazorPages();

            app.Run();
        }
</code></pre>
<p>این به شما امکان می‌دهد از کاربران، نقش‌ها، پایگاه داده و منطق Identity خود استفاده کنید.</p>
<h4>سیستم‌های توزیع‌شده</h4>
<ul>
<li>برای منابع پایگاه داده، استفاده از پایگاه داده‌هایی مانند SQL Server، MySQL، PostgreSQL و غیره را در نظر بگیرید.</li>
<li>توصیه می‌شود برای یکپارچگی بهتر در محیط توزیع‌شده، به روش‌های احراز هویت مانند JWT تغییر دهید.</li>
</ul>
<h3>یادداشت‌های انتشار</h3>
<p>برای به‌روزرسانی‌ها به <a href="releases">یادداشت‌های انتشار</a> مراجعه کنید.</p>
<h3>TODO</h3>
<p>لینک: <a href="https://github.com/orgs/mini-software/projects/7/views/1">پروژه MiniAuth.Identify</a></p>
<pre><code>

---


Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-06-11


---
</code></pre>

        </div>
    </div>
    <footer class="footer">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank">Open AI Tx</a>
    </footer>
    <!-- Statcounter and other scripts can be added here -->
</body>
</html>