<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sync-method-generator - zompinc/sync-method-generator</title>
    <meta name="title" content="sync-method-generator - zompinc/sync-method-generator">
    <meta name="description" content="zompinc/sync-method-generator - GitHub repository vi documentation and informationSync Method Generator Bộ sinh mã nguồn .NET source generator này tạo ra phương thức đồng bộ từ phương thức bất đồng bộ. Trường hợp sử dụng Một thư viện cung cấp...">
    <meta name="keywords" content="zompinc, sync-method-generator, GitHub, repository, vi documentation">
    <meta name="author" content="Open AI Tx">
    <meta name="robots" content="index, follow">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://openaitx.github.io/projects/zompinc/sync-method-generator/README-vi.html">
    <meta property="og:title" content="sync-method-generator - zompinc/sync-method-generator">
    <meta property="og:description" content="zompinc/sync-method-generator - GitHub repository vi documentation and information">
    <meta property="og:image" content="https://openaitx.github.io/logo_crop.png">
    <link rel="icon" type="image/jpeg" href="/icon.jpg">
    <link rel="apple-touch-icon" href="/icon.jpg">
    <script src="/js/marked.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/css/github.min.css?v=20250613">
    <script src="/js/highlight.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/view.css?v=20250613">
    <style>
        body { display: flex; flex-direction: column; min-height: 100vh; }
        .main-container { margin: 0 auto; width: 100%; max-width: 980px; padding: 0 20px; }
        @media (max-width: 768px) { .main-container { padding: 0 15px; } }
        .markdown-body img { max-width: 100%; height: auto; }
        .header { text-align: center; margin-bottom: 30px; padding: 20px; background-color: #f6f8fa; border-bottom: 1px solid #e1e4e8; position: relative; }
        .header .links { margin-top: 10px; font-size: 16px; }
        .header .links a { color: #0366d6; text-decoration: none; margin-left: 5px; }
        .header .links a:hover { text-decoration: underline; }
        .language-badges { margin-top: 15px; text-align: center; }
        .language-badges a { display: inline-block; margin: 2px; text-decoration: none; }
        .language-badges img { height: 20px; border-radius: 3px; }
        .language-badges a:hover img { opacity: 0.8; }
    </style>
</head>
<body>
    <div class="header">
        <div class="links">
            GitHub Repository: <a href="https://github.com/zompinc/sync-method-generator" id="githubRepoLink" target="_blank">zompinc/sync-method-generator</a>
<h1 style="display: none;">Sync Method Generator Bộ sinh mã nguồn .NET source generator này tạo ra phương thức đồng bộ từ phương thức bất đồng bộ. Trường hợp sử dụng Một thư viện cung cấp...</h1>
        </div>
        <div class="language-badges" id="languageBadges">
            <!-- You can generate language badges here if needed -->
        </div>
    </div>
    <div class="main-container">
        <div class="markdown-body" id="content">
            <h1>Sync Method Generator</h1>
<p><a href="https://github.com/zompinc/sync-method-generator/actions/workflows/build.yml"><img src="https://github.com/zompinc/sync-method-generator/actions/workflows/build.yml/badge.svg" alt="Build" /></a>
<img src="https://img.shields.io/badge/dotnet%20version-.NET%20Standard%202.0-blue" alt="Support .NET Standard 2.0" />
<a href="https://www.nuget.org/packages/Zomp.SyncMethodGenerator"><img src="https://img.shields.io/nuget/v/Zomp.SyncMethodGenerator" alt="Nuget" /></a>
<a href="https://codecov.io/gh/zompinc/sync-method-generator"><img src="https://codecov.io/gh/zompinc/sync-method-generator/branch/master/graph/badge.svg" alt="codecov" /></a></p>
<p>Bộ sinh mã nguồn <a href="https://learn.microsoft.com/en-us/dotnet/csharp/roslyn-sdk/source-generators-overview">.NET source generator</a> này tạo ra phương thức đồng bộ từ phương thức bất đồng bộ.</p>
<h2>Trường hợp sử dụng</h2>
<ul>
<li>Một thư viện cung cấp cả phiên bản đồng bộ và bất đồng bộ của một phương thức</li>
<li>Một ứng dụng cần xử lý hai loại dữ liệu theo cùng một cách:
<ul>
<li>Dữ liệu lớn từ I/O không thể lưu trữ vào bộ nhớ trước khi xử lý: Phương thức async gốc</li>
<li>Mẫu dữ liệu nhỏ trong bộ nhớ, thường là mẫu của dữ liệu lớn hơn: Phương thức sync được sinh ra</li>
</ul>
</li>
</ul>
<h2>Cách hoạt động</h2>
<h3>CreateSyncVersionAttribute</h3>
<p>Trang trí phương thức async của bạn với <code>CreateSyncVersionAttribute</code> trong class, struct hoặc record <code>partial</code> của bạn</p>
<pre><code class="language-cs">[Zomp.SyncMethodGenerator.CreateSyncVersion]
static async Task WriteAsync(ReadOnlyMemory&lt;byte&gt; buffer, Stream stream, 
CancellationToken ct)
    =&gt; await stream.WriteAsync(buffer, ct).ConfigureAwait(true);
</code></pre>
<p>Và nó sẽ sinh ra phiên bản đồng bộ của phương thức:</p>
<pre><code class="language-cs">static void Write(ReadOnlySpan&lt;byte&gt; buffer, Stream stream)
    =&gt; stream.Write(buffer);
</code></pre>
<p>Danh sách các thay đổi được áp dụng cho phương thức đồng bộ mới:</p>
<ul>
<li><p>Loại bỏ từ khóa async</p>
</li>
<li><p>Loại bỏ await khỏi các phương thức cũng như câu lệnh <code>foreach</code></p>
</li>
<li><p>Thay đổi kiểu dữ liệu</p>
<p>| Từ                                                                                                                                                                                                | Thành                                                                                                                                   |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| <a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task">Task</a>*                                                                                                                   | void                                                                                                                                 |
| <a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task-1">Task&lt;T&gt;</a>                                                                                                              | T                                                                                                                                    |
| <a href="https://learn.microsoft.com/en-us/dotnet/api/system.func-1">Func</a>&lt;Task&gt;                                                                                                                           | <a href="https://learn.microsoft.com/en-us/dotnet/api/system.action">Action</a>                                                                 |
| Func&lt;Task&lt;T&gt;&gt;                                                                                                                                                                                     | Func&lt;T&gt;                                                                                                                             |
| <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.iasyncenumerable-1">IAsyncEnumerable&lt;T&gt;</a>                                                                                  | <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.ienumerable-1">IEnumerable&lt;T&gt;</a>                             |
| <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.iasyncenumerator-1">IAsyncEnumerator&lt;T&gt;</a>                                                                                  | <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.ienumerator-1">IEnumerator&lt;T&gt;</a>                             |
| <a href="https://learn.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.configuredcancelableasyncenumerable-1.enumerator">ConfiguredCancelableAsyncEnumerable&lt;T&gt;.Enumerator</a>                 | <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.ienumerator-1">IEnumerator&lt;T&gt;</a>                             |
| <a href="https://learn.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.configuredcancelableasyncenumerable-1.getasyncenumerator">ConfiguredCancelableAsyncEnumerable&lt;T&gt;.GetAsyncEnumerator</a> | <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.ienumerable-1.getenumerator">IEnumerable&lt;T&gt;.GetEnumerator</a> |
| <a href="https://learn.microsoft.com/en-us/dotnet/api/system.memory-1">Memory&lt;T&gt;</a>                                                                                                                          | <a href="https://learn.microsoft.com/en-us/dotnet/api/system.span-1">Span&lt;T&gt;</a>                                                               |
| <a href="https://learn.microsoft.com/en-us/dotnet/api/system.readonlymemory-1">ReadOnlyMemory&lt;T&gt;</a>                                                                                                          | <a href="https://learn.microsoft.com/en-us/dotnet/api/system.readonlyspan-1">ReadOnlySpan&lt;T&gt;</a>                                               |</p>
</li>
<li><p>* <a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.valuetask">ValueTask</a>s được xử lý giống hệt như <a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task">Task</a>s</p>
</li>
<li><p>Loại bỏ tham số</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/api/system.iprogress-1">IProgress&lt;T&gt;</a></li>
</ul>
</li>
<li><p>Thay đổi lời gọi hàm</p>
<ul>
<li>Loại bỏ <code>ConfigureAwait</code> khỏi <a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.configureawait">Tasks</a> và <a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.taskasyncenumerableextensions.configureawait">Asynchronous Enumerations</a></li>
<li>Loại bỏ <code>WaitAsync</code> khỏi <a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.waitasync">Tasks</a></li>
<li>Loại bỏ <a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.taskasyncenumerableextensions.withcancellation">WithCancellation</a></li>
<li>Viết lại các lời gọi bất đồng bộ có hậu tố <code>Async</code> để gọi phiên bản đồng bộ (ví dụ: <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.iasyncenumerator-1.movenextasync">MoveNextAsync()</a> thành <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.ienumerator.movenext">MoveNext()</a>)</li>
<li>Loại bỏ các lời gọi bất đồng bộ không có hậu tố <code>Async</code></li>
<li>Loại bỏ tham số <a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></li>
<li>Loại bỏ lời gọi <a href="https://learn.microsoft.com/en-us/dotnet/api/system.iprogress-1.report">IProgress&lt;T&gt;.Report(T)</a></li>
<li>Loại bỏ thuộc tính <a href="https://learn.microsoft.com/en-us/dotnet/api/system.memory-1.span">Memory&lt;T&gt;.Span</a></li>
<li>Thay thế <code>await</code> <a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.fromresult">Task&lt;TResult&gt;.FromResult</a>(<code>value</code>) thành <code>value</code></li>
<li>Thay thế <code>await</code> <a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.delay">Task.Delay</a>(<code>value</code>) thành <a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.thread.sleep">Thread.Sleep</a>(<code>value</code>)</li>
<li>Thay đổi bất kỳ lời gọi nào trả về <a href="https://learn.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.configuredcancelableasyncenumerable-1">ConfiguredCancelableAsyncEnumerable&lt;T&gt;</a> thành <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.ienumerable.getenumerator">IEnumerable.GetEnumerator</a>()</li>
</ul>
</li>
<li><p>Loại bỏ <code>CreateSyncVersionAttribute</code></p>
</li>
<li><p>Cập nhật tài liệu XML</p>
</li>
</ul>
<h4>Thuộc tính</h4>
<h5>OmitNullableDirective</h5>
<p>Bộ sinh mã nguồn này phát hiện phiên bản ngôn ngữ trong quá trình biên dịch. Theo mặc định, nó sẽ sinh ra chỉ thị <code>#nullable enable</code> nếu và chỉ nếu phiên bản ngôn ngữ là 8 trở lên. Vì <a href="https://github.com/dotnet/roslyn/issues/49555">không thể</a> xác định một cách đáng tin cậy liệu nullable context đã được bật hay chưa, thuộc tính <code>OmitNullableDirective</code> được cung cấp để loại bỏ chỉ thị đó khỏi mã sinh ra.</p>
<pre><code class="language-cs">[Zomp.SyncMethodGenerator.CreateSyncVersion(OmitNullableDirective = true)]
public async Task MethodAsync()
{
    string f = null;
}
</code></pre>
<h3>Ký hiệu SYNC_ONLY</h3>
<p>Trong trường hợp có logic chỉ nên được thực thi trong phiên bản đồng bộ của phương thức, hãy bao nó trong chỉ thị <code>#if SYNC_ONLY</code>.</p>
<p><code>SYNC_ONLY</code> không được định nghĩa ở bất kỳ đâu. Bộ sinh mã nguồn sẽ quét các chỉ thị #if để tìm ký hiệu này.</p>
<p>Mã bên trong khối <code>SYNC_ONLY</code> sẽ được sao chép nguyên trạng. Trừ khi sử dụng global namespace trong dự án, đoạn mã này nên chứa đầy đủ namespace.</p>
<p>Cú pháp sau:</p>
<pre><code class="language-cs">[Zomp.SyncMethodGenerator.CreateSyncVersion]
public async Task WithSyncOnlyDirectiveAsync(CancellationToken ct)
{
#if SYNC_ONLY
    System.Console.Write(&quot;Sync&quot;);
#endif
    await Task.CompletedTask;
}
</code></pre>
<p>sẽ sinh ra:</p>
<pre><code class="language-cs">public void WithSyncOnlyDirective()
{
    System.Console.Write(&quot;Sync&quot;);
}
</code></pre>
<p>Nếu bạn chỉ muốn thực hiện trong phiên bản async gốc, đảo ngược điều kiện như sau: <code>#if !SYNC_ONLY</code>.</p>
<p>Lưu ý: <code>SYNC_ONLY</code> không được kết hợp với các ký hiệu khác trong biểu thức điều kiện và không được có chỉ thị <code>#elif</code>.</p>
<h2>Cài đặt</h2>
<p>Để thêm thư viện, sử dụng:</p>
<pre><code class="language-sh">dotnet add package Zomp.SyncMethodGenerator
</code></pre>
<h2>Phát triển</h2>
<h3>Dự án liên quan</h3>
<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=lsoft.SyncToAsyncExtension">SyncToAsyncExtension</a> - Cho phép chuyển đổi giữa các phiên bản sync và async của một phương thức. Rất hữu ích khi phát triển thư viện này.</li>
</ul>
<h3>Act</h3>
<p>Dự án này hoàn toàn tương thích với <a href="https://github.com/nektos/act">act</a>.</p>
<p>Ngoài các gói bắt buộc để chạy chính <code>act</code>, script GitHub Actions sẽ cài đặt mọi thứ còn thiếu, như node, yarn và dotnet. Trên nền tảng Windows, việc cài đặt phần mềm được thực hiện trực tiếp trên máy chủ do <a href="https://github.com/nektos/act/issues/1608">thiếu</a> hỗ trợ container.</p>
<p>Để build dự án bằng act, làm theo hướng dẫn sau:</p>
<h4>Windows</h4>
<p>Cài đặt <a href="https://chocolatey.org/install">chocolatey</a> nếu chưa có.</p>
<p>Cài đặt các gói sau nếu chưa có:</p>
<pre><code class="language-pwsh">choco install git -y
choco install act-cli -y
refreshenv
</code></pre>
<p>Trong thư mục dự án, chạy:</p>
<pre><code class="language-pwsh">act -P windows-latest=-self-hosted --artifact-server-path /tmp/artifacts
</code></pre>
<h4>Linux</h4>
<p>Cài đặt act theo <a href="https://lindevs.com/install-act-on-ubuntu">hướng dẫn này</a>.</p>
<p>Trong thư mục dự án, chạy:</p>
<pre><code class="language-pwsh">act --artifact-server-path /tmp/artifacts
</code></pre>
<hr />
<p>Tranlated By <a href="https://github.com/OpenAiTx/OpenAiTx">Open Ai Tx</a> | Last indexed: 2025-06-17</p>
<hr />

        </div>
    </div>
    <footer class="footer">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank">Open AI Tx</a>
    </footer>
    <!-- Statcounter and other scripts can be added here -->
</body>
</html>