<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sindresorhus/ky - ky</title>

    <!-- Primary Meta Tags -->
    <meta name="title" content="sindresorhus/ky - ky">
    <meta name="description" content="sindresorhus/ky - GitHub repository documentation and information">
    <meta name="keywords" content="sindresorhus, ky, GitHub, repository, documentation, ">
    <meta name="author" content="Open AI Tx">
    <meta name="robots" content="index, follow">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=en">
    <meta property="og:title" content="sindresorhus/ky - ky">
    <meta property="og:description" content="sindresorhus/ky - GitHub repository documentation and information">
    <meta property="og:image" content="https://openaitx.github.io/logo_crop.png">

    <!-- Favicon -->
    <link rel="icon" type="image/jpeg" href="icon.jpg">
    <link rel="apple-touch-icon" href="icon.jpg">

    <!-- Marked.js for Markdown rendering -->
    <script type="text/javascript" async="" src="https://www.statcounter.com/counter/recorder.js"></script><script src="js/marked.min.js?v=20250613"></script>
    <!-- Highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="css/github.min.css?v=20250613">
    <script src="js/highlight.min.js?v=20250613"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="view.css?v=20250613">
    <style>
        /* Layout */
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .main-container {
            margin: 0 auto;
            width: 100%;
            max-width: 980px;
            padding: 0 20px;
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 0 15px;
            }
        }

        /* Image size restrictions */
        .markdown-body img {
            max-width: 100%;
            height: auto;
        }

        /* Existing styles */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: #f6f8fa;
            border-bottom: 1px solid #e1e4e8;
            position: relative;
        }

        .back-button {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #0366d6;
            text-decoration: none;
            display: flex;
            align-items: center;
            font-size: 14px;
            padding: 5px 10px;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            background-color: #fff;
        }

        .back-button:hover {
            background-color: #f6f8fa;
            border-color: #0366d6;
        }

        .back-button::before {
            content: "←";
            margin-right: 5px;
            font-size: 16px;
        }

        .header .links {
            margin-top: 10px;
            font-size: 16px;
        }

        .header .links a {
            color: #0366d6;
            text-decoration: none;
            margin-left: 5px;
        }

        .header .links a:hover {
            text-decoration: underline;
        }
        
        /* Language badges styles */
        .language-badges {
            margin-top: 15px;
            text-align: center;
        }
        .language-badges a {
            display: inline-block;
            margin: 2px;
            text-decoration: none;
        }
        .language-badges img {
            height: 20px;
            border-radius: 3px;
        }
        .language-badges a:hover img {
            opacity: 0.8;
        }
    </style>
</head>

<body>
    <div class="header">
        <a href="javascript:history.back()" class="back-button">Back</a>
        <div class="links">
            GitHub Repository: <a href="https://github.com/sindresorhus/ky" id="githubRepoLink" target="_blank">sindresorhus/ky</a>
        </div>
        <div class="language-badges" id="languageBadges"><a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=en"><img src="https://img.shields.io/badge/EN-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=zh-CN"><img src="https://img.shields.io/badge/简中-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=zh-TW"><img src="https://img.shields.io/badge/繁中-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=ja"><img src="https://img.shields.io/badge/日本語-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=ko"><img src="https://img.shields.io/badge/한국어-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=th"><img src="https://img.shields.io/badge/ไทย-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=fr"><img src="https://img.shields.io/badge/Français-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=de"><img src="https://img.shields.io/badge/Deutsch-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=es"><img src="https://img.shields.io/badge/Español-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=it"><img src="https://img.shields.io/badge/Italiano-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=ru"><img src="https://img.shields.io/badge/Русский-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=pt"><img src="https://img.shields.io/badge/Português-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=nl"><img src="https://img.shields.io/badge/Nederlands-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=pl"><img src="https://img.shields.io/badge/Polski-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=ar"><img src="https://img.shields.io/badge/العربية-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=tr"><img src="https://img.shields.io/badge/Türkçe-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=vi"><img src="https://img.shields.io/badge/Tiếng Việt-white" alt="version"></a></div>
    </div>

    <div class="main-container">
        <div class="markdown-body" id="content"><div align="center">
	<br>
	<div>
		<img width="600" height="600" src="https://raw.githubusercontent.com/sindresorhus/ky/main/media/logo.svg" alt="ky">
	</div>
	<br>
	<br>
	<br>
</div>

<blockquote>
<p>Ky is a tiny and elegant HTTP client based on the <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch">Fetch API</a></p>
</blockquote>
<p><a href="https://codecov.io/gh/sindresorhus/ky"><img src="https://codecov.io/gh/sindresorhus/ky/branch/main/graph/badge.svg" alt="Coverage Status"></a><br><a href="https://bundlephobia.com/result?p=ky"><img src="https://badgen.net/bundlephobia/minzip/ky" alt=""></a></p>
<p>Ky targets <a href="#browser-support">modern browsers</a>, Node.js, Bun, and Deno.</p>
<p>It's just a tiny package with no dependencies.</p>
<h2>Benefits over plain <code>fetch</code></h2>
<ul>
<li>Simpler API</li>
<li>Method shortcuts (<code>ky.post()</code>)</li>
<li>Treats non-2xx status codes as errors (after redirects)</li>
<li>Retries failed requests</li>
<li>JSON option</li>
<li>Timeout support</li>
<li>URL prefix option</li>
<li>Instances with custom defaults</li>
<li>Hooks</li>
<li>TypeScript niceties (e.g. <code>.json()</code> supports generics and defaults to <code>unknown</code>, not <code>any</code>)</li>
</ul>
<h2>Install</h2>
<pre><code class="language-sh hljs language-bash">npm install ky
</code></pre>
<h6>CDN</h6>
<ul>
<li><a href="https://cdn.jsdelivr.net/npm/ky/+esm">jsdelivr</a></li>
<li><a href="https://unpkg.com/ky">unpkg</a></li>
<li><a href="https://esm.sh/ky">esm.sh</a></li>
</ul>
<h2>Usage</h2>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> ky.<span class="hljs-title function_">post</span>(<span class="hljs-string">'https://example.com'</span>, {<span class="hljs-attr">json</span>: {<span class="hljs-attr">foo</span>: <span class="hljs-literal">true</span>}}).<span class="hljs-title function_">json</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(json);
<span class="hljs-comment">//=&gt; {data: '🦄'}</span>
</code></pre>
<p>With plain <code>fetch</code>, it would be:</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HTTPError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Error</span> {}

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://example.com'</span>, {
	<span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
	<span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({<span class="hljs-attr">foo</span>: <span class="hljs-literal">true</span>}),
	<span class="hljs-attr">headers</span>: {
		<span class="hljs-string">'content-type'</span>: <span class="hljs-string">'application/json'</span>
	}
});

<span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
	<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HTTPError</span>(<span class="hljs-string">`Fetch error: <span class="hljs-subst">${response.statusText}</span>`</span>);
}

<span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(json);
<span class="hljs-comment">//=&gt; {data: '🦄'}</span>
</code></pre>
<p>If you are using <a href="https://github.com/denoland/deno">Deno</a>, import Ky from a URL. For example, using a CDN:</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'https://esm.sh/ky'</span>;
</code></pre>
<h2>API</h2>
<h3>ky(input, options?)</h3>
<p>The <code>input</code> and <code>options</code> are the same as <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch"><code>fetch</code></a>, with additional <code>options</code> available (see below).</p>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response"><code>Response</code> object</a> with <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#body"><code>Body</code> methods</a> added for convenience. So you can, for example, call <code>ky.get(input).json()</code> directly without having to await the <code>Response</code> first. When called like that, an appropriate <code>Accept</code> header will be set depending on the body method used. Unlike the <code>Body</code> methods of <code>window.Fetch</code>, these will throw an <code>HTTPError</code> if the response status is not in the range of <code>200...299</code>. Also, <code>.json()</code> will return an empty string if body is empty or the response status is <code>204</code> instead of throwing a parse error due to an empty body.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'/api/user'</span>).<span class="hljs-title function_">json</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user);
</code></pre>
<p>⌨️ <strong>TypeScript:</strong> Accepts an optional <a href="https://www.typescriptlang.org/docs/handbook/2/generics.html">type parameter</a>, which defaults to <a href="https://www.typescriptlang.org/docs/handbook/2/functions.html#unknown"><code>unknown</code></a>, and is passed through to the return type of <code>.json()</code>.</p>
<pre><code class="language-ts hljs language-typescript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-comment">// user1 is unknown</span>
<span class="hljs-keyword">const</span> user1 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'/api/users/1'</span>).<span class="hljs-title function_">json</span>();
<span class="hljs-comment">// user2 is a User</span>
<span class="hljs-keyword">const</span> user2 = <span class="hljs-keyword">await</span> ky&lt;<span class="hljs-title class_">User</span>&gt;(<span class="hljs-string">'/api/users/2'</span>).<span class="hljs-title function_">json</span>();
<span class="hljs-comment">// user3 is a User</span>
<span class="hljs-keyword">const</span> user3 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'/api/users/3'</span>).<span class="hljs-property">json</span>&lt;<span class="hljs-title class_">User</span>&gt;();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>([user1, user2, user3]);
</code></pre>
<h3>ky.get(input, options?)</h3>
<h3>ky.post(input, options?)</h3>
<h3>ky.put(input, options?)</h3>
<h3>ky.patch(input, options?)</h3>
<h3>ky.head(input, options?)</h3>
<h3>ky.delete(input, options?)</h3>
<p>Sets <code>options.method</code> to the method name and makes a request.</p>
<p>⌨️ <strong>TypeScript:</strong> Accepts an optional type parameter for use with JSON responses (see <a href="#kyinput-options"><code>ky()</code></a>).</p>
<h4>input</h4>
<p>Type: <code>string</code> | <code>URL</code> | <code>Request</code></p>
<p>Same as <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/Request#input"><code>fetch</code> input</a>.</p>
<p>When using a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request"><code>Request</code></a> instance as <code>input</code>, any URL altering options (such as <code>prefixUrl</code>) will be ignored.</p>
<h4>options</h4>
<p>Type: <code>object</code></p>
<p>Same as <a href="https://developer.mozilla.org/en-US/docs/Web/API/fetch#options"><code>fetch</code> options</a>, plus the following additional options:</p>
<h5>method</h5>
<p>Type: <code>string</code><br>Default: <code>'get'</code></p>
<p>HTTP method used to make the request.</p>
<p>Internally, the standard methods (<code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, <code>HEAD</code> and <code>DELETE</code>) are uppercased in order to avoid server errors due to case sensitivity.</p>
<h5>json</h5>
<p>Type: <code>object</code> and any other value accepted by <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify"><code>JSON.stringify()</code></a></p>
<p>Shortcut for sending JSON. Use this instead of the <code>body</code> option. Accepts any plain object or value, which will be <code>JSON.stringify()</code>'d and sent in the body with the correct header set.</p>
<h5>searchParams</h5>
<p>Type: <code>string | object&lt;string, string | number | boolean&gt; | Array&lt;Array&lt;string | number | boolean&gt;&gt; | URLSearchParams</code><br>Default: <code>''</code></p>
<p>Search parameters to include in the request URL. Setting this will override all existing search parameters in the input URL.</p>
<p>Accepts any value supported by <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/URLSearchParams"><code>URLSearchParams()</code></a>.</p>
<h5>prefixUrl</h5>
<p>Type: <code>string | URL</code></p>
<p>A prefix to prepend to the <code>input</code> URL when making the request. It can be any valid URL, either relative or absolute. A trailing slash <code>/</code> is optional and will be added automatically, if needed, when it is joined with <code>input</code>. Only takes effect when <code>input</code> is a string. The <code>input</code> argument cannot start with a slash <code>/</code> when using this option.</p>
<p>Useful when used with <a href="#kyextenddefaultoptions"><code>ky.extend()</code></a> to create niche-specific Ky-instances.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-comment">// On https://example.com</span>

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'unicorn'</span>, {<span class="hljs-attr">prefixUrl</span>: <span class="hljs-string">'/api'</span>});
<span class="hljs-comment">//=&gt; 'https://example.com/api/unicorn'</span>

<span class="hljs-keyword">const</span> response2 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'unicorn'</span>, {<span class="hljs-attr">prefixUrl</span>: <span class="hljs-string">'https://cats.com'</span>});
<span class="hljs-comment">//=&gt; 'https://cats.com/unicorn'</span>
</code></pre>
<p>Notes:</p>
<ul>
<li>After <code>prefixUrl</code> and <code>input</code> are joined, the result is resolved against the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/baseURI">base URL</a> of the page (if any).</li>
<li>Leading slashes in <code>input</code> are disallowed when using this option to enforce consistency and avoid confusion about how the <code>input</code> URL is handled, given that <code>input</code> will not follow the normal URL resolution rules when <code>prefixUrl</code> is being used, which changes the meaning of a leading slash.</li>
</ul>
<h5>retry</h5>
<p>Type: <code>object | number</code><br>Default:</p>
<ul>
<li><code>limit</code>: <code>2</code></li>
<li><code>methods</code>: <code>get</code> <code>put</code> <code>head</code> <code>delete</code> <code>options</code> <code>trace</code></li>
<li><code>statusCodes</code>: <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/408"><code>408</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/413"><code>413</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429"><code>429</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500"><code>500</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502"><code>502</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503"><code>503</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/504"><code>504</code></a></li>
<li><code>afterStatusCodes</code>: <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/413"><code>413</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429"><code>429</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503"><code>503</code></a></li>
<li><code>maxRetryAfter</code>: <code>undefined</code></li>
<li><code>backoffLimit</code>: <code>undefined</code></li>
<li><code>delay</code>: <code>attemptCount =&gt; 0.3 * (2 ** (attemptCount - 1)) * 1000</code></li>
</ul>
<p>An object representing the <code>limit</code>, <code>methods</code>, <code>statusCodes</code>, <code>afterStatusCodes</code>, and <code>maxRetryAfter</code> fields for the maximum retry count, allowed methods, allowed status codes, status codes allowed to use the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After"><code>Retry-After</code></a> time, and the maximum <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After"><code>Retry-After</code></a> time.</p>
<p>If <code>retry</code> is a number, it will be used as <code>limit</code> and other defaults will remain in place.</p>
<p>If the response provides an HTTP status contained in <code>afterStatusCodes</code>, Ky will wait until the date, timeout, or timestamp given in the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After"><code>Retry-After</code></a> header has passed to retry the request. If <code>Retry-After</code> is missing, the non-standard <a href="https://www.ietf.org/archive/id/draft-polli-ratelimit-headers-05.html#section-3.3"><code>RateLimit-Reset</code></a> header is used in its place as a fallback. If the provided status code is not in the list, the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After"><code>Retry-After</code></a> header will be ignored.</p>
<p>If <code>maxRetryAfter</code> is set to <code>undefined</code>, it will use <code>options.timeout</code>. If the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After"><code>Retry-After</code></a> header is greater than <code>maxRetryAfter</code>, it will use <code>maxRetryAfter</code>.</p>
<p>The <code>backoffLimit</code> option is the upper limit of the delay per retry in milliseconds.<br>To clamp the delay, set <code>backoffLimit</code> to 1000, for example.<br>By default, the delay is calculated with <code>0.3 * (2 ** (attemptCount - 1)) * 1000</code>. The delay increases exponentially.</p>
<p>The <code>delay</code> option can be used to change how the delay between retries is calculated. The function receives one parameter, the attempt count, starting at <code>1</code>.</p>
<p>Retries are not triggered following a <a href="#timeout">timeout</a>.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>, {
	<span class="hljs-attr">retry</span>: {
		<span class="hljs-attr">limit</span>: <span class="hljs-number">10</span>,
		<span class="hljs-attr">methods</span>: [<span class="hljs-string">'get'</span>],
		<span class="hljs-attr">statusCodes</span>: [<span class="hljs-number">413</span>],
		<span class="hljs-attr">backoffLimit</span>: <span class="hljs-number">3000</span>
	}
}).<span class="hljs-title function_">json</span>();
</code></pre>
<h5>timeout</h5>
<p>Type: <code>number | false</code><br>Default: <code>10000</code></p>
<p>Timeout in milliseconds for getting a response, including any retries. Cannot be greater than 2147483647.<br>If set to <code>false</code>, there will be no timeout.</p>
<h5>hooks</h5>
<p>Type: <code>object&lt;string, Function[]&gt;</code><br>Default: <code>{beforeRequest: [], beforeRetry: [], afterResponse: []}</code></p>
<p>Hooks allow modifications during the request lifecycle. Hook functions may be async and are run serially.</p>
<h6>hooks.beforeRequest</h6>
<p>Type: <code>Function[]</code><br>Default: <code>[]</code></p>
<p>This hook enables you to modify the request right before it is sent. Ky will make no further changes to the request after this. The hook function receives <code>request</code> and <code>options</code> as arguments. You could, for example, modify the <code>request.headers</code> here.</p>
<p>The hook can return a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request"><code>Request</code></a> to replace the outgoing request, or return a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response"><code>Response</code></a> to completely avoid making an HTTP request. This can be used to mock a request, check an internal cache, etc. An <strong>important</strong> consideration when returning a request or response from this hook is that any remaining <code>beforeRequest</code> hooks will be skipped, so you may want to only return them from the last hook.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> api = ky.<span class="hljs-title function_">extend</span>({
	<span class="hljs-attr">hooks</span>: {
		<span class="hljs-attr">beforeRequest</span>: [
			<span class="hljs-function"><span class="hljs-params">request</span> =&gt;</span> {
				request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'X-Requested-With'</span>, <span class="hljs-string">'ky'</span>);
			}
		]
	}
});

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">get</span>(<span class="hljs-string">'https://example.com/api/users'</span>);
</code></pre>
<h6>hooks.beforeRetry</h6>
<p>Type: <code>Function[]</code><br>Default: <code>[]</code></p>
<p>This hook enables you to modify the request right before retry. Ky will make no further changes to the request after this. The hook function receives an object with the normalized request and options, an error instance, and the retry count. You could, for example, modify <code>request.headers</code> here.</p>
<p>If the request received a response, the error will be of type <code>HTTPError</code> and the <code>Response</code> object will be available at <code>error.response</code>. Be aware that some types of errors, such as network errors, inherently mean that a response was not received. In that case, the error will not be an instance of <code>HTTPError</code>.</p>
<p>You can prevent Ky from retrying the request by throwing an error. Ky will not handle it in any way and the error will be propagated to the request initiator. The rest of the <code>beforeRetry</code> hooks will not be called in this case. Alternatively, you can return the <a href="#kystop"><code>ky.stop</code></a> symbol to do the same thing but without propagating an error (this has some limitations, see <code>ky.stop</code> docs for details).</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>, {
	<span class="hljs-attr">hooks</span>: {
		<span class="hljs-attr">beforeRetry</span>: [
			<span class="hljs-keyword">async</span> ({request, options, error, retryCount}) =&gt; {
				<span class="hljs-keyword">const</span> token = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com/refresh-token'</span>);
				request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'Authorization'</span>, <span class="hljs-string">`token <span class="hljs-subst">${token}</span>`</span>);
			}
		]
	}
});
</code></pre>
<h6>hooks.beforeError</h6>
<p>Type: <code>Function[]</code><br>Default: <code>[]</code></p>
<p>This hook enables you to modify the <code>HTTPError</code> right before it is thrown. The hook function receives a <code>HTTPError</code> as an argument and should return an instance of <code>HTTPError</code>.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>, {
	<span class="hljs-attr">hooks</span>: {
		<span class="hljs-attr">beforeError</span>: [
			<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
				<span class="hljs-keyword">const</span> {response} = error;
				<span class="hljs-keyword">if</span> (response &amp;&amp; response.<span class="hljs-property">body</span>) {
					error.<span class="hljs-property">name</span> = <span class="hljs-string">'GitHubError'</span>;
					error.<span class="hljs-property">message</span> = <span class="hljs-string">`<span class="hljs-subst">${response.body.message}</span> (<span class="hljs-subst">${response.status}</span>)`</span>;
				}

				<span class="hljs-keyword">return</span> error;
			}
		]
	}
});
</code></pre>
<h6>hooks.afterResponse</h6>
<p>Type: <code>Function[]</code><br>Default: <code>[]</code></p>
<p>This hook enables you to read and optionally modify the response. The hook function receives normalized request, options, and a clone of the response as arguments. The return value of the hook function will be used by Ky as the response object if it's an instance of <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response"><code>Response</code></a>.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>, {
	<span class="hljs-attr">hooks</span>: {
		<span class="hljs-attr">afterResponse</span>: [
			<span class="hljs-function">(<span class="hljs-params">_request, _options, response</span>) =&gt;</span> {
				<span class="hljs-comment">// You could do something with the response, for example, logging.</span>
				<span class="hljs-title function_">log</span>(response);

				<span class="hljs-comment">// Or return a `Response` instance to overwrite the response.</span>
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-string">'A different response'</span>, {<span class="hljs-attr">status</span>: <span class="hljs-number">200</span>});
			},

			<span class="hljs-comment">// Or retry with a fresh token on a 403 error</span>
			<span class="hljs-keyword">async</span> (request, options, response) =&gt; {
				<span class="hljs-keyword">if</span> (response.<span class="hljs-property">status</span> === <span class="hljs-number">403</span>) {
					<span class="hljs-comment">// Get a fresh token</span>
					<span class="hljs-keyword">const</span> token = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com/token'</span>).<span class="hljs-title function_">text</span>();

					<span class="hljs-comment">// Retry with the token</span>
					request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'Authorization'</span>, <span class="hljs-string">`token <span class="hljs-subst">${token}</span>`</span>);

					<span class="hljs-keyword">return</span> <span class="hljs-title function_">ky</span>(request);
				}
			}
		]
	}
});
</code></pre>
<h5>throwHttpErrors</h5>
<p>Type: <code>boolean</code><br>Default: <code>true</code></p>
<p>Throw an <code>HTTPError</code> when, after following redirects, the response has a non-2xx status code. To also throw for redirects instead of following them, set the <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch#Parameters"><code>redirect</code></a> option to <code>'manual'</code>.</p>
<p>Setting this to <code>false</code> may be useful if you are checking for resource availability and are expecting error responses.</p>
<p>Note: If <code>false</code>, error responses are considered successful and the request will not be retried.</p>
<h5>onDownloadProgress</h5>
<p>Type: <code>Function</code></p>
<p>Download progress event handler.</p>
<p>The function receives these arguments:</p>
<ul>
<li><code>progress</code> is an object with the these properties:</li>
<li><ul>
<li><code>percent</code> is a number between 0 and 1 representing the progress percentage.</li>
</ul>
</li>
<li><ul>
<li><code>transferredBytes</code> is the number of bytes transferred so far.</li>
</ul>
</li>
<li><ul>
<li><code>totalBytes</code> is the total number of bytes to be transferred. This is an estimate and may be 0 if the total size cannot be determined.</li>
</ul>
</li>
<li><code>chunk</code> is an instance of <code>Uint8Array</code> containing the data that was sent. Note: It's empty for the first call.</li>
</ul>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>, {
	<span class="hljs-attr">onDownloadProgress</span>: <span class="hljs-function">(<span class="hljs-params">progress, chunk</span>) =&gt;</span> {
		<span class="hljs-comment">// Example output:</span>
		<span class="hljs-comment">// `0% - 0 of 1271 bytes`</span>
		<span class="hljs-comment">// `100% - 1271 of 1271 bytes`</span>
		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${progress.percent * <span class="hljs-number">100</span>}</span>% - <span class="hljs-subst">${progress.transferredBytes}</span> of <span class="hljs-subst">${progress.totalBytes}</span> bytes`</span>);
	}
});
</code></pre>
<h5>onUploadProgress</h5>
<p>Type: <code>Function</code><br>Upload progress event handler.</p>
<p>The function receives these arguments:</p>
<ul>
<li><code>progress</code> is an object with these properties:</li>
<li><ul>
<li><code>percent</code> is a number between 0 and 1 representing the progress percentage.</li>
</ul>
</li>
<li><ul>
<li><code>transferredBytes</code> is the number of bytes transferred so far.</li>
</ul>
</li>
<li><ul>
<li><code>totalBytes</code> is the total number of bytes to be transferred. This is an estimate and may be 0 if the total size cannot be determined.</li>
</ul>
</li>
<li><code>chunk</code> is an instance of <code>Uint8Array</code> containing the data that was sent. Note: It's empty for the last call.</li>
</ul>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> ky.<span class="hljs-title function_">post</span>(<span class="hljs-string">'https://example.com/upload'</span>, {
	<span class="hljs-attr">body</span>: largeFile,
	<span class="hljs-attr">onUploadProgress</span>: <span class="hljs-function">(<span class="hljs-params">progress, chunk</span>) =&gt;</span> {
		<span class="hljs-comment">// Example output:</span>
		<span class="hljs-comment">// `0% - 0 of 1271 bytes`</span>
		<span class="hljs-comment">// `100% - 1271 of 1271 bytes`</span>
		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${progress.percent * <span class="hljs-number">100</span>}</span>% - <span class="hljs-subst">${progress.transferredBytes}</span> of <span class="hljs-subst">${progress.totalBytes}</span> bytes`</span>);
	}
});
</code></pre>
<h5>parseJson</h5>
<p>Type: <code>Function</code><br>Default: <code>JSON.parse()</code></p>
<p>User-defined JSON-parsing function.</p>
<p>Use-cases:</p>
<ol>
<li>Parse JSON via the <a href="https://github.com/hapijs/bourne"><code>bourne</code> package</a> to protect from prototype pollution.</li>
<li>Parse JSON with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse"><code>reviver</code> option of <code>JSON.parse()</code></a>.</li>
</ol>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;
<span class="hljs-keyword">import</span> bourne <span class="hljs-keyword">from</span> <span class="hljs-string">'@hapijs/bourne'</span>;

<span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>, {
	<span class="hljs-attr">parseJson</span>: <span class="hljs-function"><span class="hljs-params">text</span> =&gt;</span> <span class="hljs-title function_">bourne</span>(text)
}).<span class="hljs-title function_">json</span>();
</code></pre>
<h5>stringifyJson</h5>
<p>Type: <code>Function</code><br>Default: <code>JSON.stringify()</code></p>
<p>User-defined JSON-stringifying function.</p>
<p>Use-cases:</p>
<ol>
<li>Stringify JSON with a custom <code>replacer</code> function.</li>
</ol>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;
<span class="hljs-keyword">import</span> {<span class="hljs-title class_">DateTime</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'luxon'</span>;

<span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>, {
	<span class="hljs-attr">stringifyJson</span>: <span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data, <span class="hljs-function">(<span class="hljs-params">key, value</span>) =&gt;</span> {
		<span class="hljs-keyword">if</span> (key.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">'_at'</span>)) {
			<span class="hljs-keyword">return</span> <span class="hljs-title class_">DateTime</span>.<span class="hljs-title function_">fromISO</span>(value).<span class="hljs-title function_">toSeconds</span>();
		}

		<span class="hljs-keyword">return</span> value;
	})
}).<span class="hljs-title function_">json</span>();
</code></pre>
<h5>fetch</h5>
<p>Type: <code>Function</code><br>Default: <code>fetch</code></p>
<p>User-defined <code>fetch</code> function.<br>Has to be fully compatible with the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch API</a> standard.</p>
<p>Use-cases:</p>
<ol>
<li>Use custom <code>fetch</code> implementations like <a href="https://www.npmjs.com/package/isomorphic-unfetch"><code>isomorphic-unfetch</code></a>.</li>
<li>Use the <code>fetch</code> wrapper function provided by some frameworks that use server-side rendering (SSR).</li>
</ol>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;
<span class="hljs-keyword">import</span> fetch <span class="hljs-keyword">from</span> <span class="hljs-string">'isomorphic-unfetch'</span>;

<span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>, {fetch}).<span class="hljs-title function_">json</span>();
</code></pre>
<h3>ky.extend(defaultOptions)</h3>
<p>Create a new <code>ky</code> instance with some defaults overridden with your own.</p>
<p>In contrast to <code>ky.create()</code>, <code>ky.extend()</code> inherits defaults from its parent.</p>
<p>You can pass headers as a <code>Headers</code> instance or a plain object.</p>
<p>You can remove a header with <code>.extend()</code> by passing the header with an <code>undefined</code> value.<br>Passing <code>undefined</code> as a string removes the header only if it comes from a <code>Headers</code> instance.</p>
<p>Similarly, you can remove existing <code>hooks</code> entries by extending the hook with an explicit <code>undefined</code>.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> url = <span class="hljs-string">'https://sindresorhus.com'</span>;

<span class="hljs-keyword">const</span> original = ky.<span class="hljs-title function_">create</span>({
	<span class="hljs-attr">headers</span>: {
		<span class="hljs-attr">rainbow</span>: <span class="hljs-string">'rainbow'</span>,
		<span class="hljs-attr">unicorn</span>: <span class="hljs-string">'unicorn'</span>
	},
	<span class="hljs-attr">hooks</span>: {
		<span class="hljs-attr">beforeRequest</span>: [ <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'before 1'</span>) ],
		<span class="hljs-attr">afterResponse</span>: [ <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'after 1'</span>) ],
	},
});

<span class="hljs-keyword">const</span> extended = original.<span class="hljs-title function_">extend</span>({
	<span class="hljs-attr">headers</span>: {
		<span class="hljs-attr">rainbow</span>: <span class="hljs-literal">undefined</span>
	},
	<span class="hljs-attr">hooks</span>: {
		<span class="hljs-attr">beforeRequest</span>: <span class="hljs-literal">undefined</span>,
		<span class="hljs-attr">afterResponse</span>: [ <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'after 2'</span>) ],
	}
});

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">extended</span>(url).<span class="hljs-title function_">json</span>();
<span class="hljs-comment">//=&gt; after 1</span>
<span class="hljs-comment">//=&gt; after 2</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'rainbow'</span> <span class="hljs-keyword">in</span> response);
<span class="hljs-comment">//=&gt; false</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'unicorn'</span> <span class="hljs-keyword">in</span> response);
<span class="hljs-comment">//=&gt; true</span>
</code></pre>
<p>You can also refer to parent defaults by providing a function to <code>.extend()</code>.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> api = ky.<span class="hljs-title function_">create</span>({<span class="hljs-attr">prefixUrl</span>: <span class="hljs-string">'https://example.com/api'</span>});

<span class="hljs-keyword">const</span> usersApi = api.<span class="hljs-title function_">extend</span>(<span class="hljs-function">(<span class="hljs-params">options</span>) =&gt;</span> ({<span class="hljs-attr">prefixUrl</span>: <span class="hljs-string">`<span class="hljs-subst">${options.prefixUrl}</span>/users`</span>}));

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> usersApi.<span class="hljs-title function_">get</span>(<span class="hljs-string">'123'</span>);
<span class="hljs-comment">//=&gt; 'https://example.com/api/users/123'</span>

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">get</span>(<span class="hljs-string">'version'</span>);
<span class="hljs-comment">//=&gt; 'https://example.com/api/version'</span>
</code></pre>
<h3>ky.create(defaultOptions)</h3>
<p>Create a new Ky instance with complete new defaults.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-comment">// On https://my-site.com</span>

<span class="hljs-keyword">const</span> api = ky.<span class="hljs-title function_">create</span>({<span class="hljs-attr">prefixUrl</span>: <span class="hljs-string">'https://example.com/api'</span>});

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">get</span>(<span class="hljs-string">'users/123'</span>);
<span class="hljs-comment">//=&gt; 'https://example.com/api/users/123'</span>

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/status'</span>, {<span class="hljs-attr">prefixUrl</span>: <span class="hljs-string">''</span>});
<span class="hljs-comment">//=&gt; 'https://my-site.com/status'</span>
</code></pre>
<h4>defaultOptions</h4>
<p>Type: <code>object</code></p>
<h3>ky.stop</h3>
<p>A <code>Symbol</code> that can be returned by a <code>beforeRetry</code> hook to stop the retry. This will also short circuit the remaining <code>beforeRetry</code> hooks.</p>
<p>Note: Returning this symbol makes Ky abort and return with an <code>undefined</code> response. Be sure to check for a response before accessing any properties on it or use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining">optional chaining</a>. It is also incompatible with body methods, such as <code>.json()</code> or <code>.text()</code>, because there is no response to parse. In general, we recommend throwing an error instead of returning this symbol, as that will cause Ky to abort and then throw, which avoids these limitations.</p>
<p>A valid use-case for <code>ky.stop</code> is to prevent retries when making requests for side effects, where the returned data is not important. For example, logging client activity to the server.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> options = {
	<span class="hljs-attr">hooks</span>: {
		<span class="hljs-attr">beforeRetry</span>: [
			<span class="hljs-keyword">async</span> ({request, options, error, retryCount}) =&gt; {
				<span class="hljs-keyword">const</span> shouldStopRetry = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com/api'</span>);
				<span class="hljs-keyword">if</span> (shouldStopRetry) {
					<span class="hljs-keyword">return</span> ky.<span class="hljs-property">stop</span>;
				}
			}
		]
	}
};
</code></pre>
<pre><code class="language-js hljs language-javascript"><span class="hljs-comment">// Note that response will be `undefined` in case `ky.stop` is returned.</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> ky.<span class="hljs-title function_">post</span>(<span class="hljs-string">'https://example.com'</span>, options);

<span class="hljs-comment">// Using `.text()` or other body methods is not supported.</span>
<span class="hljs-keyword">const</span> text = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>, options).<span class="hljs-title function_">text</span>();
</code></pre>
<h3>HTTPError</h3>
<p>Exposed for <code>instanceof</code> checks. The error has a <code>response</code> property with the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response"><code>Response</code> object</a>, a <code>request</code> property with the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request"><code>Request</code> object</a>, and an <code>options</code> property with normalized options (either passed to <code>ky</code> when creating an instance with <code>ky.create()</code> or directly when performing the request).</p>
<p>Be aware that some types of errors, such as network errors, inherently mean that a response was not received. In that case, the error will not be an instance of HTTPError and will not contain a <code>response</code> property.</p>
<p>If you need to read the actual response when an <code>HTTPError</code> has occurred, call the respective parser method on the response object. For example:</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">try</span> {
	<span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>).<span class="hljs-title function_">json</span>();
} <span class="hljs-keyword">catch</span> (error) {
	<span class="hljs-keyword">if</span> (error.<span class="hljs-property">name</span> === <span class="hljs-string">'HTTPError'</span>) {
		<span class="hljs-keyword">const</span> errorJson = <span class="hljs-keyword">await</span> error.<span class="hljs-property">response</span>.<span class="hljs-title function_">json</span>();
	}
}
</code></pre>
<p>⌨️ <strong>TypeScript:</strong> Accepts an optional <a href="https://www.typescriptlang.org/docs/handbook/2/generics.html">type parameter</a>, which defaults to <a href="https://www.typescriptlang.org/docs/handbook/2/functions.html#unknown"><code>unknown</code></a>, and is passed through to the return type of <code>error.response.json()</code>.</p>
<h3>TimeoutError</h3>
<p>The error thrown when the request times out. It has a <code>request</code> property with the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request"><code>Request</code> object</a>.</p>
<h2>Tips</h2>
<h3>Sending form data</h3>
<p>Sending form data in Ky is identical to <code>fetch</code>. Just pass a <a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData"><code>FormData</code></a> instance to the <code>body</code> option. The <code>Content-Type</code> header will be automatically set to <code>multipart/form-data</code>.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-comment">// `multipart/form-data`</span>
<span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'food'</span>, <span class="hljs-string">'fries'</span>);
formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'drink'</span>, <span class="hljs-string">'icetea'</span>);

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> ky.<span class="hljs-title function_">post</span>(url, {<span class="hljs-attr">body</span>: formData});
</code></pre>
<p>If you want to send the data in <code>application/x-www-form-urlencoded</code> format, you will need to encode the data with <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams"><code>URLSearchParams</code></a>.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-comment">// `application/x-www-form-urlencoded`</span>
<span class="hljs-keyword">const</span> searchParams = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>();
searchParams.<span class="hljs-title function_">set</span>(<span class="hljs-string">'food'</span>, <span class="hljs-string">'fries'</span>);
searchParams.<span class="hljs-title function_">set</span>(<span class="hljs-string">'drink'</span>, <span class="hljs-string">'icetea'</span>);

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> ky.<span class="hljs-title function_">post</span>(url, {<span class="hljs-attr">body</span>: searchParams});
</code></pre>
<h3>Setting a custom <code>Content-Type</code></h3>
<p>Ky automatically sets an appropriate <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type"><code>Content-Type</code></a> header for each request based on the data in the request body. However, some APIs require custom, non-standard content types, such as <code>application/x-amz-json-1.1</code>. Using the <code>headers</code> option, you can manually override the content type.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> ky.<span class="hljs-title function_">post</span>(<span class="hljs-string">'https://example.com'</span>, {
	<span class="hljs-attr">headers</span>: {
		<span class="hljs-string">'content-type'</span>: <span class="hljs-string">'application/json'</span>
	},
	<span class="hljs-attr">json</span>: {
		<span class="hljs-attr">foo</span>: <span class="hljs-literal">true</span>
	},
}).<span class="hljs-title function_">json</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(json);
<span class="hljs-comment">//=&gt; {data: '🦄'}</span>
</code></pre>
<h3>Cancellation</h3>
<p>Fetch (and hence Ky) has built-in support for request cancellation through the <a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortController"><code>AbortController</code> API</a>. <a href="https://developers.google.com/web/updates/2017/09/abortable-fetch">Read more.</a></p>
<p>Example:</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
<span class="hljs-keyword">const</span> {signal} = controller;

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
	controller.<span class="hljs-title function_">abort</span>();
}, <span class="hljs-number">5000</span>);

<span class="hljs-keyword">try</span> {
	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(url, {signal}).<span class="hljs-title function_">text</span>());
} <span class="hljs-keyword">catch</span> (error) {
	<span class="hljs-keyword">if</span> (error.<span class="hljs-property">name</span> === <span class="hljs-string">'AbortError'</span>) {
		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Fetch aborted'</span>);
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Fetch error:'</span>, error);
	}
}
</code></pre>
<h2>FAQ</h2>
<h4>How do I use this in Node.js?</h4>
<p>Node.js 18 and later supports <code>fetch</code> natively, so you can just use this package directly.</p>
<h4>How do I use this with a web app (React, Vue.js, etc.) that uses server-side rendering (SSR)?</h4>
<p>Same as above.</p>
<h4>How do I test a browser library that uses this?</h4>
<p>Either use a test runner that can run in the browser, like Mocha, or use <a href="https://avajs.dev">AVA</a> with <code>ky-universal</code>. <a href="https://github.com/sindresorhus/ky-universal#faq">Read more.</a></p>
<h4>How do I use this without a bundler like Webpack?</h4>
<p>Make sure your code is running as a JavaScript module (ESM), for example by using a <code>&lt;script type="module"&gt;</code> tag in your HTML document. Then Ky can be imported directly by that module without a bundler or other tools.</p>
<pre><code class="language-html hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="language-javascript">
<span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'https://unpkg.com/ky/distribution/index.js'</span>;

<span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://jsonplaceholder.typicode.com/todos/1'</span>).<span class="hljs-title function_">json</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(json.<span class="hljs-property">title</span>);
<span class="hljs-comment">//=&gt; 'delectus aut autem'</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4>How is it different from <a href="https://github.com/sindresorhus/got"><code>got</code></a></h4>
<p>See my answer <a href="https://twitter.com/sindresorhus/status/1037406558945042432">here</a>. Got is maintained by the same people as Ky.</p>
<h4>How is it different from <a href="https://github.com/axios/axios"><code>axios</code></a>?</h4>
<p>See my answer <a href="https://twitter.com/sindresorhus/status/1037763588826398720">here</a>.</p>
<h4>How is it different from <a href="https://github.com/mikeal/r2"><code>r2</code></a>?</h4>
<p>See my answer in <a href="https://github.com/sindresorhus/ky/issues/10">#10</a>.</p>
<h4>What does <code>ky</code> mean?</h4>
<p>It's just a random short npm package name I managed to get. It does, however, have a meaning in Japanese:</p>
<blockquote>
<p>A form of text-able slang, KY is an abbreviation for 空気読めない (kuuki yomenai), which literally translates into “cannot read the air.” It's a phrase applied to someone who misses the implied meaning.</p>
</blockquote>
<h2>Browser support</h2>
<p>The latest version of Chrome, Firefox, and Safari.</p>
<h2>Node.js support</h2>
<p>Node.js 18 and later.</p>
<h2>Related</h2>
<ul>
<li><a href="https://github.com/sindresorhus/fetch-extras">fetch-extras</a> - Useful utilities for working with Fetch</li>
<li><a href="https://github.com/alice-health/ky-hooks-change-case">ky-hooks-change-case</a> - Ky hooks to modify cases on requests and responses of objects</li>
</ul>
<h2>Maintainers</h2>
<ul>
<li><a href="https://github.com/sindresorhus">Sindre Sorhus</a></li>
<li><a href="https://github.com/sholladay">Seth Holladay</a></li>
<li><a href="https://github.com/szmarczak">Szymon Marczak</a></li>
</ul>
<pre><code class="hljs language-yaml">

<span class="hljs-meta">---

</span>
<span class="hljs-string">Tranlated</span> <span class="hljs-string">By</span> [<span class="hljs-string">Open</span> <span class="hljs-string">Ai</span> <span class="hljs-string">Tx</span>]<span class="hljs-string">(https://github.com/OpenAiTx/OpenAiTx)</span> <span class="hljs-string">|</span> <span class="hljs-attr">Last indexed:</span> <span class="hljs-number">2025-06-11</span>


<span class="hljs-meta">---
</span></code></pre>
</div>
    </div>

    <footer class="footer">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank">Open AI Tx</a>
    </footer>
    <!-- Default Statcounter code for openaitx
https://openaitx.github.io/ -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async=""></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>
    <!-- End of Statcounter Code -->
    <script src="view.js?v=20250613"></script>


</body></html>