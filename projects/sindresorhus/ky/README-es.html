<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sindresorhus/ky - ky</title>

    <!-- Primary Meta Tags -->
    <meta name="title" content="sindresorhus/ky - ky">
    <meta name="description" content="sindresorhus/ky - GitHub repository documentation and information">
    <meta name="keywords" content="sindresorhus, ky, GitHub, repository, documentation, ">
    <meta name="author" content="Open AI Tx">
    <meta name="robots" content="index, follow">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=es">
    <meta property="og:title" content="sindresorhus/ky - ky">
    <meta property="og:description" content="sindresorhus/ky - GitHub repository documentation and information">
    <meta property="og:image" content="https://openaitx.github.io/logo_crop.png">

    <!-- Favicon -->
    <link rel="icon" type="image/jpeg" href="icon.jpg">
    <link rel="apple-touch-icon" href="icon.jpg">

    <!-- Marked.js for Markdown rendering -->
    <script type="text/javascript" async="" src="https://www.statcounter.com/counter/recorder.js"></script><script src="js/marked.min.js?v=20250613"></script>
    <!-- Highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="css/github.min.css?v=20250613">
    <script src="js/highlight.min.js?v=20250613"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="view.css?v=20250613">
    <style>
        /* Layout */
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .main-container {
            margin: 0 auto;
            width: 100%;
            max-width: 980px;
            padding: 0 20px;
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 0 15px;
            }
        }

        /* Image size restrictions */
        .markdown-body img {
            max-width: 100%;
            height: auto;
        }

        /* Existing styles */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: #f6f8fa;
            border-bottom: 1px solid #e1e4e8;
            position: relative;
        }

        .back-button {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #0366d6;
            text-decoration: none;
            display: flex;
            align-items: center;
            font-size: 14px;
            padding: 5px 10px;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            background-color: #fff;
        }

        .back-button:hover {
            background-color: #f6f8fa;
            border-color: #0366d6;
        }

        .back-button::before {
            content: "←";
            margin-right: 5px;
            font-size: 16px;
        }

        .header .links {
            margin-top: 10px;
            font-size: 16px;
        }

        .header .links a {
            color: #0366d6;
            text-decoration: none;
            margin-left: 5px;
        }

        .header .links a:hover {
            text-decoration: underline;
        }
        
        /* Language badges styles */
        .language-badges {
            margin-top: 15px;
            text-align: center;
        }
        .language-badges a {
            display: inline-block;
            margin: 2px;
            text-decoration: none;
        }
        .language-badges img {
            height: 20px;
            border-radius: 3px;
        }
        .language-badges a:hover img {
            opacity: 0.8;
        }
    </style>
</head>

<body>
    <div class="header">
        <a href="javascript:history.back()" class="back-button">Back</a>
        <div class="links">
            GitHub Repository: <a href="https://github.com/sindresorhus/ky" id="githubRepoLink" target="_blank">sindresorhus/ky</a>
        </div>
        <div class="language-badges" id="languageBadges"><a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=en"><img src="https://img.shields.io/badge/EN-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=zh-CN"><img src="https://img.shields.io/badge/简中-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=zh-TW"><img src="https://img.shields.io/badge/繁中-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=ja"><img src="https://img.shields.io/badge/日本語-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=ko"><img src="https://img.shields.io/badge/한국어-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=th"><img src="https://img.shields.io/badge/ไทย-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=fr"><img src="https://img.shields.io/badge/Français-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=de"><img src="https://img.shields.io/badge/Deutsch-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=es"><img src="https://img.shields.io/badge/Español-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=it"><img src="https://img.shields.io/badge/Italiano-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=ru"><img src="https://img.shields.io/badge/Русский-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=pt"><img src="https://img.shields.io/badge/Português-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=nl"><img src="https://img.shields.io/badge/Nederlands-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=pl"><img src="https://img.shields.io/badge/Polski-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=ar"><img src="https://img.shields.io/badge/العربية-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=tr"><img src="https://img.shields.io/badge/Türkçe-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=sindresorhus&amp;project=ky&amp;lang=vi"><img src="https://img.shields.io/badge/Tiếng Việt-white" alt="version"></a></div>
    </div>

    <div class="main-container">
        <div class="markdown-body" id="content"><div align="center">
	<br>
	<div>
		<img width="600" height="600" src="https://raw.githubusercontent.com/sindresorhus/ky/main/media/logo.svg" alt="ky">
	</div>
	<br>
	<br>
	<br>
</div>

<blockquote>
<p>Ky es un cliente HTTP pequeño y elegante basado en la <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch">Fetch API</a></p>
</blockquote>
<p><a href="https://codecov.io/gh/sindresorhus/ky"><img src="https://codecov.io/gh/sindresorhus/ky/branch/main/graph/badge.svg" alt="Coverage Status"></a><br><a href="https://bundlephobia.com/result?p=ky"><img src="https://badgen.net/bundlephobia/minzip/ky" alt=""></a></p>
<p>Ky está orientado a <a href="#browser-support">navegadores modernos</a>, Node.js, Bun y Deno.</p>
<p>Es solo un paquete pequeño sin dependencias.</p>
<h2>Ventajas sobre el <code>fetch</code> puro</h2>
<ul>
<li>API más simple</li>
<li>Atajos para métodos (<code>ky.post()</code>)</li>
<li>Trata los códigos de estado no 2xx como errores (después de redirecciones)</li>
<li>Reintenta solicitudes fallidas</li>
<li>Opción para JSON</li>
<li>Soporte para tiempo de espera (timeout)</li>
<li>Opción de prefijo de URL</li>
<li>Instancias con valores predeterminados personalizados</li>
<li>Hooks</li>
<li>Mejoras para TypeScript (por ejemplo, <code>.json()</code> soporta genéricos y por defecto retorna <code>unknown</code>, no <code>any</code>)</li>
</ul>
<h2>Instalación</h2>
<pre><code class="language-sh hljs language-bash">npm install ky
</code></pre>
<h6>CDN</h6>
<ul>
<li><a href="https://cdn.jsdelivr.net/npm/ky/+esm">jsdelivr</a></li>
<li><a href="https://unpkg.com/ky">unpkg</a></li>
<li><a href="https://esm.sh/ky">esm.sh</a></li>
</ul>
<h2>Uso</h2>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> ky.<span class="hljs-title function_">post</span>(<span class="hljs-string">'https://example.com'</span>, {<span class="hljs-attr">json</span>: {<span class="hljs-attr">foo</span>: <span class="hljs-literal">true</span>}}).<span class="hljs-title function_">json</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(json);
<span class="hljs-comment">//=&gt; {data: '🦄'}</span>
</code></pre>
<p>Con <code>fetch</code> puro, sería:</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HTTPError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Error</span> {}

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://example.com'</span>, {
	<span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
	<span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({<span class="hljs-attr">foo</span>: <span class="hljs-literal">true</span>}),
	<span class="hljs-attr">headers</span>: {
		<span class="hljs-string">'content-type'</span>: <span class="hljs-string">'application/json'</span>
	}
});

<span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
	<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HTTPError</span>(<span class="hljs-string">`Fetch error: <span class="hljs-subst">${response.statusText}</span>`</span>);
}

<span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(json);
<span class="hljs-comment">//=&gt; {data: '🦄'}</span>
</code></pre>
<p>Si usas <a href="https://github.com/denoland/deno">Deno</a>, importa Ky desde una URL. Por ejemplo, usando un CDN:</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'https://esm.sh/ky'</span>;
</code></pre>
<h2>API</h2>
<h3>ky(input, options?)</h3>
<p>El <code>input</code> y las <code>options</code> son las mismas que en <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch"><code>fetch</code></a>, con opciones adicionales disponibles (ver más abajo).</p>
<p>Devuelve un <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response">objeto <code>Response</code></a> con <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#body">métodos de <code>Body</code></a> añadidos para mayor comodidad. Así puedes, por ejemplo, llamar a <code>ky.get(input).json()</code> directamente sin tener que esperar primero el <code>Response</code>. Cuando se llama de esta manera, se establecerá una cabecera <code>Accept</code> apropiada dependiendo del método de cuerpo utilizado. A diferencia de los métodos <code>Body</code> de <code>window.Fetch</code>, estos lanzarán un <code>HTTPError</code> si el estado de la respuesta no está en el rango de <code>200...299</code>. Además, <code>.json()</code> devolverá una cadena vacía si el cuerpo está vacío o el estado de la respuesta es <code>204</code> en lugar de lanzar un error de análisis debido a un cuerpo vacío.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'/api/user'</span>).<span class="hljs-title function_">json</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user);
</code></pre>
<p>⌨️ <strong>TypeScript:</strong> Acepta un <a href="https://www.typescriptlang.org/docs/handbook/2/generics.html">parámetro de tipo</a> opcional, que por defecto es <a href="https://www.typescriptlang.org/docs/handbook/2/functions.html#unknown"><code>unknown</code></a>, y se pasa al tipo de retorno de <code>.json()</code>.</p>
<pre><code class="language-ts hljs language-typescript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-comment">// user1 es unknown</span>
<span class="hljs-keyword">const</span> user1 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'/api/users/1'</span>).<span class="hljs-title function_">json</span>();
<span class="hljs-comment">// user2 es un User</span>
<span class="hljs-keyword">const</span> user2 = <span class="hljs-keyword">await</span> ky&lt;<span class="hljs-title class_">User</span>&gt;(<span class="hljs-string">'/api/users/2'</span>).<span class="hljs-title function_">json</span>();
<span class="hljs-comment">// user3 es un User</span>
<span class="hljs-keyword">const</span> user3 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'/api/users/3'</span>).<span class="hljs-property">json</span>&lt;<span class="hljs-title class_">User</span>&gt;();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>([user1, user2, user3]);
</code></pre>
<h3>ky.get(input, options?)</h3>
<h3>ky.post(input, options?)</h3>
<h3>ky.put(input, options?)</h3>
<h3>ky.patch(input, options?)</h3>
<h3>ky.head(input, options?)</h3>
<h3>ky.delete(input, options?)</h3>
<p>Establece <code>options.method</code> al nombre del método y realiza una solicitud.</p>
<p>⌨️ <strong>TypeScript:</strong> Acepta un parámetro de tipo opcional para usar con respuestas JSON (ver <a href="#kyinput-options"><code>ky()</code></a>).</p>
<h4>input</h4>
<p>Tipo: <code>string</code> | <code>URL</code> | <code>Request</code></p>
<p>Igual que el <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/Request#input">input de <code>fetch</code></a>.</p>
<p>Cuando se usa una instancia de <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request"><code>Request</code></a> como <code>input</code>, se ignorarán todas las opciones que alteran la URL (como <code>prefixUrl</code>).</p>
<h4>options</h4>
<p>Tipo: <code>object</code></p>
<p>Igual que las <a href="https://developer.mozilla.org/en-US/docs/Web/API/fetch#options">opciones de <code>fetch</code></a>, más las siguientes opciones adicionales:</p>
<h5>method</h5>
<p>Tipo: <code>string</code><br>Por defecto: <code>'get'</code></p>
<p>Método HTTP utilizado para realizar la solicitud.</p>
<p>Internamente, los métodos estándar (<code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, <code>HEAD</code> y <code>DELETE</code>) se convierten a mayúsculas para evitar errores del servidor debido a la sensibilidad de mayúsculas y minúsculas.</p>
<h5>json</h5>
<p>Tipo: <code>object</code> y cualquier otro valor aceptado por <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify"><code>JSON.stringify()</code></a></p>
<p>Atajo para enviar JSON. Usa esto en lugar de la opción <code>body</code>. Acepta cualquier objeto plano o valor, que será convertido con <code>JSON.stringify()</code> y enviado en el cuerpo con la cabecera correcta establecida.</p>
<h5>searchParams</h5>
<p>Tipo: <code>string | object&lt;string, string | number | boolean&gt; | Array&lt;Array&lt;string | number | boolean&gt;&gt; | URLSearchParams</code><br>Por defecto: <code>''</code></p>
<p>Parámetros de búsqueda para incluir en la URL de la solicitud. Establecer esto sobrescribirá todos los parámetros de búsqueda existentes en la URL de entrada.</p>
<p>Acepta cualquier valor soportado por <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/URLSearchParams"><code>URLSearchParams()</code></a>.</p>
<h5>prefixUrl</h5>
<p>Tipo: <code>string | URL</code></p>
<p>Un prefijo para anteponer a la URL de <code>input</code> al realizar la solicitud. Puede ser cualquier URL válida, relativa o absoluta. Una barra final <code>/</code> es opcional y se añadirá automáticamente, si es necesario, cuando se combine con <code>input</code>. Solo tiene efecto cuando <code>input</code> es una cadena. El argumento <code>input</code> no puede comenzar con una barra <code>/</code> cuando se usa esta opción.</p>
<p>Útil cuando se usa con <a href="#kyextenddefaultoptions"><code>ky.extend()</code></a> para crear instancias de Ky específicas para un nicho.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-comment">// En https://example.com</span>

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'unicorn'</span>, {<span class="hljs-attr">prefixUrl</span>: <span class="hljs-string">'/api'</span>});
<span class="hljs-comment">//=&gt; 'https://example.com/api/unicorn'</span>

<span class="hljs-keyword">const</span> response2 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'unicorn'</span>, {<span class="hljs-attr">prefixUrl</span>: <span class="hljs-string">'https://cats.com'</span>});
<span class="hljs-comment">//=&gt; 'https://cats.com/unicorn'</span>
</code></pre>
<p>Notas:</p>
<ul>
<li>Después de unir <code>prefixUrl</code> e <code>input</code>, el resultado se resuelve contra la <a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/baseURI">URL base</a> de la página (si la hay).</li>
<li>No se permiten barras iniciales en <code>input</code> al usar esta opción para reforzar la consistencia y evitar confusiones sobre cómo se maneja la URL de <code>input</code>, dado que <code>input</code> no seguirá las reglas normales de resolución de URL cuando se utilice <code>prefixUrl</code>, lo que cambia el significado de una barra inicial.</li>
</ul>
<h5>retry</h5>
<p>Tipo: <code>object | number</code><br>Por defecto:</p>
<ul>
<li><code>limit</code>: <code>2</code></li>
<li><code>methods</code>: <code>get</code> <code>put</code> <code>head</code> <code>delete</code> <code>options</code> <code>trace</code></li>
<li><code>statusCodes</code>: <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/408"><code>408</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/413"><code>413</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429"><code>429</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500"><code>500</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502"><code>502</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503"><code>503</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/504"><code>504</code></a></li>
<li><code>afterStatusCodes</code>: <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/413"><code>413</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429"><code>429</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503"><code>503</code></a></li>
<li><code>maxRetryAfter</code>: <code>undefined</code></li>
<li><code>backoffLimit</code>: <code>undefined</code></li>
<li><code>delay</code>: <code>attemptCount =&gt; 0.3 * (2 ** (attemptCount - 1)) * 1000</code></li>
</ul>
<p>Un objeto que representa los campos <code>limit</code>, <code>methods</code>, <code>statusCodes</code>, <code>afterStatusCodes</code> y <code>maxRetryAfter</code> para el número máximo de reintentos, métodos permitidos, códigos de estado permitidos, códigos de estado permitidos para usar el tiempo de <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After"><code>Retry-After</code></a>, y el tiempo máximo de <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After"><code>Retry-After</code></a>.</p>
<p>Si <code>retry</code> es un número, se utilizará como <code>limit</code> y los demás valores predeterminados permanecerán.</p>
<p>Si la respuesta proporciona un código de estado HTTP contenido en <code>afterStatusCodes</code>, Ky esperará hasta la fecha, tiempo de espera o marca de tiempo indicada en la cabecera <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After"><code>Retry-After</code></a> antes de reintentar la solicitud. Si falta el encabezado <code>Retry-After</code>, se utiliza en su lugar la cabecera no estándar <a href="https://www.ietf.org/archive/id/draft-polli-ratelimit-headers-05.html#section-3.3"><code>RateLimit-Reset</code></a> como alternativa. Si el código de estado proporcionado no está en la lista, se ignorará la cabecera <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After"><code>Retry-After</code></a>.</p>
<p>Si <code>maxRetryAfter</code> se establece en <code>undefined</code>, utilizará <code>options.timeout</code>. Si el encabezado <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After"><code>Retry-After</code></a> es mayor que <code>maxRetryAfter</code>, se usará <code>maxRetryAfter</code>.</p>
<p>La opción <code>backoffLimit</code> es el límite superior del retraso por reintento en milisegundos.<br>Para limitar el retraso, establece <code>backoffLimit</code> en 1000, por ejemplo.<br>Por defecto, el retraso se calcula con <code>0.3 * (2 ** (attemptCount - 1)) * 1000</code>. El retraso aumenta exponencialmente.</p>
<p>La opción <code>delay</code> se puede utilizar para cambiar cómo se calcula el retraso entre reintentos. La función recibe un parámetro, el número de intento, comenzando en <code>1</code>.</p>
<p>Los reintentos no se activan tras un <a href="#timeout">timeout</a>.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>, {
	<span class="hljs-attr">retry</span>: {
		<span class="hljs-attr">limit</span>: <span class="hljs-number">10</span>,
		<span class="hljs-attr">methods</span>: [<span class="hljs-string">'get'</span>],
		<span class="hljs-attr">statusCodes</span>: [<span class="hljs-number">413</span>],
		<span class="hljs-attr">backoffLimit</span>: <span class="hljs-number">3000</span>
	}
}).<span class="hljs-title function_">json</span>();
</code></pre>
<h5>timeout</h5>
<p>Tipo: <code>number | false</code><br>Predeterminado: <code>10000</code></p>
<p>Tiempo de espera en milisegundos para obtener una respuesta, incluyendo cualquier reintento. No puede ser mayor que 2147483647.<br>Si se establece en <code>false</code>, no habrá límite de tiempo de espera.</p>
<h5>hooks</h5>
<p>Tipo: <code>object&lt;string, Function[]&gt;</code><br>Predeterminado: <code>{beforeRequest: [], beforeRetry: [], afterResponse: []}</code></p>
<p>Los hooks permiten modificaciones durante el ciclo de vida de la solicitud. Las funciones hook pueden ser asíncronas y se ejecutan en serie.</p>
<h6>hooks.beforeRequest</h6>
<p>Tipo: <code>Function[]</code><br>Predeterminado: <code>[]</code></p>
<p>Este hook te permite modificar la solicitud justo antes de que sea enviada. Ky no realizará más cambios en la solicitud después de esto. La función del hook recibe <code>request</code> y <code>options</code> como argumentos. Por ejemplo, podrías modificar aquí <code>request.headers</code>.</p>
<p>El hook puede devolver un <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request"><code>Request</code></a> para reemplazar la solicitud saliente, o devolver un <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response"><code>Response</code></a> para evitar completamente hacer una solicitud HTTP. Esto se puede usar para simular una solicitud, consultar una caché interna, etc. Una consideración <strong>importante</strong> al devolver una solicitud o respuesta desde este hook es que cualquier hook <code>beforeRequest</code> restante será omitido, por lo que puede que solo desees devolverlos desde el último hook.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> api = ky.<span class="hljs-title function_">extend</span>({
	<span class="hljs-attr">hooks</span>: {
		<span class="hljs-attr">beforeRequest</span>: [
			<span class="hljs-function"><span class="hljs-params">request</span> =&gt;</span> {
				request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'X-Requested-With'</span>, <span class="hljs-string">'ky'</span>);
			}
		]
	}
});

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">get</span>(<span class="hljs-string">'https://example.com/api/users'</span>);
</code></pre>
<h6>hooks.beforeRetry</h6>
<p>Tipo: <code>Function[]</code><br>Predeterminado: <code>[]</code></p>
<p>Este hook te permite modificar la solicitud justo antes del reintento. Ky no realizará más cambios en la solicitud después de esto. La función hook recibe un objeto con la solicitud y opciones normalizadas, una instancia de error y el número de reintento. Por ejemplo, podrías modificar aquí <code>request.headers</code>.</p>
<p>Si la solicitud recibió una respuesta, el error será de tipo <code>HTTPError</code> y el objeto <code>Response</code> estará disponible en <code>error.response</code>. Ten en cuenta que algunos tipos de errores, como errores de red, implican que no se recibió una respuesta. En ese caso, el error no será una instancia de <code>HTTPError</code>.</p>
<p>Puedes evitar que Ky reintente la solicitud lanzando un error. Ky no lo manejará de ninguna manera y el error será propagado al iniciador de la solicitud. El resto de los hooks <code>beforeRetry</code> no serán llamados en este caso. Alternativamente, puedes devolver el símbolo <a href="#kystop"><code>ky.stop</code></a> para hacer lo mismo pero sin propagar un error (esto tiene algunas limitaciones, consulta la documentación de <code>ky.stop</code> para más detalles).</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>, {
	<span class="hljs-attr">hooks</span>: {
		<span class="hljs-attr">beforeRetry</span>: [
			<span class="hljs-keyword">async</span> ({request, options, error, retryCount}) =&gt; {
				<span class="hljs-keyword">const</span> token = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com/refresh-token'</span>);
				request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'Authorization'</span>, <span class="hljs-string">`token <span class="hljs-subst">${token}</span>`</span>);
			}
		]
	}
});
</code></pre>
<h6>hooks.beforeError</h6>
<p>Tipo: <code>Function[]</code><br>Predeterminado: <code>[]</code></p>
<p>Este hook te permite modificar el <code>HTTPError</code> justo antes de que sea lanzado. La función del hook recibe un <code>HTTPError</code> como argumento y debe devolver una instancia de <code>HTTPError</code>.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>, {
	<span class="hljs-attr">hooks</span>: {
		<span class="hljs-attr">beforeError</span>: [
			<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
				<span class="hljs-keyword">const</span> {response} = error;
				<span class="hljs-keyword">if</span> (response &amp;&amp; response.<span class="hljs-property">body</span>) {
					error.<span class="hljs-property">name</span> = <span class="hljs-string">'GitHubError'</span>;
					error.<span class="hljs-property">message</span> = <span class="hljs-string">`<span class="hljs-subst">${response.body.message}</span> (<span class="hljs-subst">${response.status}</span>)`</span>;
				}

				<span class="hljs-keyword">return</span> error;
			}
		]
	}
});
</code></pre>
<h6>hooks.afterResponse</h6>
<p>Tipo: <code>Function[]</code><br>Predeterminado: <code>[]</code></p>
<p>Este hook te permite leer y, opcionalmente, modificar la respuesta. La función hook recibe la solicitud normalizada, las opciones y un clon de la respuesta como argumentos. El valor devuelto por la función hook será usado por Ky como el objeto de respuesta si es una instancia de <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response"><code>Response</code></a>.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>, {
	<span class="hljs-attr">hooks</span>: {
		<span class="hljs-attr">afterResponse</span>: [
			<span class="hljs-function">(<span class="hljs-params">_request, _options, response</span>) =&gt;</span> {
				<span class="hljs-comment">// Podrías hacer algo con la respuesta, por ejemplo, registrar.</span>
				<span class="hljs-title function_">log</span>(response);

				<span class="hljs-comment">// O devolver una instancia de `Response` para sobrescribir la respuesta.</span>
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-string">'Una respuesta diferente'</span>, {<span class="hljs-attr">status</span>: <span class="hljs-number">200</span>});
			},

			<span class="hljs-comment">// O reintentar con un token nuevo ante un error 403</span>
			<span class="hljs-keyword">async</span> (request, options, response) =&gt; {
				<span class="hljs-keyword">if</span> (response.<span class="hljs-property">status</span> === <span class="hljs-number">403</span>) {
					<span class="hljs-comment">// Obtener un token nuevo</span>
					<span class="hljs-keyword">const</span> token = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com/token'</span>).<span class="hljs-title function_">text</span>();

					<span class="hljs-comment">// Reintentar con el token</span>
					request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'Authorization'</span>, <span class="hljs-string">`token <span class="hljs-subst">${token}</span>`</span>);

					<span class="hljs-keyword">return</span> <span class="hljs-title function_">ky</span>(request);
				}
			}
		]
	}
});
</code></pre>
<h5>throwHttpErrors</h5>
<p>Tipo: <code>boolean</code><br>Predeterminado: <code>true</code></p>
<p>Lanza un <code>HTTPError</code> cuando, después de seguir redirecciones, la respuesta tiene un código de estado que no es 2xx. Para lanzar también en caso de redirecciones en vez de seguirlas, establece la opción <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch#Parameters"><code>redirect</code></a> en <code>'manual'</code>.</p>
<p>Poner esto en <code>false</code> puede ser útil si estás comprobando la disponibilidad de un recurso y esperas respuestas de error.</p>
<p>Nota: Si es <code>false</code>, las respuestas de error se consideran exitosas y la solicitud no se reintentará.</p>
<h5>onDownloadProgress</h5>
<p>Tipo: <code>Function</code></p>
<p>Manejador de eventos para el progreso de descarga.</p>
<p>La función recibe estos argumentos:</p>
<ul>
<li><code>progress</code> es un objeto con las siguientes propiedades:</li>
<li><ul>
<li><code>percent</code> es un número entre 0 y 1 que representa el porcentaje de progreso.</li>
</ul>
</li>
<li><ul>
<li><code>transferredBytes</code> es el número de bytes transferidos hasta el momento.</li>
</ul>
</li>
<li><ul>
<li><code>totalBytes</code> es el número total de bytes a transferir. Esto es una estimación y puede ser 0 si no se puede determinar el tamaño total.</li>
</ul>
</li>
<li><code>chunk</code> es una instancia de <code>Uint8Array</code> que contiene los datos enviados. Nota: Está vacío en la primera llamada.</li>
</ul>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>, {
	<span class="hljs-attr">onDownloadProgress</span>: <span class="hljs-function">(<span class="hljs-params">progress, chunk</span>) =&gt;</span> {
		<span class="hljs-comment">// Ejemplo de salida:</span>
		<span class="hljs-comment">// `0% - 0 de 1271 bytes`</span>
		<span class="hljs-comment">// `100% - 1271 de 1271 bytes`</span>
		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${progress.percent * <span class="hljs-number">100</span>}</span>% - <span class="hljs-subst">${progress.transferredBytes}</span> de <span class="hljs-subst">${progress.totalBytes}</span> bytes`</span>);
	}
});
</code></pre>
<h5>onUploadProgress</h5>
<p>Tipo: <code>Function</code></p>
<p>Controlador de eventos de progreso de carga.</p>
<p>La función recibe estos argumentos:</p>
<ul>
<li><code>progress</code> es un objeto con las siguientes propiedades:</li>
<li><ul>
<li><code>percent</code> es un número entre 0 y 1 que representa el porcentaje de progreso.</li>
</ul>
</li>
<li><ul>
<li><code>transferredBytes</code> es el número de bytes transferidos hasta el momento.</li>
</ul>
</li>
<li><ul>
<li><code>totalBytes</code> es el total de bytes que se van a transferir. Esto es una estimación y puede ser 0 si no se puede determinar el tamaño total.</li>
</ul>
</li>
<li><code>chunk</code> es una instancia de <code>Uint8Array</code> que contiene los datos que se enviaron. Nota: Está vacío en la última llamada.</li>
</ul>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> ky.<span class="hljs-title function_">post</span>(<span class="hljs-string">'https://example.com/upload'</span>, {
	<span class="hljs-attr">body</span>: largeFile,
	<span class="hljs-attr">onUploadProgress</span>: <span class="hljs-function">(<span class="hljs-params">progress, chunk</span>) =&gt;</span> {
		<span class="hljs-comment">// Salida de ejemplo:</span>
		<span class="hljs-comment">// `0% - 0 de 1271 bytes`</span>
		<span class="hljs-comment">// `100% - 1271 de 1271 bytes`</span>
		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${progress.percent * <span class="hljs-number">100</span>}</span>% - <span class="hljs-subst">${progress.transferredBytes}</span> de <span class="hljs-subst">${progress.totalBytes}</span> bytes`</span>);
	}
});
</code></pre>
<h5>parseJson</h5>
<p>Tipo: <code>Function</code><br>Por defecto: <code>JSON.parse()</code></p>
<p>Función personalizada de análisis de JSON.</p>
<p>Casos de uso:</p>
<ol>
<li>Analizar JSON mediante el paquete <a href="https://github.com/hapijs/bourne"><code>bourne</code></a> para proteger contra la contaminación de prototipos.</li>
<li>Analizar JSON con la opción <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse"><code>reviver</code> de <code>JSON.parse()</code></a>.</li>
</ol>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;
<span class="hljs-keyword">import</span> bourne <span class="hljs-keyword">from</span> <span class="hljs-string">'@hapijs/bourne'</span>;

<span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>, {
	<span class="hljs-attr">parseJson</span>: <span class="hljs-function"><span class="hljs-params">text</span> =&gt;</span> <span class="hljs-title function_">bourne</span>(text)
}).<span class="hljs-title function_">json</span>();
</code></pre>
<h5>stringifyJson</h5>
<p>Tipo: <code>Function</code><br>Por defecto: <code>JSON.stringify()</code></p>
<p>Función personalizada para convertir a JSON.</p>
<p>Casos de uso:</p>
<ol>
<li>Convertir a JSON con una función personalizada <code>replacer</code>.</li>
</ol>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;
<span class="hljs-keyword">import</span> {<span class="hljs-title class_">DateTime</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'luxon'</span>;

<span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>, {
	<span class="hljs-attr">stringifyJson</span>: <span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data, <span class="hljs-function">(<span class="hljs-params">key, value</span>) =&gt;</span> {
		<span class="hljs-keyword">if</span> (key.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">'_at'</span>)) {
			<span class="hljs-keyword">return</span> <span class="hljs-title class_">DateTime</span>.<span class="hljs-title function_">fromISO</span>(value).<span class="hljs-title function_">toSeconds</span>();
		}

		<span class="hljs-keyword">return</span> value;
	})
}).<span class="hljs-title function_">json</span>();
</code></pre>
<h5>fetch</h5>
<p>Tipo: <code>Function</code><br>Por defecto: <code>fetch</code></p>
<p>Función <code>fetch</code> definida por el usuario.<br>Debe ser completamente compatible con el estándar de la <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch API</a>.</p>
<p>Casos de uso:</p>
<ol>
<li>Usar implementaciones personalizadas de <code>fetch</code> como <a href="https://www.npmjs.com/package/isomorphic-unfetch"><code>isomorphic-unfetch</code></a>.</li>
<li>Usar la función envoltorio de <code>fetch</code> proporcionada por algunos frameworks que usan renderizado del lado del servidor (SSR).</li>
</ol>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;
<span class="hljs-keyword">import</span> fetch <span class="hljs-keyword">from</span> <span class="hljs-string">'isomorphic-unfetch'</span>;

<span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>, {fetch}).<span class="hljs-title function_">json</span>();
</code></pre>
<h3>ky.extend(defaultOptions)</h3>
<p>Crea una nueva instancia de <code>ky</code> con algunos valores por defecto sobrescritos por los tuyos.</p>
<p>A diferencia de <code>ky.create()</code>, <code>ky.extend()</code> hereda los valores por defecto de su padre.</p>
<p>Puedes pasar cabeceras como una instancia de <code>Headers</code> o como un objeto plano.</p>
<p>Puedes eliminar una cabecera con <code>.extend()</code> pasando la cabecera con un valor <code>undefined</code>.<br>Pasar <code>undefined</code> como cadena elimina la cabecera solo si proviene de una instancia de <code>Headers</code>.</p>
<p>De manera similar, puedes eliminar entradas existentes de <code>hooks</code> extendiendo el hook con un <code>undefined</code> explícito.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> url = <span class="hljs-string">'https://sindresorhus.com'</span>;

<span class="hljs-keyword">const</span> original = ky.<span class="hljs-title function_">create</span>({
	<span class="hljs-attr">headers</span>: {
		<span class="hljs-attr">rainbow</span>: <span class="hljs-string">'rainbow'</span>,
		<span class="hljs-attr">unicorn</span>: <span class="hljs-string">'unicorn'</span>
	},
	<span class="hljs-attr">hooks</span>: {
		<span class="hljs-attr">beforeRequest</span>: [ <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'before 1'</span>) ],
		<span class="hljs-attr">afterResponse</span>: [ <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'after 1'</span>) ],
	},
});

<span class="hljs-keyword">const</span> extended = original.<span class="hljs-title function_">extend</span>({
	<span class="hljs-attr">headers</span>: {
		<span class="hljs-attr">rainbow</span>: <span class="hljs-literal">undefined</span>
	},
	<span class="hljs-attr">hooks</span>: {
		<span class="hljs-attr">beforeRequest</span>: <span class="hljs-literal">undefined</span>,
		<span class="hljs-attr">afterResponse</span>: [ <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'after 2'</span>) ],
	}
});

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">extended</span>(url).<span class="hljs-title function_">json</span>();
<span class="hljs-comment">//=&gt; after 1</span>
<span class="hljs-comment">//=&gt; after 2</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'rainbow'</span> <span class="hljs-keyword">in</span> response);
<span class="hljs-comment">//=&gt; false</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'unicorn'</span> <span class="hljs-keyword">in</span> response);
<span class="hljs-comment">//=&gt; true</span>
</code></pre>
<p>También puedes referenciar los valores por defecto del padre proporcionando una función a <code>.extend()</code>.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> api = ky.<span class="hljs-title function_">create</span>({<span class="hljs-attr">prefixUrl</span>: <span class="hljs-string">'https://example.com/api'</span>});

<span class="hljs-keyword">const</span> usersApi = api.<span class="hljs-title function_">extend</span>(<span class="hljs-function">(<span class="hljs-params">options</span>) =&gt;</span> ({<span class="hljs-attr">prefixUrl</span>: <span class="hljs-string">`<span class="hljs-subst">${options.prefixUrl}</span>/users`</span>}));

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> usersApi.<span class="hljs-title function_">get</span>(<span class="hljs-string">'123'</span>);
<span class="hljs-comment">//=&gt; 'https://example.com/api/users/123'</span>

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">get</span>(<span class="hljs-string">'version'</span>);
<span class="hljs-comment">//=&gt; 'https://example.com/api/version'</span>
</code></pre>
<h3>ky.create(defaultOptions)</h3>
<p>Crea una nueva instancia de Ky con valores por defecto completamente nuevos.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-comment">// En https://my-site.com</span>

<span class="hljs-keyword">const</span> api = ky.<span class="hljs-title function_">create</span>({<span class="hljs-attr">prefixUrl</span>: <span class="hljs-string">'https://example.com/api'</span>});

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">get</span>(<span class="hljs-string">'users/123'</span>);
<span class="hljs-comment">//=&gt; 'https://example.com/api/users/123'</span>

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/status'</span>, {<span class="hljs-attr">prefixUrl</span>: <span class="hljs-string">''</span>});
<span class="hljs-comment">//=&gt; 'https://my-site.com/status'</span>
</code></pre>
<h4>defaultOptions</h4>
<p>Tipo: <code>object</code></p>
<h3>ky.stop</h3>
<p>Un <code>Symbol</code> que puede ser retornado por un hook <code>beforeRetry</code> para detener el reintento. Esto también interrumpe los hooks <code>beforeRetry</code> restantes.</p>
<p>Nota: Retornar este símbolo hace que Ky aborte y devuelva una respuesta <code>undefined</code>. Asegúrate de comprobar la existencia de una respuesta antes de acceder a cualquiera de sus propiedades o utiliza <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining">optional chaining</a>. También es incompatible con los métodos del cuerpo, como <code>.json()</code> o <code>.text()</code>, ya que no hay respuesta para analizar. En general, recomendamos lanzar un error en lugar de retornar este símbolo, ya que eso hará que Ky aborte y luego lance una excepción, lo que evita estas limitaciones.</p>
<p>Un caso de uso válido para <code>ky.stop</code> es evitar reintentos al hacer solicitudes para efectos secundarios, donde los datos devueltos no son importantes. Por ejemplo, registrar la actividad del cliente en el servidor.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> options = {
	<span class="hljs-attr">hooks</span>: {
		<span class="hljs-attr">beforeRetry</span>: [
			<span class="hljs-keyword">async</span> ({request, options, error, retryCount}) =&gt; {
				<span class="hljs-keyword">const</span> shouldStopRetry = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com/api'</span>);
				<span class="hljs-keyword">if</span> (shouldStopRetry) {
					<span class="hljs-keyword">return</span> ky.<span class="hljs-property">stop</span>;
				}
			}
		]
	}
};
</code></pre>
<pre><code class="language-markdown hljs">// Ten en cuenta que la respuesta será <span class="hljs-code">`undefined`</span> en caso de que se retorne <span class="hljs-code">`ky.stop`</span>.
const response = await ky.post('https://example.com', options);

// No se admite el uso de <span class="hljs-code">`.text()`</span> u otros métodos de cuerpo.
const text = await ky('https://example.com', options).text();
</code></pre>
<h3>HTTPError</h3>
<p>Expuesto para comprobaciones con <code>instanceof</code>. El error tiene una propiedad <code>response</code> con el <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response">objeto <code>Response</code></a>, una propiedad <code>request</code> con el <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request">objeto <code>Request</code></a>, y una propiedad <code>options</code> con las opciones normalizadas (ya sea pasadas a <code>ky</code> al crear una instancia con <code>ky.create()</code> o directamente al realizar la solicitud).</p>
<p>Ten en cuenta que algunos tipos de errores, como los errores de red, implican inherentemente que no se recibió una respuesta. En ese caso, el error no será una instancia de HTTPError y no contendrá una propiedad <code>response</code>.</p>
<p>Si necesitas leer la respuesta real cuando ha ocurrido un <code>HTTPError</code>, llama al método de análisis respectivo en el objeto response. Por ejemplo:</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">try</span> {
	<span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://example.com'</span>).<span class="hljs-title function_">json</span>();
} <span class="hljs-keyword">catch</span> (error) {
	<span class="hljs-keyword">if</span> (error.<span class="hljs-property">name</span> === <span class="hljs-string">'HTTPError'</span>) {
		<span class="hljs-keyword">const</span> errorJson = <span class="hljs-keyword">await</span> error.<span class="hljs-property">response</span>.<span class="hljs-title function_">json</span>();
	}
}
</code></pre>
<p>⌨️ <strong>TypeScript:</strong> Acepta un <a href="https://www.typescriptlang.org/docs/handbook/2/generics.html">parámetro de tipo</a> opcional, que por defecto es <a href="https://www.typescriptlang.org/docs/handbook/2/functions.html#unknown"><code>unknown</code></a>, y se pasa al tipo de retorno de <code>error.response.json()</code>.</p>
<h3>TimeoutError</h3>
<p>El error lanzado cuando la solicitud supera el tiempo de espera. Tiene una propiedad <code>request</code> con el <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request">objeto <code>Request</code></a>.</p>
<h2>Consejos</h2>
<h3>Enviar datos de formulario</h3>
<p>Enviar datos de formulario en Ky es idéntico a <code>fetch</code>. Simplemente pasa una instancia de <a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData"><code>FormData</code></a> a la opción <code>body</code>. El encabezado <code>Content-Type</code> se establecerá automáticamente en <code>multipart/form-data</code>.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-comment">// `multipart/form-data`</span>
<span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'food'</span>, <span class="hljs-string">'fries'</span>);
formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'drink'</span>, <span class="hljs-string">'icetea'</span>);

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> ky.<span class="hljs-title function_">post</span>(url, {<span class="hljs-attr">body</span>: formData});
</code></pre>
<p>Si deseas enviar los datos en formato <code>application/x-www-form-urlencoded</code>, deberás codificar los datos con <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams"><code>URLSearchParams</code></a>.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-comment">// `application/x-www-form-urlencoded`</span>
<span class="hljs-keyword">const</span> searchParams = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>();
searchParams.<span class="hljs-title function_">set</span>(<span class="hljs-string">'food'</span>, <span class="hljs-string">'fries'</span>);
searchParams.<span class="hljs-title function_">set</span>(<span class="hljs-string">'drink'</span>, <span class="hljs-string">'icetea'</span>);

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> ky.<span class="hljs-title function_">post</span>(url, {<span class="hljs-attr">body</span>: searchParams});
</code></pre>
<h3>Establecer un <code>Content-Type</code> personalizado</h3>
<p>Ky establece automáticamente un encabezado <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type"><code>Content-Type</code></a> apropiado para cada solicitud según los datos en el cuerpo de la solicitud. Sin embargo, algunas APIs requieren tipos de contenido personalizados o no estándar, como <code>application/x-amz-json-1.1</code>. Usando la opción <code>headers</code>, puedes sobrescribir manualmente el tipo de contenido.</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> ky.<span class="hljs-title function_">post</span>(<span class="hljs-string">'https://example.com'</span>, {
	<span class="hljs-attr">headers</span>: {
		<span class="hljs-string">'content-type'</span>: <span class="hljs-string">'application/json'</span>
	},
	<span class="hljs-attr">json</span>: {
		<span class="hljs-attr">foo</span>: <span class="hljs-literal">true</span>
	},
}).<span class="hljs-title function_">json</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(json);
<span class="hljs-comment">//=&gt; {data: '🦄'}</span>
</code></pre>
<h3>Cancelación</h3>
<p>Fetch (y por lo tanto Ky) tiene soporte integrado para la cancelación de solicitudes mediante la <a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortController">API <code>AbortController</code></a>. <a href="https://developers.google.com/web/updates/2017/09/abortable-fetch">Leer más.</a></p>
<p>Ejemplo:</p>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'ky'</span>;

<span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
<span class="hljs-keyword">const</span> {signal} = controller;

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
	controller.<span class="hljs-title function_">abort</span>();
}, <span class="hljs-number">5000</span>);

<span class="hljs-keyword">try</span> {
	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(url, {signal}).<span class="hljs-title function_">text</span>());
} <span class="hljs-keyword">catch</span> (error) {
	<span class="hljs-keyword">if</span> (error.<span class="hljs-property">name</span> === <span class="hljs-string">'AbortError'</span>) {
		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Fetch abortado'</span>);
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error de fetch:'</span>, error);
	}
}
</code></pre>
<h2>Preguntas frecuentes (FAQ)</h2>
<h4>¿Cómo uso esto en Node.js?</h4>
<p>Node.js 18 y versiones posteriores soportan <code>fetch</code> de forma nativa, así que puedes usar este paquete directamente.</p>
<h4>¿Cómo uso esto con una aplicación web (React, Vue.js, etc.) que utiliza renderizado del lado del servidor (SSR)?</h4>
<p>Igual que lo anterior.</p>
<h4>¿Cómo pruebo una librería de navegador que usa esto?</h4>
<p>Usa un test runner que pueda ejecutarse en el navegador, como Mocha, o utiliza <a href="https://avajs.dev">AVA</a> con <code>ky-universal</code>. <a href="https://github.com/sindresorhus/ky-universal#faq">Leer más.</a></p>
<h4>¿Cómo uso esto sin un empaquetador como Webpack?</h4>
<p>Asegúrate de que tu código se esté ejecutando como un módulo de JavaScript (ESM), por ejemplo usando una etiqueta <code>&lt;script type="module"&gt;</code> en tu documento HTML. Entonces Ky puede ser importado directamente por ese módulo sin un empaquetador u otras herramientas.</p>
<pre><code class="language-html hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="language-javascript">
<span class="hljs-keyword">import</span> ky <span class="hljs-keyword">from</span> <span class="hljs-string">'https://unpkg.com/ky/distribution/index.js'</span>;

<span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> <span class="hljs-title function_">ky</span>(<span class="hljs-string">'https://jsonplaceholder.typicode.com/todos/1'</span>).<span class="hljs-title function_">json</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(json.<span class="hljs-property">title</span>);
<span class="hljs-comment">//=&gt; 'delectus aut autem'</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4>¿En qué se diferencia de <a href="https://github.com/sindresorhus/got"><code>got</code></a>?</h4>
<p>Mira mi respuesta <a href="https://twitter.com/sindresorhus/status/1037406558945042432">aquí</a>. Got es mantenido por las mismas personas que Ky.</p>
<h4>¿En qué se diferencia de <a href="https://github.com/axios/axios"><code>axios</code></a>?</h4>
<p>Mira mi respuesta <a href="https://twitter.com/sindresorhus/status/1037763588826398720">aquí</a>.</p>
<h4>¿En qué se diferencia de <a href="https://github.com/mikeal/r2"><code>r2</code></a>?</h4>
<p>Mira mi respuesta en <a href="https://github.com/sindresorhus/ky/issues/10">#10</a>.</p>
<h4>¿Qué significa <code>ky</code>?</h4>
<p>Es solo un nombre corto aleatorio de paquete npm que logré conseguir. Sin embargo, sí tiene un significado en japonés:</p>
<blockquote>
<p>Una forma de jerga textual, KY es una abreviatura de 空気読めない (kuuki yomenai), que literalmente se traduce como “no puede leer el aire”. Es una frase que se aplica a alguien que no capta el significado implícito.</p>
</blockquote>
<h2>Compatibilidad con navegadores</h2>
<p>La última versión de Chrome, Firefox y Safari.</p>
<h2>Compatibilidad con Node.js</h2>
<p>Node.js 18 y posteriores.</p>
<h2>Relacionados</h2>
<ul>
<li><a href="https://github.com/sindresorhus/fetch-extras">fetch-extras</a> - Utilidades útiles para trabajar con Fetch</li>
<li><a href="https://github.com/alice-health/ky-hooks-change-case">ky-hooks-change-case</a> - Hooks de Ky para modificar los casos en solicitudes y respuestas de objetos</li>
</ul>
<h2>Mantenedores</h2>
<ul>
<li><a href="https://github.com/sindresorhus">Sindre Sorhus</a></li>
<li><a href="https://github.com/sholladay">Seth Holladay</a></li>
<li><a href="https://github.com/szmarczak">Szymon Marczak</a></li>
</ul>
<pre><code class="hljs language-yaml">

<span class="hljs-meta">---

</span>
<span class="hljs-string">Tranlated</span> <span class="hljs-string">By</span> [<span class="hljs-string">Open</span> <span class="hljs-string">Ai</span> <span class="hljs-string">Tx</span>]<span class="hljs-string">(https://github.com/OpenAiTx/OpenAiTx)</span> <span class="hljs-string">|</span> <span class="hljs-attr">Last indexed:</span> <span class="hljs-number">2025-06-11</span>


<span class="hljs-meta">---
</span></code></pre>
</div>
    </div>

    <footer class="footer">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank">Open AI Tx</a>
    </footer>
    <!-- Default Statcounter code for openaitx
https://openaitx.github.io/ -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async=""></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>
    <!-- End of Statcounter Code -->
    <script src="view.js?v=20250613"></script>


</body></html>