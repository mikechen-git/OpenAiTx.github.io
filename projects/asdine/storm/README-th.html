<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Storm - Open AI Tx</title>

    <!-- Primary Meta Tags -->
    <meta name="title" content="Open AI Tx - Markdown Viewer">
    <meta name="description" content="GitHub style markdown viewer for Open AI Tx projects">
    <meta name="keywords" content="Open AI Tx, Markdown, GitHub Style, Documentation">
    <meta name="author" content="Open AI Tx">
    <meta name="robots" content="index, follow">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://openaitx.github.io/view.html">
    <meta property="og:title" content="Open AI Tx - Markdown Viewer">
    <meta property="og:description" content="GitHub style markdown viewer for Open AI Tx projects">
    <meta property="og:image" content="https://openaitx.github.io/logo_crop.png">

    <!-- Favicon -->
    <link rel="icon" type="image/jpeg" href="icon.jpg">
    <link rel="apple-touch-icon" href="icon.jpg">

    <!-- Marked.js for Markdown rendering -->
    <script type="text/javascript" async="" src="https://www.statcounter.com/counter/recorder.js"></script><script src="js/marked.min.js"></script>
    <!-- Highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="css/github.min.css">
    <script src="js/highlight.min.js"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="view.css">
    <style>
        /* Layout */
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .main-container {
            margin: 0 auto;
            width: 100%;
            max-width: 980px;
            padding: 0 20px;
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 0 15px;
            }
        }

        /* Image size restrictions */
        .markdown-body img {
            max-width: 100%;
            height: auto;
        }

        /* Existing styles */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: #f6f8fa;
            border-bottom: 1px solid #e1e4e8;
            position: relative;
        }

        .back-button {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #0366d6;
            text-decoration: none;
            display: flex;
            align-items: center;
            font-size: 14px;
            padding: 5px 10px;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            background-color: #fff;
        }

        .back-button:hover {
            background-color: #f6f8fa;
            border-color: #0366d6;
        }

        .back-button::before {
            content: "←";
            margin-right: 5px;
            font-size: 16px;
        }

        .header .links {
            margin-top: 10px;
            font-size: 16px;
        }

        .header .links a {
            color: #0366d6;
            text-decoration: none;
            margin-left: 5px;
        }

        .header .links a:hover {
            text-decoration: underline;
        }
        
        /* Language badges styles */
        .language-badges {
            margin-top: 15px;
            text-align: center;
        }
        .language-badges a {
            display: inline-block;
            margin: 2px;
            text-decoration: none;
        }
        .language-badges img {
            height: 20px;
            border-radius: 3px;
        }
        .language-badges a:hover img {
            opacity: 0.8;
        }
    </style>
</head>

<body>
    <div class="header">
        <a href="javascript:history.back()" class="back-button">Back</a>
        <div class="links">
            GitHub Repository: <a href="https://github.com/asdine/storm" id="githubRepoLink" target="_blank">asdine/storm</a>
        </div>
        <div class="language-badges" id="languageBadges"><a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=en"><img src="https://img.shields.io/badge/EN-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=zh-CN"><img src="https://img.shields.io/badge/简中-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=zh-TW"><img src="https://img.shields.io/badge/繁中-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=ja"><img src="https://img.shields.io/badge/日本語-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=ko"><img src="https://img.shields.io/badge/한국어-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=th"><img src="https://img.shields.io/badge/ไทย-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=fr"><img src="https://img.shields.io/badge/Français-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=de"><img src="https://img.shields.io/badge/Deutsch-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=es"><img src="https://img.shields.io/badge/Español-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=it"><img src="https://img.shields.io/badge/Italiano-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=ru"><img src="https://img.shields.io/badge/Русский-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=pt"><img src="https://img.shields.io/badge/Português-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=nl"><img src="https://img.shields.io/badge/Nederlands-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=pl"><img src="https://img.shields.io/badge/Polski-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=ar"><img src="https://img.shields.io/badge/العربية-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=tr"><img src="https://img.shields.io/badge/Türkçe-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=vi"><img src="https://img.shields.io/badge/Tiếng Việt-white" alt="version"></a></div>
    </div>

    <div class="main-container">
        <div class="markdown-body" id="content"><h1>Storm</h1>
<p><a href="https://travis-ci.org/asdine/storm"><img src="https://travis-ci.org/asdine/storm.svg" alt="Build Status"></a><br><a href="https://godoc.org/github.com/asdine/storm"><img src="https://godoc.org/github.com/asdine/storm?status.svg" alt="GoDoc"></a></p>
<p>Storm เป็นชุดเครื่องมือที่เรียบง่ายและทรงพลังสำหรับ <a href="https://github.com/coreos/bbolt">BoltDB</a> โดยพื้นฐานแล้ว Storm มีระบบจัดทำดัชนี (indexes), วิธีการที่หลากหลายในการจัดเก็บและดึงข้อมูล, ระบบค้นหาขั้นสูง และอื่นๆ อีกมากมาย</p>
<p>นอกจากตัวอย่างด้านล่างนี้แล้ว โปรดดู <a href="https://godoc.org/github.com/asdine/storm#pkg-examples">ตัวอย่างเพิ่มเติมใน GoDoc</a></p>
<p><em>สำหรับระบบค้นหาขั้นสูงและการรองรับ <a href="https://github.com/dgraph-io/badger">Badger</a> โปรดดูที่ <a href="https://github.com/asdine/genji">Genji</a></em></p>
<h2>สารบัญ</h2>
<ul>
<li><a href="#getting-started">เริ่มต้นใช้งาน</a></li>
<li><a href="#import-storm">นำเข้า Storm</a></li>
<li><a href="#open-a-database">เปิดฐานข้อมูล</a></li>
<li><a href="#simple-crud-system">ระบบ CRUD อย่างง่าย</a><ul>
<li><a href="#declare-your-structures">ประกาศโครงสร้างของคุณ</a></li>
<li><a href="#save-your-object">บันทึกอ็อบเจกต์ของคุณ</a><ul>
<li><a href="#auto-increment">เพิ่มค่าอัตโนมัติ</a></li>
</ul>
</li>
<li><a href="#simple-queries">การค้นหาแบบง่าย</a><ul>
<li><a href="#fetch-one-object">ดึงอ็อบเจกต์เดียว</a></li>
<li><a href="#fetch-multiple-objects">ดึงอ็อบเจกต์หลายรายการ</a></li>
<li><a href="#fetch-all-objects">ดึงอ็อบเจกต์ทั้งหมด</a></li>
<li><a href="#fetch-all-objects-sorted-by-index">ดึงอ็อบเจกต์ทั้งหมดเรียงตามดัชนี</a></li>
<li><a href="#fetch-a-range-of-objects">ดึงอ็อบเจกต์ในช่วง</a></li>
<li><a href="#fetch-objects-by-prefix">ดึงอ็อบเจกต์ตาม prefix</a></li>
<li><a href="#skip-limit-and-reverse">ข้าม, จำกัด และย้อนกลับ</a></li>
<li><a href="#delete-an-object">ลบอ็อบเจกต์</a></li>
<li><a href="#update-an-object">อัปเดตอ็อบเจกต์</a></li>
<li><a href="#initialize-buckets-and-indexes-before-saving-an-object">เตรียม bucket และดัชนีก่อนบันทึกอ็อบเจกต์</a></li>
<li><a href="#drop-a-bucket">ลบ bucket</a></li>
<li><a href="#re-index-a-bucket">สร้างดัชนี bucket ใหม่</a></li>
</ul>
</li>
<li><a href="#advanced-queries">การค้นหาขั้นสูง</a></li>
<li><a href="#transactions">ธุรกรรม</a></li>
<li><a href="#options">ตัวเลือก</a><ul>
<li><a href="#boltoptions">BoltOptions</a></li>
<li><a href="#marshalunmarshaler">MarshalUnmarshaler</a><ul>
<li><a href="#provided-codecs">Codec ที่มีให้</a></li>
</ul>
</li>
<li><a href="#use-existing-bolt-connection">ใช้การเชื่อมต่อ Bolt ที่มีอยู่</a></li>
<li><a href="#batch-mode">โหมด Batch</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#nodes-and-nested-buckets">Node และ bucket ซ้อน</a><ul>
<li><a href="#node-options">ตัวเลือก Node</a></li>
</ul>
</li>
<li><a href="#simple-keyvalue-store">Key/Value store แบบง่าย</a></li>
<li><a href="#boltdb">BoltDB</a></li>
<li><a href="#license">สัญญาอนุญาต</a></li>
<li><a href="#credits">เครดิต</a></li>
</ul>
<h2>เริ่มต้นใช้งาน</h2>
<pre><code class="language-bash hljs">GO111MODULE=on go get -u github.com/asdine/storm/v3
</code></pre>
<h2>นำเข้า Storm</h2>
<pre><code class="language-go hljs"><span class="hljs-keyword">import</span> <span class="hljs-string">"github.com/asdine/storm/v3"</span>
</code></pre>
<h2>เปิดฐานข้อมูล</h2>
<p>วิธีเปิดฐานข้อมูลอย่างรวดเร็ว</p>
<pre><code class="language-go hljs">db, err := storm.Open(<span class="hljs-string">"my.db"</span>)

<span class="hljs-keyword">defer</span> db.Close()
</code></pre>
<p><code>Open</code> สามารถรับตัวเลือกหลายค่าเพื่อปรับแต่งการทำงาน ดูที่ <a href="#options">ตัวเลือก</a> ด้านล่าง</p>
<h2>ระบบ CRUD อย่างง่าย</h2>
<h3>ประกาศโครงสร้างของคุณ</h3>
<pre><code class="language-go hljs"><span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
  ID <span class="hljs-type">int</span> <span class="hljs-comment">// primary key</span>
  Group <span class="hljs-type">string</span> <span class="hljs-string">`storm:"index"`</span> <span class="hljs-comment">// ฟิลด์นี้จะถูกจัดทำดัชนี</span>
  Email <span class="hljs-type">string</span> <span class="hljs-string">`storm:"unique"`</span> <span class="hljs-comment">// ฟิลด์นี้จะถูกจัดทำดัชนีแบบไม่ซ้ำ</span>
  Name <span class="hljs-type">string</span> <span class="hljs-comment">// ฟิลด์นี้จะไม่ถูกจัดทำดัชนี</span>
  Age <span class="hljs-type">int</span> <span class="hljs-string">`storm:"index"`</span>
}
</code></pre>
<p>Primary key สามารถเป็นชนิดใดก็ได้ตราบใดที่ไม่ใช่ค่า zero Storm จะค้นหา tag <code>id</code> หากไม่พบ Storm จะค้นหาชื่อฟิลด์ว่า <code>ID</code></p>
<pre><code class="language-go hljs"><span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
  ThePrimaryKey <span class="hljs-type">string</span> <span class="hljs-string">`storm:"id"`</span><span class="hljs-comment">// primary key</span>
  Group <span class="hljs-type">string</span> <span class="hljs-string">`storm:"index"`</span> <span class="hljs-comment">// ฟิลด์นี้จะถูกจัดทำดัชนี</span>
  Email <span class="hljs-type">string</span> <span class="hljs-string">`storm:"unique"`</span> <span class="hljs-comment">// ฟิลด์นี้จะถูกจัดทำดัชนีแบบไม่ซ้ำ</span>
  Name <span class="hljs-type">string</span> <span class="hljs-comment">// ฟิลด์นี้จะไม่ถูกจัดทำดัชนี</span>
}
</code></pre>
<p>Storm รองรับ tag ในโครงสร้างซ้อนด้วย tag <code>inline</code></p>
<pre><code class="language-go hljs"><span class="hljs-keyword">type</span> Base <span class="hljs-keyword">struct</span> {
  Ident bson.ObjectId <span class="hljs-string">`storm:"id"`</span>
}

<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
  Base      <span class="hljs-string">`storm:"inline"`</span>
  Group     <span class="hljs-type">string</span> <span class="hljs-string">`storm:"index"`</span>
  Email     <span class="hljs-type">string</span> <span class="hljs-string">`storm:"unique"`</span>
  Name      <span class="hljs-type">string</span>
  CreatedAt time.Time <span class="hljs-string">`storm:"index"`</span>
}
</code></pre>
<h3>บันทึกอ็อบเจกต์ของคุณ</h3>
<pre><code class="language-go hljs">user := User{
  ID: <span class="hljs-number">10</span>,
  Group: <span class="hljs-string">"staff"</span>,
  Email: <span class="hljs-string">"john@provider.com"</span>,
  Name: <span class="hljs-string">"John"</span>,
  Age: <span class="hljs-number">21</span>,
  CreatedAt: time.Now(),
}

err := db.Save(&amp;user)
<span class="hljs-comment">// err == nil</span>

user.ID++
err = db.Save(&amp;user)
<span class="hljs-comment">// err == storm.ErrAlreadyExists</span>
</code></pre>
<p>แค่นั้นเอง</p>
<p><code>Save</code> จะสร้างหรืออัปเดตดัชนีและ bucket ที่จำเป็นทั้งหมด, ตรวจสอบข้อจำกัดแบบไม่ซ้ำ และบันทึกอ็อบเจกต์ลง store</p>
<h4>เพิ่มค่าอัตโนมัติ</h4>
<p>Storm สามารถเพิ่มค่าตัวเลขแบบอัตโนมัติ ทำให้คุณไม่ต้องกังวลเรื่องนี้ขณะบันทึกอ็อบเจกต์ ค่าใหม่จะถูกแทรกในฟิลด์ของคุณโดยอัตโนมัติ</p>
<pre><code class="language-go hljs">
<span class="hljs-keyword">type</span> Product <span class="hljs-keyword">struct</span> {
  Pk                  <span class="hljs-type">int</span> <span class="hljs-string">`storm:"id,increment"`</span> <span class="hljs-comment">// primary key พร้อมเพิ่มค่าอัตโนมัติ</span>
  Name                <span class="hljs-type">string</span>
  IntegerField        <span class="hljs-type">uint64</span> <span class="hljs-string">`storm:"increment"`</span>
  IndexedIntegerField <span class="hljs-type">uint32</span> <span class="hljs-string">`storm:"index,increment"`</span>
  UniqueIntegerField  <span class="hljs-type">int16</span>  <span class="hljs-string">`storm:"unique,increment=100"`</span> <span class="hljs-comment">// สามารถตั้งค่าตั้งต้นได้</span>
}

p := Product{Name: <span class="hljs-string">"Vaccum Cleaner"</span>}

fmt.Println(p.Pk)
fmt.Println(p.IntegerField)
fmt.Println(p.IndexedIntegerField)
fmt.Println(p.UniqueIntegerField)
<span class="hljs-comment">// 0</span>
<span class="hljs-comment">// 0</span>
<span class="hljs-comment">// 0</span>
<span class="hljs-comment">// 0</span>

_ = db.Save(&amp;p)

fmt.Println(p.Pk)
fmt.Println(p.IntegerField)
fmt.Println(p.IndexedIntegerField)
fmt.Println(p.UniqueIntegerField)
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// 100</span>
</code></pre>
<h3>การค้นหาแบบง่าย</h3>
<p>สามารถดึงอ็อบเจกต์ใดก็ได้ ไม่ว่าจะจัดทำดัชนีหรือไม่ Storm จะใช้ดัชนีเมื่อมีให้ใช้ มิฉะนั้นจะใช้ <a href="#advanced-queries">ระบบค้นหาขั้นสูง</a></p>
<h4>ดึงอ็อบเจกต์เดียว</h4>
<pre><code class="language-go hljs"><span class="hljs-keyword">var</span> user User
err := db.One(<span class="hljs-string">"Email"</span>, <span class="hljs-string">"john@provider.com"</span>, &amp;user)
<span class="hljs-comment">// err == nil</span>

err = db.One(<span class="hljs-string">"Name"</span>, <span class="hljs-string">"John"</span>, &amp;user)
<span class="hljs-comment">// err == nil</span>

err = db.One(<span class="hljs-string">"Name"</span>, <span class="hljs-string">"Jack"</span>, &amp;user)
<span class="hljs-comment">// err == storm.ErrNotFound</span>
</code></pre>
<h4>ดึงอ็อบเจกต์หลายรายการ</h4>
<pre><code class="language-go hljs"><span class="hljs-keyword">var</span> users []User
err := db.Find(<span class="hljs-string">"Group"</span>, <span class="hljs-string">"staff"</span>, &amp;users)
</code></pre>
<h4>ดึงข้อมูลอ็อบเจกต์ทั้งหมด</h4>
<pre><code class="language-go hljs"><span class="hljs-keyword">var</span> users []User
err := db.All(&amp;users)
</code></pre>
<h4>ดึงข้อมูลอ็อบเจกต์ทั้งหมดโดยเรียงตามดัชนี</h4>
<pre><code class="language-go hljs"><span class="hljs-keyword">var</span> users []User
err := db.AllByIndex(<span class="hljs-string">"CreatedAt"</span>, &amp;users)
</code></pre>
<h4>ดึงข้อมูลอ็อบเจกต์ในช่วงที่กำหนด</h4>
<pre><code class="language-go hljs"><span class="hljs-keyword">var</span> users []User
err := db.Range(<span class="hljs-string">"Age"</span>, <span class="hljs-number">10</span>, <span class="hljs-number">21</span>, &amp;users)
</code></pre>
<h4>ดึงข้อมูลอ็อบเจกต์โดยใช้ prefix</h4>
<pre><code class="language-go hljs"><span class="hljs-keyword">var</span> users []User
err := db.Prefix(<span class="hljs-string">"Name"</span>, <span class="hljs-string">"Jo"</span>, &amp;users)
</code></pre>
<h4>ข้าม, จำกัดจำนวน และย้อนกลับลำดับ</h4>
<pre><code class="language-go hljs"><span class="hljs-keyword">var</span> users []User
err := db.Find(<span class="hljs-string">"Group"</span>, <span class="hljs-string">"staff"</span>, &amp;users, storm.Skip(<span class="hljs-number">10</span>))
err = db.Find(<span class="hljs-string">"Group"</span>, <span class="hljs-string">"staff"</span>, &amp;users, storm.Limit(<span class="hljs-number">10</span>))
err = db.Find(<span class="hljs-string">"Group"</span>, <span class="hljs-string">"staff"</span>, &amp;users, storm.Reverse())
err = db.Find(<span class="hljs-string">"Group"</span>, <span class="hljs-string">"staff"</span>, &amp;users, storm.Limit(<span class="hljs-number">10</span>), storm.Skip(<span class="hljs-number">10</span>), storm.Reverse())

err = db.All(&amp;users, storm.Limit(<span class="hljs-number">10</span>), storm.Skip(<span class="hljs-number">10</span>), storm.Reverse())
err = db.AllByIndex(<span class="hljs-string">"CreatedAt"</span>, &amp;users, storm.Limit(<span class="hljs-number">10</span>), storm.Skip(<span class="hljs-number">10</span>), storm.Reverse())
err = db.Range(<span class="hljs-string">"Age"</span>, <span class="hljs-number">10</span>, <span class="hljs-number">21</span>, &amp;users, storm.Limit(<span class="hljs-number">10</span>), storm.Skip(<span class="hljs-number">10</span>), storm.Reverse())
</code></pre>
<h4>ลบอ็อบเจกต์</h4>
<pre><code class="language-go hljs">err := db.DeleteStruct(&amp;user)
</code></pre>
<h4>อัปเดตอ็อบเจกต์</h4>
<pre><code class="language-go hljs"><span class="hljs-comment">// อัปเดตหลายฟิลด์</span>
<span class="hljs-comment">// ใช้ได้เฉพาะกับฟิลด์ที่ไม่ใช่ค่า zero-value (เช่น Name ต้องไม่เป็น "", Age ต้องไม่เป็น 0)</span>
err := db.Update(&amp;User{ID: <span class="hljs-number">10</span>, Name: <span class="hljs-string">"Jack"</span>, Age: <span class="hljs-number">45</span>})

<span class="hljs-comment">// อัปเดตฟิลด์เดียว</span>
<span class="hljs-comment">// ใช้กับค่า zero-value ได้ด้วย (0, false, "", ...)</span>
err := db.UpdateField(&amp;User{ID: <span class="hljs-number">10</span>}, <span class="hljs-string">"Age"</span>, <span class="hljs-number">0</span>)
</code></pre>
<h4>สร้าง bucket และ index ล่วงหน้าก่อนบันทึกอ็อบเจกต์</h4>
<pre><code class="language-go hljs">err := db.Init(&amp;User{})
</code></pre>
<p>มีประโยชน์เมื่อต้องการเริ่มต้นแอปพลิเคชัน</p>
<h4>ลบ bucket</h4>
<p>โดยใช้ struct</p>
<pre><code class="language-go hljs">err := db.Drop(&amp;User)
</code></pre>
<p>โดยใช้ชื่อ bucket</p>
<pre><code class="language-go hljs">err := db.Drop(<span class="hljs-string">"User"</span>)
</code></pre>
<h4>สร้าง index ใหม่ให้กับ bucket</h4>
<pre><code class="language-go hljs">err := db.ReIndex(&amp;User{})
</code></pre>
<p>มีประโยชน์เมื่อมีการเปลี่ยนแปลงโครงสร้าง</p>
<h3>การค้นหาขั้นสูง</h3>
<p>สำหรับการค้นหาที่ซับซ้อนขึ้น สามารถใช้เมธอด <code>Select</code><br><code>Select</code> สามารถรับ <a href="https://godoc.org/github.com/asdine/storm/q#Matcher"><code>Matcher</code></a> จากแพ็คเกจ <a href="https://godoc.org/github.com/asdine/storm/q"><code>q</code></a> ได้หลายตัว</p>
<p>ตัวอย่าง Matcher ที่ใช้บ่อย:</p>
<pre><code class="language-go hljs"><span class="hljs-comment">// เท่ากับ</span>
q.Eq(<span class="hljs-string">"Name"</span>, John)

<span class="hljs-comment">// มากกว่า</span>
q.Gt(<span class="hljs-string">"Age"</span>, <span class="hljs-number">7</span>)

<span class="hljs-comment">// น้อยกว่าหรือเท่ากับ</span>
q.Lte(<span class="hljs-string">"Age"</span>, <span class="hljs-number">77</span>)

<span class="hljs-comment">// Regex กับชื่อที่ขึ้นต้นด้วย D</span>
q.Re(<span class="hljs-string">"Name"</span>, <span class="hljs-string">"^D"</span>)

<span class="hljs-comment">// อยู่ใน slice ที่กำหนด</span>
q.In(<span class="hljs-string">"Group"</span>, []<span class="hljs-type">string</span>{<span class="hljs-string">"Staff"</span>, <span class="hljs-string">"Admin"</span>})

<span class="hljs-comment">// เปรียบเทียบฟิลด์</span>
q.EqF(<span class="hljs-string">"FieldName"</span>, <span class="hljs-string">"SecondFieldName"</span>)
q.LtF(<span class="hljs-string">"FieldName"</span>, <span class="hljs-string">"SecondFieldName"</span>)
q.GtF(<span class="hljs-string">"FieldName"</span>, <span class="hljs-string">"SecondFieldName"</span>)
q.LteF(<span class="hljs-string">"FieldName"</span>, <span class="hljs-string">"SecondFieldName"</span>)
q.GteF(<span class="hljs-string">"FieldName"</span>, <span class="hljs-string">"SecondFieldName"</span>)
</code></pre>
<p>Matcher สามารถผสมกับ <code>And</code>, <code>Or</code> และ <code>Not</code> ได้:</p>
<pre><code class="language-go hljs">
<span class="hljs-comment">// ตรงทุกเงื่อนไข</span>
q.And(
  q.Gt(<span class="hljs-string">"Age"</span>, <span class="hljs-number">7</span>),
  q.Re(<span class="hljs-string">"Name"</span>, <span class="hljs-string">"^D"</span>)
)

<span class="hljs-comment">// ตรงอย่างน้อยหนึ่งเงื่อนไข</span>
q.Or(
  q.Re(<span class="hljs-string">"Name"</span>, <span class="hljs-string">"^A"</span>),
  q.Not(
    q.Re(<span class="hljs-string">"Name"</span>, <span class="hljs-string">"^B"</span>)
  ),
  q.Re(<span class="hljs-string">"Name"</span>, <span class="hljs-string">"^C"</span>),
  q.In(<span class="hljs-string">"Group"</span>, []<span class="hljs-type">string</span>{<span class="hljs-string">"Staff"</span>, <span class="hljs-string">"Admin"</span>}),
  q.And(
    q.StrictEq(<span class="hljs-string">"Password"</span>, []<span class="hljs-type">byte</span>(password)),
    q.Eq(<span class="hljs-string">"Registered"</span>, <span class="hljs-literal">true</span>)
  )
)
</code></pre>
<p>สามารถดูรายการ Matcher ทั้งหมดได้ใน <a href="https://godoc.org/github.com/asdine/storm/q#Matcher">documentation</a></p>
<p><code>Select</code> รับ matcher ได้หลายตัวและจะรวมเป็น <code>q.And()</code> อัตโนมัติ ไม่จำเป็นต้องระบุเอง ผลลัพธ์คือ <a href="https://godoc.org/github.com/asdine/storm#Query"><code>Query</code></a></p>
<pre><code class="language-go hljs">query := db.Select(q.Gte(<span class="hljs-string">"Age"</span>, <span class="hljs-number">7</span>), q.Lte(<span class="hljs-string">"Age"</span>, <span class="hljs-number">77</span>))
</code></pre>
<p>ชนิด <code>Query</code> มีเมธอดสำหรับกรองและเรียงลำดับเรคคอร์ด</p>
<pre><code class="language-go hljs"><span class="hljs-comment">// จำกัดจำนวน</span>
query = query.Limit(<span class="hljs-number">10</span>)

<span class="hljs-comment">// ข้าม</span>
query = query.Skip(<span class="hljs-number">20</span>)

<span class="hljs-comment">// สามารถเรียกต่อเนื่องกันได้</span>
query = query.Limit(<span class="hljs-number">10</span>).Skip(<span class="hljs-number">20</span>).OrderBy(<span class="hljs-string">"Age"</span>).Reverse()
</code></pre>
<p>และยังสามารถระบุวิธีดึงข้อมูลได้ด้วย</p>
<pre><code class="language-go hljs"><span class="hljs-keyword">var</span> users []User
err = query.Find(&amp;users)

<span class="hljs-keyword">var</span> user User
err = query.First(&amp;user)
</code></pre>
<p>ตัวอย่างการใช้ <code>Select</code>:</p>
<pre><code class="language-go hljs"><span class="hljs-comment">// ค้นหาผู้ใช้ที่มี ID อยู่ระหว่าง 10 ถึง 100</span>
err = db.Select(q.Gte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">10</span>), q.Lte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">100</span>)).Find(&amp;users)

<span class="hljs-comment">// ใช้ matcher ซ้อนกัน</span>
err = db.Select(q.Or(
  q.Gt(<span class="hljs-string">"ID"</span>, <span class="hljs-number">50</span>),
  q.Lt(<span class="hljs-string">"Age"</span>, <span class="hljs-number">21</span>),
  q.And(
    q.Eq(<span class="hljs-string">"Group"</span>, <span class="hljs-string">"admin"</span>),
    q.Gte(<span class="hljs-string">"Age"</span>, <span class="hljs-number">21</span>),
  ),
)).Find(&amp;users)

query := db.Select(q.Gte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">10</span>), q.Lte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">100</span>)).Limit(<span class="hljs-number">10</span>).Skip(<span class="hljs-number">5</span>).Reverse().OrderBy(<span class="hljs-string">"Age"</span>, <span class="hljs-string">"Name"</span>)

<span class="hljs-comment">// ค้นหาหลายเรคคอร์ด</span>
err = query.Find(&amp;users)
<span class="hljs-comment">// หรือ</span>
err = db.Select(q.Gte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">10</span>), q.Lte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">100</span>)).Limit(<span class="hljs-number">10</span>).Skip(<span class="hljs-number">5</span>).Reverse().OrderBy(<span class="hljs-string">"Age"</span>, <span class="hljs-string">"Name"</span>).Find(&amp;users)
</code></pre>
<pre><code class="language-go hljs"><span class="hljs-comment">// ค้นหาข้อมูลแรก</span>
err = query.First(&amp;user)
<span class="hljs-comment">// หรือ</span>
err = db.Select(q.Gte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">10</span>), q.Lte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">100</span>)).Limit(<span class="hljs-number">10</span>).Skip(<span class="hljs-number">5</span>).Reverse().OrderBy(<span class="hljs-string">"Age"</span>, <span class="hljs-string">"Name"</span>).First(&amp;user)

<span class="hljs-comment">// ลบข้อมูลทั้งหมดที่ตรงกับเงื่อนไข</span>
err = query.Delete(<span class="hljs-built_in">new</span>(User))

<span class="hljs-comment">// ดึงข้อมูลทีละรายการ (เหมาะสำหรับ bucket ที่มีข้อมูลจำนวนมาก)</span>
query = db.Select(q.Gte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">10</span>),q.Lte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">100</span>)).OrderBy(<span class="hljs-string">"Age"</span>, <span class="hljs-string">"Name"</span>)

err = query.Each(<span class="hljs-built_in">new</span>(User), <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(record <span class="hljs-keyword">interface</span>{})</span></span> <span class="hljs-type">error</span>) {
  u := record.(*User)
  ...
  <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}
</code></pre>
<p>ดู <a href="https://godoc.org/github.com/asdine/storm#Query">เอกสารประกอบ</a> สำหรับรายการเมธอดทั้งหมด</p>
<h3>ธุรกรรม (Transactions)</h3>
<pre><code class="language-go hljs">tx, err := db.Begin(<span class="hljs-literal">true</span>)
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
  <span class="hljs-keyword">return</span> err
}
<span class="hljs-keyword">defer</span> tx.Rollback()

accountA.Amount -= <span class="hljs-number">100</span>
accountB.Amount += <span class="hljs-number">100</span>

err = tx.Save(accountA)
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
  <span class="hljs-keyword">return</span> err
}

err = tx.Save(accountB)
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
  <span class="hljs-keyword">return</span> err
}

<span class="hljs-keyword">return</span> tx.Commit()
</code></pre>
<h3>ตัวเลือก (Options)</h3>
<p>ตัวเลือกของ Storm คือฟังก์ชันที่สามารถส่งไปตอนสร้างอินสแตนซ์ Storm คุณสามารถส่งตัวเลือกได้มากเท่าที่ต้องการ</p>
<h4>BoltOptions</h4>
<p>โดยปกติ Storm จะเปิดฐานข้อมูลด้วยโหมด <code>0600</code> และกำหนด timeout ไว้ที่ 1 วินาที<br>คุณสามารถเปลี่ยนพฤติกรรมนี้ได้ด้วย <code>BoltOptions</code></p>
<pre><code class="language-go hljs">db, err := storm.Open(<span class="hljs-string">"my.db"</span>, storm.BoltOptions(<span class="hljs-number">0600</span>, &amp;bolt.Options{Timeout: <span class="hljs-number">1</span> * time.Second}))
</code></pre>
<h4>MarshalUnmarshaler</h4>
<p>เพื่อเก็บข้อมูลใน BoltDB, Storm จะ marshal ข้อมูลเป็น JSON โดยดีฟอลต์ หากต้องการเปลี่ยนพฤติกรรมนี้ สามารถส่ง codec ที่ implement <a href="https://godoc.org/github.com/asdine/storm/codec#MarshalUnmarshaler"><code>codec.MarshalUnmarshaler</code></a> ผ่าน <a href="https://godoc.org/github.com/asdine/storm#Codec"><code>storm.Codec</code></a> option:</p>
<pre><code class="language-go hljs">db := storm.Open(<span class="hljs-string">"my.db"</span>, storm.Codec(myCodec))
</code></pre>
<h5>Codec ที่มีให้ใช้</h5>
<p>คุณสามารถ implement <code>MarshalUnmarshaler</code> ของตัวเองได้อย่างง่ายดาย แต่ Storm มีรองรับในตัวสำหรับ <a href="https://godoc.org/github.com/asdine/storm/codec/json">JSON</a> (ดีฟอลต์), <a href="https://godoc.org/github.com/asdine/storm/codec/gob">GOB</a>,  <a href="https://godoc.org/github.com/asdine/storm/codec/sereal">Sereal</a>, <a href="https://godoc.org/github.com/asdine/storm/codec/protobuf">Protocol Buffers</a> และ <a href="https://godoc.org/github.com/asdine/storm/codec/msgpack">MessagePack</a></p>
<p>สิ่งเหล่านี้สามารถใช้งานได้โดย import package ที่เกี่ยวข้องและใช้ codec นั้นในการตั้งค่า Storm ตัวอย่างด้านล่างนี้แสดงทุกแบบ (โดยไม่จัดการ error):</p>
<pre><code class="language-go hljs"><span class="hljs-keyword">import</span> (
  <span class="hljs-string">"github.com/asdine/storm/v3"</span>
  <span class="hljs-string">"github.com/asdine/storm/v3/codec/gob"</span>
  <span class="hljs-string">"github.com/asdine/storm/v3/codec/json"</span>
  <span class="hljs-string">"github.com/asdine/storm/v3/codec/sereal"</span>
  <span class="hljs-string">"github.com/asdine/storm/v3/codec/protobuf"</span>
  <span class="hljs-string">"github.com/asdine/storm/v3/codec/msgpack"</span>
)

<span class="hljs-keyword">var</span> gobDb, _ = storm.Open(<span class="hljs-string">"gob.db"</span>, storm.Codec(gob.Codec))
<span class="hljs-keyword">var</span> jsonDb, _ = storm.Open(<span class="hljs-string">"json.db"</span>, storm.Codec(json.Codec))
<span class="hljs-keyword">var</span> serealDb, _ = storm.Open(<span class="hljs-string">"sereal.db"</span>, storm.Codec(sereal.Codec))
<span class="hljs-keyword">var</span> protobufDb, _ = storm.Open(<span class="hljs-string">"protobuf.db"</span>, storm.Codec(protobuf.Codec))
<span class="hljs-keyword">var</span> msgpackDb, _ = storm.Open(<span class="hljs-string">"msgpack.db"</span>, storm.Codec(msgpack.Codec))
</code></pre>
<p><strong>ทิป</strong>: การเพิ่มแท็ก Storm ให้กับไฟล์ Protobuf ที่ generate อาจจะยุ่งยาก วิธีที่ดีคือใช้ <a href="https://github.com/favadi/protoc-go-inject-tag">เครื่องมือนี้</a> เพื่อ inject แท็กในขั้นตอน compile</p>
<h4>ใช้การเชื่อมต่อ Bolt ที่มีอยู่แล้ว</h4>
<p>คุณสามารถใช้การเชื่อมต่อที่มีอยู่แล้วและส่งให้ Storm ได้</p>
<pre><code class="language-go hljs">bDB, _ := bolt.Open(filepath.Join(dir, <span class="hljs-string">"bolt.db"</span>), <span class="hljs-number">0600</span>, &amp;bolt.Options{Timeout: <span class="hljs-number">10</span> * time.Second})
db := storm.Open(<span class="hljs-string">"my.db"</span>, storm.UseDB(bDB))
</code></pre>
<h4>โหมด Batch</h4>
<p>สามารถเปิดโหมด batch เพื่อเร่งความเร็วการเขียนข้อมูลพร้อมกันหลายๆ รายการ (ดู <a href="https://github.com/coreos/bbolt#batch-read-write-transactions">Batch read-write transactions</a>)</p>
<pre><code class="language-go hljs">db := storm.Open(<span class="hljs-string">"my.db"</span>, storm.Batch())
</code></pre>
<h2>Nodes และ nested buckets</h2>
<p>Storm ใช้ประโยชน์จากฟีเจอร์ nested buckets ของ BoltDB โดยใช้ <code>storm.Node</code><br><code>storm.Node</code> คืออ็อบเจ็กต์ที่ใช้โดย <code>storm.DB</code> สำหรับจัดการ bucket<br>เพื่อสร้าง nested bucket และใช้ API เดียวกับ <code>storm.DB</code> สามารถใช้เมธอด <code>DB.From</code></p>
<pre><code class="language-go hljs">repo := db.From(<span class="hljs-string">"repo"</span>)

err := repo.Save(&amp;Issue{
  Title: <span class="hljs-string">"I want more features"</span>,
  Author: user.ID,
})

err = repo.Save(newRelease(<span class="hljs-string">"0.10"</span>))

<span class="hljs-keyword">var</span> issues []Issue
err = repo.Find(<span class="hljs-string">"Author"</span>, user.ID, &amp;issues)

<span class="hljs-keyword">var</span> release Release
err = repo.One(<span class="hljs-string">"Tag"</span>, <span class="hljs-string">"0.10"</span>, &amp;release)
</code></pre>
<p>คุณยังสามารถ chain node เพื่อสร้างลำดับชั้นได้</p>
<pre><code class="language-go hljs">chars := db.From(<span class="hljs-string">"characters"</span>)
heroes := chars.From(<span class="hljs-string">"heroes"</span>)
enemies := chars.From(<span class="hljs-string">"enemies"</span>)

items := db.From(<span class="hljs-string">"items"</span>)
potions := items.From(<span class="hljs-string">"consumables"</span>).From(<span class="hljs-string">"medicine"</span>).From(<span class="hljs-string">"potions"</span>)
</code></pre>
<p>คุณยังสามารถส่งลำดับชั้นทั้งหมดเป็น argument ให้ <code>From</code> ได้เช่นกัน:</p>
<pre><code class="language-go hljs">privateNotes := db.From(<span class="hljs-string">"notes"</span>, <span class="hljs-string">"private"</span>)
workNotes :=  db.From(<span class="hljs-string">"notes"</span>, <span class="hljs-string">"work"</span>)
</code></pre>
<h3>ตัวเลือก Node</h3>
<p>Node ก็สามารถตั้งค่าตัวเลือกต่างๆ ได้เช่นกัน การเปิด option บน Node จะสร้างสำเนาใหม่เสมอ ดังนั้น Node จึง thread-safe</p>
<pre><code class="language-go hljs">n := db.From(<span class="hljs-string">"my-node"</span>)
</code></pre>
<p>ให้ bolt.Tx transaction กับ Node</p>
<pre><code class="language-go hljs">n = n.WithTransaction(tx)
</code></pre>
<p>เปิด batch mode</p>
<pre><code class="language-go hljs">n = n.WithBatch(<span class="hljs-literal">true</span>)
</code></pre>
<p>ใช้ Codec</p>
<pre><code class="language-go hljs">n = n.WithCodec(gob.Codec)
</code></pre>
<h2>Simple Key/Value store</h2>
<p>Storm สามารถใช้เป็น key/value store ที่เรียบง่ายและมีความเสถียร สามารถเก็บอะไรก็ได้<br>key และ value สามารถเป็นชนิดใดก็ได้ตราบใดที่ key ไม่ใช่ค่า zero value</p>
<p>การบันทึกข้อมูล :</p>
<pre><code class="language-go hljs">db.Set(<span class="hljs-string">"logs"</span>, time.Now(), <span class="hljs-string">"I'm eating my breakfast man"</span>)
db.Set(<span class="hljs-string">"sessions"</span>, bson.NewObjectId(), &amp;someUser)
db.Set(<span class="hljs-string">"weird storage"</span>, <span class="hljs-string">"754-3010"</span>, <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{}{
  <span class="hljs-string">"hair"</span>: <span class="hljs-string">"blonde"</span>,
  <span class="hljs-string">"likes"</span>: []<span class="hljs-type">string</span>{<span class="hljs-string">"cheese"</span>, <span class="hljs-string">"star wars"</span>},
})
</code></pre>
<p>การดึงข้อมูล :</p>
<pre><code class="language-go hljs">user := User{}
db.Get(<span class="hljs-string">"sessions"</span>, someObjectId, &amp;user)

<span class="hljs-keyword">var</span> details <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{}
db.Get(<span class="hljs-string">"weird storage"</span>, <span class="hljs-string">"754-3010"</span>, &amp;details)
</code></pre>
<pre><code class="hljs language-vbnet">db.<span class="hljs-keyword">Get</span>(<span class="hljs-string">"sessions"</span>, someObjectId, &amp;details)
</code></pre>
<p>การลบข้อมูล :</p>
<pre><code class="language-go hljs">db.Delete(<span class="hljs-string">"sessions"</span>, someObjectId)
db.Delete(<span class="hljs-string">"weird storage"</span>, <span class="hljs-string">"754-3010"</span>)
</code></pre>
<p>คุณสามารถค้นหาวิธีการที่มีประโยชน์อื่น ๆ ได้ใน <a href="https://godoc.org/github.com/asdine/storm#KeyValueStore">เอกสารประกอบ</a></p>
<h2>BoltDB</h2>
<p>BoltDB ยังคงสามารถเข้าถึงได้ง่ายและสามารถใช้งานได้ตามปกติ</p>
<pre><code class="language-go hljs">db.Bolt.View(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(tx *bolt.Tx)</span></span> <span class="hljs-type">error</span> {
  bucket := tx.Bucket([]<span class="hljs-type">byte</span>(<span class="hljs-string">"my bucket"</span>))
  val := bucket.Get([]<span class="hljs-type">byte</span>(<span class="hljs-string">"any id"</span>))
  fmt.Println(<span class="hljs-type">string</span>(val))
  <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
})
</code></pre>
<p>ธุรกรรมสามารถส่งต่อไปยัง Storm ได้เช่นกัน</p>
<pre><code class="language-go hljs">db.Bolt.Update(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(tx *bolt.Tx)</span></span> <span class="hljs-type">error</span> {
  ...
  dbx := db.WithTransaction(tx)
  err = dbx.Save(&amp;user)
  ...
  <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
})
</code></pre>
<h2>ใบอนุญาต</h2>
<p>MIT</p>
<h2>เครดิต</h2>
<ul>
<li><a href="https://github.com/asdine">Asdine El Hrychy</a></li>
<li><a href="https://github.com/bep">Bjørn Erik Pedersen</a></li>
</ul>
<hr>
<p>Tranlated By <a href="https://github.com/OpenAiTx/OpenAiTx">Open Ai Tx</a> | Last indexed: 2025-06-11</p>
<hr>
</div>
    </div>

    <footer class="footer">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank">Open AI Tx</a>
    </footer>
    <!-- Default Statcounter code for openaitx
https://openaitx.github.io/ -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async=""></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>
    <!-- End of Statcounter Code -->
    <script src="view.js"></script>


</body></html>