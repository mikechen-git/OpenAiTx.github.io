<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Storm - asdine/storm</title>

    <!-- Primary Meta Tags -->
    <meta name="title" content="Storm - asdine/storm">
    <meta name="description" content="asdine/storm - GitHub repository documentation and information">
    <meta name="keywords" content="asdine, storm, GitHub, repository, documentation">
    <meta name="author" content="Open AI Tx">
    <meta name="robots" content="index, follow">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://openaitx.github.io/projects/asdine/storm/README-fa.html">
    <meta property="og:title" content="Storm - asdine/storm">
    <meta property="og:description" content="asdine/storm - GitHub repository documentation and information">
    <meta property="og:image" content="https://openaitx.github.io/logo_crop.png">

    <!-- Favicon -->
    <link rel="icon" type="image/jpeg" href="/icon.jpg">
    <link rel="apple-touch-icon" href="/icon.jpg">

    <!-- Marked.js for Markdown rendering -->
    <script type="text/javascript" async="" src="https://www.statcounter.com/counter/recorder.js"></script><script src="/js/marked.min.js?v=20250613"></script>
    <!-- Highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="/css/github.min.css?v=20250613">
    <script src="/js/highlight.min.js?v=20250613"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/view.css?v=20250613">
    <style>
        /* Layout */
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .main-container {
            margin: 0 auto;
            width: 100%;
            max-width: 980px;
            padding: 0 20px;
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 0 15px;
            }
        }

        /* Image size restrictions */
        .markdown-body img {
            max-width: 100%;
            height: auto;
        }

        /* Existing styles */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: #f6f8fa;
            border-bottom: 1px solid #e1e4e8;
            position: relative;
        }

        .back-button {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #0366d6;
            text-decoration: none;
            display: flex;
            align-items: center;
            font-size: 14px;
            padding: 5px 10px;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            background-color: #fff;
        }

        .back-button:hover {
            background-color: #f6f8fa;
            border-color: #0366d6;
        }

        .back-button::before {
            content: "←";
            margin-right: 5px;
            font-size: 16px;
        }

        .header .links {
            margin-top: 10px;
            font-size: 16px;
        }

        .header .links a {
            color: #0366d6;
            text-decoration: none;
            margin-left: 5px;
        }

        .header .links a:hover {
            text-decoration: underline;
        }
        
        /* Language badges styles */
        .language-badges {
            margin-top: 15px;
            text-align: center;
        }
        .language-badges a {
            display: inline-block;
            margin: 2px;
            text-decoration: none;
        }
        .language-badges img {
            height: 20px;
            border-radius: 3px;
        }
        .language-badges a:hover img {
            opacity: 0.8;
        }
    </style>
</head>

<body>
    <div class="header">
        <div class="links">
            GitHub Repository: <a href="https://github.com/asdine/storm" id="githubRepoLink" target="_blank">asdine/storm</a>
        </div>
        <div class="language-badges" id="languageBadges"><a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=en"><img src="https://img.shields.io/badge/EN-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=zh-CN"><img src="https://img.shields.io/badge/简中-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=zh-TW"><img src="https://img.shields.io/badge/繁中-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=ja"><img src="https://img.shields.io/badge/日本語-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=ko"><img src="https://img.shields.io/badge/한국어-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=th"><img src="https://img.shields.io/badge/ไทย-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=fr"><img src="https://img.shields.io/badge/Français-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=de"><img src="https://img.shields.io/badge/Deutsch-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=es"><img src="https://img.shields.io/badge/Español-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=it"><img src="https://img.shields.io/badge/Italiano-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=ru"><img src="https://img.shields.io/badge/Русский-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=pt"><img src="https://img.shields.io/badge/Português-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=nl"><img src="https://img.shields.io/badge/Nederlands-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=pl"><img src="https://img.shields.io/badge/Polski-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=ar"><img src="https://img.shields.io/badge/العربية-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=tr"><img src="https://img.shields.io/badge/Türkçe-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=vi"><img src="https://img.shields.io/badge/Tiếng Việt-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=hi"><img src="https://img.shields.io/badge/हिंदी-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=fa"><img src="https://img.shields.io/badge/فارسی-white" alt="version"></a> <a href="https://openaitx.github.io/view.html?user=asdine&amp;project=storm&amp;lang=id"><img src="https://img.shields.io/badge/Bahasa Indonesia-white" alt="version"></a></div>
    </div>

    <div class="main-container">
        <div class="markdown-body" id="content"><h1>Storm</h1>
<p><a href="https://travis-ci.org/asdine/storm"><img src="https://travis-ci.org/asdine/storm.svg" alt="Build Status"></a><br><a href="https://godoc.org/github.com/asdine/storm"><img src="https://godoc.org/github.com/asdine/storm?status.svg" alt="GoDoc"></a></p>
<p>استورم یک ابزار ساده و قدرتمند برای <a href="https://github.com/coreos/bbolt">BoltDB</a> است. به طور کلی، استورم اندیس‌ها، مجموعه‌ای گسترده از متدها برای ذخیره و واکشی داده‌ها، یک سیستم پرس‌وجوی پیشرفته و امکانات بسیار دیگری را فراهم می‌کند.</p>
<p>علاوه بر مثال‌های زیر، <a href="https://godoc.org/github.com/asdine/storm#pkg-examples">مثال‌های GoDoc</a> را نیز ببینید.</p>
<p><em>برای پرس‌وجوهای پیشرفته‌تر و پشتیبانی از <a href="https://github.com/dgraph-io/badger">Badger</a>، به <a href="https://github.com/asdine/genji">Genji</a> نیز مراجعه کنید</em></p>
<h2>فهرست مطالب</h2>
<ul>
<li><a href="#getting-started">شروع کار</a></li>
<li><a href="#import-storm">ایمپورت کردن استورم</a></li>
<li><a href="#open-a-database">باز کردن یک پایگاه داده</a></li>
<li><a href="#simple-crud-system">سیستم CRUD ساده</a><ul>
<li><a href="#declare-your-structures">تعریف ساختارها</a></li>
<li><a href="#save-your-object">ذخیره شیء خود</a><ul>
<li><a href="#auto-increment">افزایش خودکار</a></li>
</ul>
</li>
<li><a href="#simple-queries">پرس‌وجوهای ساده</a><ul>
<li><a href="#fetch-one-object">واکشی یک شیء</a></li>
<li><a href="#fetch-multiple-objects">واکشی چندین شیء</a></li>
<li><a href="#fetch-all-objects">واکشی همه اشیاء</a></li>
<li><a href="#fetch-all-objects-sorted-by-index">واکشی همه اشیاء بر اساس اندیس مرتب شده</a></li>
<li><a href="#fetch-a-range-of-objects">واکشی محدوده‌ای از اشیاء</a></li>
<li><a href="#fetch-objects-by-prefix">واکشی اشیاء با پیشوند</a></li>
<li><a href="#skip-limit-and-reverse">Skip، Limit و Reverse</a></li>
<li><a href="#delete-an-object">حذف یک شیء</a></li>
<li><a href="#update-an-object">به‌روزرسانی یک شیء</a></li>
<li><a href="#initialize-buckets-and-indexes-before-saving-an-object">مقدارسازی سطل‌ها و اندیس‌ها پیش از ذخیره شیء</a></li>
<li><a href="#drop-a-bucket">حذف یک سطل</a></li>
<li><a href="#re-index-a-bucket">بازسازی اندیس یک سطل</a></li>
</ul>
</li>
<li><a href="#advanced-queries">پرس‌وجوهای پیشرفته</a></li>
<li><a href="#transactions">تراکنش‌ها</a></li>
<li><a href="#options">گزینه‌ها</a><ul>
<li><a href="#boltoptions">BoltOptions</a></li>
<li><a href="#marshalunmarshaler">MarshalUnmarshaler</a><ul>
<li><a href="#provided-codecs">کدک‌های ارائه شده</a></li>
</ul>
</li>
<li><a href="#use-existing-bolt-connection">استفاده از اتصال Bolt موجود</a></li>
<li><a href="#batch-mode">حالت Batch</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#nodes-and-nested-buckets">گره‌ها و سطل‌های تو در تو</a><ul>
<li><a href="#node-options">گزینه‌های گره</a></li>
</ul>
</li>
<li><a href="#simple-keyvalue-store">ذخیره‌ساز ساده کلید/مقدار</a></li>
<li><a href="#boltdb">BoltDB</a></li>
<li><a href="#license">مجوز</a></li>
<li><a href="#credits">اعتبارات</a></li>
</ul>
<h2>شروع کار</h2>
<pre><code class="language-bash hljs">GO111MODULE=on go get -u github.com/asdine/storm/v3
</code></pre>
<h2>ایمپورت کردن استورم</h2>
<pre><code class="language-go hljs"><span class="hljs-keyword">import</span> <span class="hljs-string">"github.com/asdine/storm/v3"</span>
</code></pre>
<h2>باز کردن یک پایگاه داده</h2>
<p>روش سریع برای باز کردن یک پایگاه داده</p>
<pre><code class="language-go hljs">db, err := storm.Open(<span class="hljs-string">"my.db"</span>)

<span class="hljs-keyword">defer</span> db.Close()
</code></pre>
<p><code>Open</code> می‌تواند گزینه‌های متعددی برای سفارشی‌سازی نحوه عملکرد دریافت کند. <a href="#options">گزینه‌ها</a> را در ادامه ببینید</p>
<h2>سیستم CRUD ساده</h2>
<h3>تعریف ساختارها</h3>
<pre><code class="language-go hljs"><span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
  ID <span class="hljs-type">int</span> <span class="hljs-comment">// کلید اصلی</span>
  Group <span class="hljs-type">string</span> <span class="hljs-string">`storm:"index"`</span> <span class="hljs-comment">// این فیلد ایندکس خواهد شد</span>
  Email <span class="hljs-type">string</span> <span class="hljs-string">`storm:"unique"`</span> <span class="hljs-comment">// این فیلد با محدودیت یکتا ایندکس خواهد شد</span>
  Name <span class="hljs-type">string</span> <span class="hljs-comment">// این فیلد ایندکس نخواهد شد</span>
  Age <span class="hljs-type">int</span> <span class="hljs-string">`storm:"index"`</span>
}
</code></pre>
<p>کلید اصلی می‌تواند از هر نوعی باشد به شرط اینکه مقدار صفر نباشد. استورم به دنبال تگ <code>id</code> می‌گردد؛ اگر پیدا نشود به دنبال فیلدی با نام <code>ID</code> می‌گردد.</p>
<pre><code class="language-go hljs"><span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
  ThePrimaryKey <span class="hljs-type">string</span> <span class="hljs-string">`storm:"id"`</span><span class="hljs-comment">// کلید اصلی</span>
  Group <span class="hljs-type">string</span> <span class="hljs-string">`storm:"index"`</span> <span class="hljs-comment">// این فیلد ایندکس خواهد شد</span>
  Email <span class="hljs-type">string</span> <span class="hljs-string">`storm:"unique"`</span> <span class="hljs-comment">// این فیلد با محدودیت یکتا ایندکس خواهد شد</span>
  Name <span class="hljs-type">string</span> <span class="hljs-comment">// این فیلد ایندکس نخواهد شد</span>
}
</code></pre>
<p>استورم تگ‌ها را در ساختارهای تو در تو با تگ <code>inline</code> مدیریت می‌کند</p>
<pre><code class="language-go hljs"><span class="hljs-keyword">type</span> Base <span class="hljs-keyword">struct</span> {
  Ident bson.ObjectId <span class="hljs-string">`storm:"id"`</span>
}

<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
  Base      <span class="hljs-string">`storm:"inline"`</span>
  Group     <span class="hljs-type">string</span> <span class="hljs-string">`storm:"index"`</span>
  Email     <span class="hljs-type">string</span> <span class="hljs-string">`storm:"unique"`</span>
  Name      <span class="hljs-type">string</span>
  CreatedAt time.Time <span class="hljs-string">`storm:"index"`</span>
}
</code></pre>
<h3>ذخیره شیء خود</h3>
<pre><code class="language-go hljs">user := User{
  ID: <span class="hljs-number">10</span>,
  Group: <span class="hljs-string">"staff"</span>,
  Email: <span class="hljs-string">"john@provider.com"</span>,
  Name: <span class="hljs-string">"John"</span>,
  Age: <span class="hljs-number">21</span>,
  CreatedAt: time.Now(),
}

err := db.Save(&amp;user)
<span class="hljs-comment">// err == nil</span>

user.ID++
err = db.Save(&amp;user)
<span class="hljs-comment">// err == storm.ErrAlreadyExists</span>
</code></pre>
<p>همین.</p>
<p><code>Save</code> تمام اندیس‌ها و سطل‌های مورد نیاز را ایجاد یا به‌روزرسانی می‌کند، محدودیت‌های یکتا را بررسی کرده و شیء را در فروشگاه ذخیره می‌کند.</p>
<h4>افزایش خودکار</h4>
<p>استورم می‌تواند مقادیر عدد صحیح را به صورت خودکار افزایش دهد تا هنگام ذخیره اشیاء نگرانی از این بابت نداشته باشید. همچنین مقدار جدید به طور خودکار در فیلد شما قرار می‌گیرد.</p>
<pre><code class="language-go hljs">
<span class="hljs-keyword">type</span> Product <span class="hljs-keyword">struct</span> {
  Pk                  <span class="hljs-type">int</span> <span class="hljs-string">`storm:"id,increment"`</span> <span class="hljs-comment">// کلید اصلی با افزایش خودکار</span>
  Name                <span class="hljs-type">string</span>
  IntegerField        <span class="hljs-type">uint64</span> <span class="hljs-string">`storm:"increment"`</span>
  IndexedIntegerField <span class="hljs-type">uint32</span> <span class="hljs-string">`storm:"index,increment"`</span>
  UniqueIntegerField  <span class="hljs-type">int16</span>  <span class="hljs-string">`storm:"unique,increment=100"`</span> <span class="hljs-comment">// مقدار اولیه را می‌توان تعیین کرد</span>
}

p := Product{Name: <span class="hljs-string">"Vaccum Cleaner"</span>}

fmt.Println(p.Pk)
fmt.Println(p.IntegerField)
fmt.Println(p.IndexedIntegerField)
fmt.Println(p.UniqueIntegerField)
<span class="hljs-comment">// 0</span>
<span class="hljs-comment">// 0</span>
<span class="hljs-comment">// 0</span>
<span class="hljs-comment">// 0</span>

_ = db.Save(&amp;p)

fmt.Println(p.Pk)
fmt.Println(p.IntegerField)
fmt.Println(p.IndexedIntegerField)
fmt.Println(p.UniqueIntegerField)
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// 100</span>
</code></pre>
<h3>پرس‌وجوهای ساده</h3>
<p>هر شیء، فارغ از ایندکس بودن یا نبودن، قابل واکشی است. استورم در صورت وجود، از اندیس‌ها استفاده می‌کند و در غیر این صورت از <a href="#advanced-queries">سیستم پرس‌وجو</a> بهره می‌برد.</p>
<h4>واکشی یک شیء</h4>
<pre><code class="language-go hljs"><span class="hljs-keyword">var</span> user User
err := db.One(<span class="hljs-string">"Email"</span>, <span class="hljs-string">"john@provider.com"</span>, &amp;user)
<span class="hljs-comment">// err == nil</span>

err = db.One(<span class="hljs-string">"Name"</span>, <span class="hljs-string">"John"</span>, &amp;user)
<span class="hljs-comment">// err == nil</span>

err = db.One(<span class="hljs-string">"Name"</span>, <span class="hljs-string">"Jack"</span>, &amp;user)
<span class="hljs-comment">// err == storm.ErrNotFound</span>
</code></pre>
<h4>واکشی چندین شیء</h4>
<pre><code class="language-go hljs"><span class="hljs-keyword">var</span> users []User
err := db.Find(<span class="hljs-string">"Group"</span>, <span class="hljs-string">"staff"</span>, &amp;users)
</code></pre>
<h4>واکشی همه اشیاء</h4>
<pre><code class="language-go hljs"><span class="hljs-keyword">var</span> users []User
err := db.All(&amp;users)
</code></pre>
<h4>واکشی همه اشیاء مرتب‌شده بر اساس ایندکس</h4>
<pre><code class="language-go hljs"><span class="hljs-keyword">var</span> users []User
err := db.AllByIndex(<span class="hljs-string">"CreatedAt"</span>, &amp;users)
</code></pre>
<h4>واکشی محدوده‌ای از اشیاء</h4>
<pre><code class="language-go hljs"><span class="hljs-keyword">var</span> users []User
err := db.Range(<span class="hljs-string">"Age"</span>, <span class="hljs-number">10</span>, <span class="hljs-number">21</span>, &amp;users)
</code></pre>
<h4>واکشی اشیاء بر اساس پیشوند</h4>
<pre><code class="language-go hljs"><span class="hljs-keyword">var</span> users []User
err := db.Prefix(<span class="hljs-string">"Name"</span>, <span class="hljs-string">"Jo"</span>, &amp;users)
</code></pre>
<h4>رد کردن، محدود کردن و معکوس کردن</h4>
<pre><code class="language-go hljs"><span class="hljs-keyword">var</span> users []User
err := db.Find(<span class="hljs-string">"Group"</span>, <span class="hljs-string">"staff"</span>, &amp;users, storm.Skip(<span class="hljs-number">10</span>))
err = db.Find(<span class="hljs-string">"Group"</span>, <span class="hljs-string">"staff"</span>, &amp;users, storm.Limit(<span class="hljs-number">10</span>))
err = db.Find(<span class="hljs-string">"Group"</span>, <span class="hljs-string">"staff"</span>, &amp;users, storm.Reverse())
err = db.Find(<span class="hljs-string">"Group"</span>, <span class="hljs-string">"staff"</span>, &amp;users, storm.Limit(<span class="hljs-number">10</span>), storm.Skip(<span class="hljs-number">10</span>), storm.Reverse())

err = db.All(&amp;users, storm.Limit(<span class="hljs-number">10</span>), storm.Skip(<span class="hljs-number">10</span>), storm.Reverse())
err = db.AllByIndex(<span class="hljs-string">"CreatedAt"</span>, &amp;users, storm.Limit(<span class="hljs-number">10</span>), storm.Skip(<span class="hljs-number">10</span>), storm.Reverse())
err = db.Range(<span class="hljs-string">"Age"</span>, <span class="hljs-number">10</span>, <span class="hljs-number">21</span>, &amp;users, storm.Limit(<span class="hljs-number">10</span>), storm.Skip(<span class="hljs-number">10</span>), storm.Reverse())
</code></pre>
<h4>حذف یک شیء</h4>
<pre><code class="language-go hljs">err := db.DeleteStruct(&amp;user)
</code></pre>
<h4>به‌روزرسانی یک شیء</h4>
<pre><code class="language-go hljs"><span class="hljs-comment">// به‌روزرسانی چندین فیلد</span>
<span class="hljs-comment">// فقط برای فیلدهایی که مقدار صفر ندارند کار می‌کند (مثلاً Name نمی‌تواند "" باشد، Age نمی‌تواند 0 باشد)</span>
err := db.Update(&amp;User{ID: <span class="hljs-number">10</span>, Name: <span class="hljs-string">"Jack"</span>, Age: <span class="hljs-number">45</span>})

<span class="hljs-comment">// به‌روزرسانی یک فیلد</span>
<span class="hljs-comment">// برای فیلدهایی با مقدار صفر نیز کار می‌کند (0، false، "" و ...)</span>
err := db.UpdateField(&amp;User{ID: <span class="hljs-number">10</span>}, <span class="hljs-string">"Age"</span>, <span class="hljs-number">0</span>)
</code></pre>
<h4>مقداردهی اولیه باکت‌ها و ایندکس‌ها قبل از ذخیره یک شیء</h4>
<pre><code class="language-go hljs">err := db.Init(&amp;User{})
</code></pre>
<p>مفید هنگام شروع برنامه شما</p>
<h4>حذف یک باکت</h4>
<p>با استفاده از ساختار</p>
<pre><code class="language-go hljs">err := db.Drop(&amp;User)
</code></pre>
<p>با استفاده از نام باکت</p>
<pre><code class="language-go hljs">err := db.Drop(<span class="hljs-string">"User"</span>)
</code></pre>
<h4>بازایندکس کردن یک باکت</h4>
<pre><code class="language-go hljs">err := db.ReIndex(&amp;User{})
</code></pre>
<p>مفید هنگامی که ساختار تغییر کرده است</p>
<h3>کوئری‌های پیشرفته</h3>
<p>برای کوئری‌های پیچیده‌تر، می‌توانید از متد <code>Select</code> استفاده کنید.<br><code>Select</code> هر تعداد <a href="https://godoc.org/github.com/asdine/storm/q#Matcher"><code>Matcher</code></a> از پکیج <a href="https://godoc.org/github.com/asdine/storm/q"><code>q</code></a> را می‌پذیرد.</p>
<p>در اینجا برخی Matcherهای متداول آمده است:</p>
<pre><code class="language-go hljs"><span class="hljs-comment">// تساوی</span>
q.Eq(<span class="hljs-string">"Name"</span>, John)

<span class="hljs-comment">// بزرگتر به‌صورت سختگیرانه</span>
q.Gt(<span class="hljs-string">"Age"</span>, <span class="hljs-number">7</span>)

<span class="hljs-comment">// کوچکتر یا مساوی</span>
q.Lte(<span class="hljs-string">"Age"</span>, <span class="hljs-number">77</span>)

<span class="hljs-comment">// رجکس با نامی که با حرف D شروع می‌شود</span>
q.Re(<span class="hljs-string">"Name"</span>, <span class="hljs-string">"^D"</span>)

<span class="hljs-comment">// در میان یک آرایه از مقادیر</span>
q.In(<span class="hljs-string">"Group"</span>, []<span class="hljs-type">string</span>{<span class="hljs-string">"Staff"</span>, <span class="hljs-string">"Admin"</span>})

<span class="hljs-comment">// مقایسه فیلدها</span>
q.EqF(<span class="hljs-string">"FieldName"</span>, <span class="hljs-string">"SecondFieldName"</span>)
q.LtF(<span class="hljs-string">"FieldName"</span>, <span class="hljs-string">"SecondFieldName"</span>)
q.GtF(<span class="hljs-string">"FieldName"</span>, <span class="hljs-string">"SecondFieldName"</span>)
q.LteF(<span class="hljs-string">"FieldName"</span>, <span class="hljs-string">"SecondFieldName"</span>)
q.GteF(<span class="hljs-string">"FieldName"</span>, <span class="hljs-string">"SecondFieldName"</span>)
</code></pre>
<p>Matcherها می‌توانند با <code>And</code>، <code>Or</code> و <code>Not</code> ترکیب شوند:</p>
<pre><code class="language-go hljs">
<span class="hljs-comment">// اگر همه تطابق داشته باشند</span>
q.And(
  q.Gt(<span class="hljs-string">"Age"</span>, <span class="hljs-number">7</span>),
  q.Re(<span class="hljs-string">"Name"</span>, <span class="hljs-string">"^D"</span>)
)

<span class="hljs-comment">// اگر یکی از آن‌ها تطابق داشته باشد</span>
q.Or(
  q.Re(<span class="hljs-string">"Name"</span>, <span class="hljs-string">"^A"</span>),
  q.Not(
    q.Re(<span class="hljs-string">"Name"</span>, <span class="hljs-string">"^B"</span>)
  ),
  q.Re(<span class="hljs-string">"Name"</span>, <span class="hljs-string">"^C"</span>),
  q.In(<span class="hljs-string">"Group"</span>, []<span class="hljs-type">string</span>{<span class="hljs-string">"Staff"</span>, <span class="hljs-string">"Admin"</span>}),
  q.And(
    q.StrictEq(<span class="hljs-string">"Password"</span>, []<span class="hljs-type">byte</span>(password)),
    q.Eq(<span class="hljs-string">"Registered"</span>, <span class="hljs-literal">true</span>)
  )
)
</code></pre>
<p>می‌توانید لیست کامل را در <a href="https://godoc.org/github.com/asdine/storm/q#Matcher">مستندات</a> پیدا کنید.</p>
<p><code>Select</code> هر تعداد Matcher را می‌پذیرد و آن‌ها را در یک <code>q.And()</code> قرار می‌دهد، بنابراین لازم نیست آن را مشخص کنید. این متد یک نوع <a href="https://godoc.org/github.com/asdine/storm#Query"><code>Query</code></a> بازمی‌گرداند.</p>
<pre><code class="language-go hljs">query := db.Select(q.Gte(<span class="hljs-string">"Age"</span>, <span class="hljs-number">7</span>), q.Lte(<span class="hljs-string">"Age"</span>, <span class="hljs-number">77</span>))
</code></pre>
<p>نوع <code>Query</code> شامل متدهایی برای فیلتر و مرتب‌سازی رکوردها است.</p>
<pre><code class="language-go hljs"><span class="hljs-comment">// محدود کردن</span>
query = query.Limit(<span class="hljs-number">10</span>)

<span class="hljs-comment">// رد کردن</span>
query = query.Skip(<span class="hljs-number">20</span>)

<span class="hljs-comment">// می‌توان فراخوانی‌ها را زنجیره کرد</span>
query = query.Limit(<span class="hljs-number">10</span>).Skip(<span class="hljs-number">20</span>).OrderBy(<span class="hljs-string">"Age"</span>).Reverse()
</code></pre>
<p>همچنین برای مشخص کردن نحوه واکشی رکوردها.</p>
<pre><code class="language-go hljs"><span class="hljs-keyword">var</span> users []User
err = query.Find(&amp;users)

<span class="hljs-keyword">var</span> user User
err = query.First(&amp;user)
</code></pre>
<p>مثال‌هایی با <code>Select</code>:</p>
<pre><code class="language-go hljs"><span class="hljs-comment">// یافتن همه کاربران با شناسه بین 10 تا 100</span>
err = db.Select(q.Gte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">10</span>), q.Lte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">100</span>)).Find(&amp;users)

<span class="hljs-comment">// Matcherهای تو در تو</span>
err = db.Select(q.Or(
  q.Gt(<span class="hljs-string">"ID"</span>, <span class="hljs-number">50</span>),
  q.Lt(<span class="hljs-string">"Age"</span>, <span class="hljs-number">21</span>),
  q.And(
    q.Eq(<span class="hljs-string">"Group"</span>, <span class="hljs-string">"admin"</span>),
    q.Gte(<span class="hljs-string">"Age"</span>, <span class="hljs-number">21</span>),
  ),
)).Find(&amp;users)

query := db.Select(q.Gte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">10</span>), q.Lte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">100</span>)).Limit(<span class="hljs-number">10</span>).Skip(<span class="hljs-number">5</span>).Reverse().OrderBy(<span class="hljs-string">"Age"</span>, <span class="hljs-string">"Name"</span>)

<span class="hljs-comment">// یافتن چندین رکورد</span>
err = query.Find(&amp;users)
<span class="hljs-comment">// یا</span>
err = db.Select(q.Gte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">10</span>), q.Lte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">100</span>)).Limit(<span class="hljs-number">10</span>).Skip(<span class="hljs-number">5</span>).Reverse().OrderBy(<span class="hljs-string">"Age"</span>, <span class="hljs-string">"Name"</span>).Find(&amp;users)
</code></pre>
<pre><code class="language-go hljs"><span class="hljs-comment">// یافتن اولین رکورد</span>
err = query.First(&amp;user)
<span class="hljs-comment">// یا</span>
err = db.Select(q.Gte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">10</span>), q.Lte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">100</span>)).Limit(<span class="hljs-number">10</span>).Skip(<span class="hljs-number">5</span>).Reverse().OrderBy(<span class="hljs-string">"Age"</span>, <span class="hljs-string">"Name"</span>).First(&amp;user)

<span class="hljs-comment">// حذف تمامی رکوردهای مطابق</span>
err = query.Delete(<span class="hljs-built_in">new</span>(User))

<span class="hljs-comment">// دریافت رکوردها به صورت یکی یکی (مفید زمانی که سطل حاوی تعداد زیادی رکورد است)</span>
query = db.Select(q.Gte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">10</span>),q.Lte(<span class="hljs-string">"ID"</span>, <span class="hljs-number">100</span>)).OrderBy(<span class="hljs-string">"Age"</span>, <span class="hljs-string">"Name"</span>)

err = query.Each(<span class="hljs-built_in">new</span>(User), <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(record <span class="hljs-keyword">interface</span>{})</span></span> <span class="hljs-type">error</span>) {
  u := record.(*User)
  ...
  <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}
</code></pre>
<p>برای لیست کامل متدها به <a href="https://godoc.org/github.com/asdine/storm#Query">مستندات</a> مراجعه کنید.</p>
<h3>تراکنش‌ها</h3>
<pre><code class="language-go hljs">tx, err := db.Begin(<span class="hljs-literal">true</span>)
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
  <span class="hljs-keyword">return</span> err
}
<span class="hljs-keyword">defer</span> tx.Rollback()

accountA.Amount -= <span class="hljs-number">100</span>
accountB.Amount += <span class="hljs-number">100</span>

err = tx.Save(accountA)
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
  <span class="hljs-keyword">return</span> err
}

err = tx.Save(accountB)
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
  <span class="hljs-keyword">return</span> err
}

<span class="hljs-keyword">return</span> tx.Commit()
</code></pre>
<h3>گزینه‌ها</h3>
<p>گزینه‌های استورم توابعی هستند که هنگام ساخت نمونه‌ی استورم می‌توانید آنها را ارسال کنید. هر تعداد گزینه می‌توانید ارسال نمایید.</p>
<h4>BoltOptions</h4>
<p>به طور پیش‌فرض، استورم دیتابیس را با مد <code>0600</code> و تایم‌اوت یک ثانیه باز می‌کند.<br>می‌توانید این رفتار را با استفاده از <code>BoltOptions</code> تغییر دهید.</p>
<pre><code class="language-go hljs">db, err := storm.Open(<span class="hljs-string">"my.db"</span>, storm.BoltOptions(<span class="hljs-number">0600</span>, &amp;bolt.Options{Timeout: <span class="hljs-number">1</span> * time.Second}))
</code></pre>
<h4>MarshalUnmarshaler</h4>
<p>برای ذخیره داده‌ها در BoltDB، استورم به طور پیش‌فرض آن را به صورت JSON مارشال می‌کند. اگر می‌خواهید این رفتار را تغییر دهید، می‌توانید یک کدک که <a href="https://godoc.org/github.com/asdine/storm/codec#MarshalUnmarshaler"><code>codec.MarshalUnmarshaler</code></a> را پیاده‌سازی می‌کند از طریق گزینه‌ی <a href="https://godoc.org/github.com/asdine/storm#Codec"><code>storm.Codec</code></a> ارسال کنید:</p>
<pre><code class="language-go hljs">db := storm.Open(<span class="hljs-string">"my.db"</span>, storm.Codec(myCodec))
</code></pre>
<h5>کدک‌های فراهم‌شده</h5>
<p>شما به راحتی می‌توانید <code>MarshalUnmarshaler</code> خود را پیاده‌سازی کنید، اما استورم به طور پیش‌فرض از <a href="https://godoc.org/github.com/asdine/storm/codec/json">JSON</a> (پیش‌فرض)، <a href="https://godoc.org/github.com/asdine/storm/codec/gob">GOB</a>،  <a href="https://godoc.org/github.com/asdine/storm/codec/sereal">Sereal</a>، <a href="https://godoc.org/github.com/asdine/storm/codec/protobuf">Protocol Buffers</a> و <a href="https://godoc.org/github.com/asdine/storm/codec/msgpack">MessagePack</a> پشتیبانی می‌کند.</p>
<p>این کدک‌ها را می‌توانید با import کردن پکیج مربوطه و استفاده از آن به عنوان کدک تنظیم Storm استفاده کنید. مثال زیر همه واریانت‌ها را نشان می‌دهد (بدون هندل صحیح خطا):</p>
<pre><code class="language-go hljs"><span class="hljs-keyword">import</span> (
  <span class="hljs-string">"github.com/asdine/storm/v3"</span>
  <span class="hljs-string">"github.com/asdine/storm/v3/codec/gob"</span>
  <span class="hljs-string">"github.com/asdine/storm/v3/codec/json"</span>
  <span class="hljs-string">"github.com/asdine/storm/v3/codec/sereal"</span>
  <span class="hljs-string">"github.com/asdine/storm/v3/codec/protobuf"</span>
  <span class="hljs-string">"github.com/asdine/storm/v3/codec/msgpack"</span>
)

<span class="hljs-keyword">var</span> gobDb, _ = storm.Open(<span class="hljs-string">"gob.db"</span>, storm.Codec(gob.Codec))
<span class="hljs-keyword">var</span> jsonDb, _ = storm.Open(<span class="hljs-string">"json.db"</span>, storm.Codec(json.Codec))
<span class="hljs-keyword">var</span> serealDb, _ = storm.Open(<span class="hljs-string">"sereal.db"</span>, storm.Codec(sereal.Codec))
<span class="hljs-keyword">var</span> protobufDb, _ = storm.Open(<span class="hljs-string">"protobuf.db"</span>, storm.Codec(protobuf.Codec))
<span class="hljs-keyword">var</span> msgpackDb, _ = storm.Open(<span class="hljs-string">"msgpack.db"</span>, storm.Codec(msgpack.Codec))
</code></pre>
<p><strong>نکته</strong>: افزودن تگ‌های استورم به فایل‌های Protobuf تولید شده می‌تواند دشوار باشد. یک راه حل خوب استفاده از <a href="https://github.com/favadi/protoc-go-inject-tag">این ابزار</a> برای تزریق تگ‌ها هنگام کامپایل است.</p>
<h4>استفاده از اتصال موجود Bolt</h4>
<p>می‌توانید از یک اتصال موجود استفاده کرده و آن را به استورم ارسال کنید.</p>
<pre><code class="language-go hljs">bDB, _ := bolt.Open(filepath.Join(dir, <span class="hljs-string">"bolt.db"</span>), <span class="hljs-number">0600</span>, &amp;bolt.Options{Timeout: <span class="hljs-number">10</span> * time.Second})
db := storm.Open(<span class="hljs-string">"my.db"</span>, storm.UseDB(bDB))
</code></pre>
<h4>حالت Batch</h4>
<p>حالت Batch را می‌توان برای افزایش سرعت نوشتن همزمان فعال کرد (نگاه کنید به <a href="https://github.com/coreos/bbolt#batch-read-write-transactions">Batch read-write transactions</a>)</p>
<pre><code class="language-go hljs">db := storm.Open(<span class="hljs-string">"my.db"</span>, storm.Batch())
</code></pre>
<h2>نودها و باکت‌های تو در تو</h2>
<p>استورم با استفاده از قابلیت nested buckets در BoltDB از طریق <code>storm.Node</code> بهره می‌برد.<br>یک <code>storm.Node</code> شیء پایه‌ای است که توسط <code>storm.DB</code> برای مدیریت یک باکت استفاده می‌شود.<br>برای ساخت یک باکت تو در تو و استفاده از همان API مشابه <code>storm.DB</code>، می‌توانید از متد <code>DB.From</code> استفاده کنید.</p>
<pre><code class="language-go hljs">repo := db.From(<span class="hljs-string">"repo"</span>)

err := repo.Save(&amp;Issue{
  Title: <span class="hljs-string">"I want more features"</span>,
  Author: user.ID,
})

err = repo.Save(newRelease(<span class="hljs-string">"0.10"</span>))

<span class="hljs-keyword">var</span> issues []Issue
err = repo.Find(<span class="hljs-string">"Author"</span>, user.ID, &amp;issues)

<span class="hljs-keyword">var</span> release Release
err = repo.One(<span class="hljs-string">"Tag"</span>, <span class="hljs-string">"0.10"</span>, &amp;release)
</code></pre>
<p>همچنین می‌توانید نودها را به هم زنجیر کنید تا یک سلسله مراتب بسازید</p>
<pre><code class="language-go hljs">chars := db.From(<span class="hljs-string">"characters"</span>)
heroes := chars.From(<span class="hljs-string">"heroes"</span>)
enemies := chars.From(<span class="hljs-string">"enemies"</span>)

items := db.From(<span class="hljs-string">"items"</span>)
potions := items.From(<span class="hljs-string">"consumables"</span>).From(<span class="hljs-string">"medicine"</span>).From(<span class="hljs-string">"potions"</span>)
</code></pre>
<p>حتی می‌توانید کل سلسله مراتب را به عنوان آرگومان به <code>From</code> ارسال کنید:</p>
<pre><code class="language-go hljs">privateNotes := db.From(<span class="hljs-string">"notes"</span>, <span class="hljs-string">"private"</span>)
workNotes :=  db.From(<span class="hljs-string">"notes"</span>, <span class="hljs-string">"work"</span>)
</code></pre>
<h3>گزینه‌های Node</h3>
<p>یک Node را نیز می‌توان پیکربندی کرد. فعال‌سازی یک گزینه روی یک Node باعث ایجاد یک کپی می‌شود، بنابراین یک Node همیشه thread-safe است.</p>
<pre><code class="language-go hljs">n := db.From(<span class="hljs-string">"my-node"</span>)
</code></pre>
<p>دادن یک تراکنش bolt.Tx به Node</p>
<pre><code class="language-go hljs">n = n.WithTransaction(tx)
</code></pre>
<p>فعال کردن حالت batch</p>
<pre><code class="language-go hljs">n = n.WithBatch(<span class="hljs-literal">true</span>)
</code></pre>
<p>استفاده از یک Codec</p>
<pre><code class="language-go hljs">n = n.WithCodec(gob.Codec)
</code></pre>
<h2>فروشگاه ساده کلید/مقدار</h2>
<p>استورم می‌تواند به عنوان یک فروشگاه کلید/مقدار ساده و مقاوم که می‌تواند هر چیزی را ذخیره کند استفاده شود.<br>کلید و مقدار می‌توانند از هر نوعی باشند به شرط آنکه کلید مقدار صفر نباشد.</p>
<p>ذخیره داده:</p>
<pre><code class="language-go hljs">db.Set(<span class="hljs-string">"logs"</span>, time.Now(), <span class="hljs-string">"I'm eating my breakfast man"</span>)
db.Set(<span class="hljs-string">"sessions"</span>, bson.NewObjectId(), &amp;someUser)
db.Set(<span class="hljs-string">"weird storage"</span>, <span class="hljs-string">"754-3010"</span>, <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{}{
  <span class="hljs-string">"hair"</span>: <span class="hljs-string">"blonde"</span>,
  <span class="hljs-string">"likes"</span>: []<span class="hljs-type">string</span>{<span class="hljs-string">"cheese"</span>, <span class="hljs-string">"star wars"</span>},
})
</code></pre>
<p>دریافت داده:</p>
<pre><code class="language-go hljs">user := User{}
db.Get(<span class="hljs-string">"sessions"</span>, someObjectId, &amp;user)

<span class="hljs-keyword">var</span> details <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{}
db.Get(<span class="hljs-string">"weird storage"</span>, <span class="hljs-string">"754-3010"</span>, &amp;details)
</code></pre>
<p>db.Get("sessions", someObjectId, &amp;details)</p>
<pre><code class="hljs language-css">
حذف داده‌ها:

```go
db.<span class="hljs-built_in">Delete</span>(<span class="hljs-string">"sessions"</span>, someObjectId)
db.<span class="hljs-built_in">Delete</span>(<span class="hljs-string">"weird storage"</span>, <span class="hljs-string">"754-3010"</span>)
</code></pre>
<p>شما می‌توانید سایر متدهای مفید را در <a href="https://godoc.org/github.com/asdine/storm#KeyValueStore">مستندات</a> پیدا کنید.</p>
<h2>BoltDB</h2>
<p>BoltDB همچنان به راحتی قابل دسترسی است و می‌توانید مانند گذشته از آن استفاده کنید</p>
<pre><code class="language-go hljs">db.Bolt.View(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(tx *bolt.Tx)</span></span> <span class="hljs-type">error</span> {
  bucket := tx.Bucket([]<span class="hljs-type">byte</span>(<span class="hljs-string">"my bucket"</span>))
  val := bucket.Get([]<span class="hljs-type">byte</span>(<span class="hljs-string">"any id"</span>))
  fmt.Println(<span class="hljs-type">string</span>(val))
  <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
})
</code></pre>
<p>می‌توانید یک تراکنش را نیز به Storm منتقل کنید</p>
<pre><code class="language-go hljs">db.Bolt.Update(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(tx *bolt.Tx)</span></span> <span class="hljs-type">error</span> {
  ...
  dbx := db.WithTransaction(tx)
  err = dbx.Save(&amp;user)
  ...
  <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
})
</code></pre>
<h2>مجوز</h2>
<p>MIT</p>
<h2>اعتبارها</h2>
<ul>
<li><a href="https://github.com/asdine">Asdine El Hrychy</a></li>
<li><a href="https://github.com/bep">Bjørn Erik Pedersen</a></li>
</ul>
<hr>
<p>Tranlated By <a href="https://github.com/OpenAiTx/OpenAiTx">Open Ai Tx</a> | Last indexed: 2025-06-11</p>
<hr>
</div>
    </div>

    <footer class="footer">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank">Open AI Tx</a>
    </footer>
    <!-- Default Statcounter code for openaitx
https://openaitx.github.io/ -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async=""></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>
    <!-- End of Statcounter Code -->
    


</body></html>