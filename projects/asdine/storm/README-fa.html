<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>storm - asdine/storm fa</title>
    <meta name="title" content="storm - asdine/storm fa | Storm استورم یک ابزار ساده و قدرتمند برای BoltDB است. به طور کلی، استورم اندیس‌ها، مجموعه‌ای گسترده از متدها برای ذخیره و واکشی داده‌ها، یک سیستم پرس‌وجوی پیشرف...">
    <meta name="description" content="asdine/storm - GitHub repository fa documentation and information | Storm استورم یک ابزار ساده و قدرتمند برای BoltDB است. به طور کلی، استورم اندیس‌ها، مجموعه‌ای گسترده از متدها برای ذخیره و واکشی داده‌ها، یک سیستم پرس‌وجوی پیشرف...">
    <meta name="keywords" content="asdine, storm, GitHub, repository, fa documentation">
    <meta name="author" content="Open AI Tx">
    <meta name="robots" content="index, follow">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://openaitx.github.io/projects/asdine/storm/README-fa.html">
    <meta property="og:title" content="storm - asdine/storm fa | Storm استورم یک ابزار ساده و قدرتمند برای BoltDB است. به طور کلی، استورم اندیس‌ها، مجموعه‌ای گسترده از متدها برای ذخیره و واکشی داده‌ها، یک سیستم پرس‌وجوی پیشرف...">
    <meta property="og:description" content="asdine/storm - GitHub repository fa documentation and information | Storm استورم یک ابزار ساده و قدرتمند برای BoltDB است. به طور کلی، استورم اندیس‌ها، مجموعه‌ای گسترده از متدها برای ذخیره و واکشی داده‌ها، یک سیستم پرس‌وجوی پیشرف...">
    <meta property="og:image" content="https://openaitx.github.io/logo_crop.png">
    <link rel="icon" type="image/jpeg" href="/icon.jpg">
    <link rel="apple-touch-icon" href="/icon.jpg">
    <script src="/js/marked.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/css/github.min.css?v=20250613">
    <script src="/js/highlight.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/view.css?v=20250613">
    <style>
        body { display: flex; flex-direction: column; min-height: 100vh; }
        .main-container { margin: 0 auto; width: 100%; max-width: 980px; padding: 0 20px; }
        @media (max-width: 768px) { .main-container { padding: 0 15px; } }
        .markdown-body img { max-width: 100%; height: auto; }
        .header { text-align: center; margin-bottom: 30px; padding: 20px; background-color: #f6f8fa; border-bottom: 1px solid #e1e4e8; position: relative; }
        .header .links { margin-top: 10px; font-size: 16px; }
        .header .links a { color: #0366d6; text-decoration: none; margin-left: 5px; }
        .header .links a:hover { text-decoration: underline; }
        .language-badges { margin-top: 15px; text-align: center; }
        .language-badges a { display: inline-block; margin: 2px; text-decoration: none; }
        .language-badges img { height: 20px; border-radius: 3px; }
        .language-badges a:hover img { opacity: 0.8; }
    </style>
</head>
<body>
    <div class="header">
        <div class="links">
            GitHub Repository: <a href="https://github.com/asdine/storm" id="githubRepoLink" target="_blank">asdine/storm</a>
<h1 style="display: none;">Storm استورم یک ابزار ساده و قدرتمند برای BoltDB است. به طور کلی، استورم اندیس‌ها، مجموعه‌ای گسترده از متدها برای ذخیره و واکشی داده‌ها، یک سیستم پرس‌وجوی پیشرف...</h1>
        </div>
        <div class="language-badges" id="languageBadges">
            <!-- You can generate language badges here if needed -->
        </div>
    </div>
    <div class="main-container">
        <div class="markdown-body" id="content">
            <h1>Storm</h1>
<p><a href="https://travis-ci.org/asdine/storm"><img src="https://travis-ci.org/asdine/storm.svg" alt="Build Status" /></a>
<a href="https://godoc.org/github.com/asdine/storm"><img src="https://godoc.org/github.com/asdine/storm?status.svg" alt="GoDoc" /></a></p>
<p>استورم یک ابزار ساده و قدرتمند برای <a href="https://github.com/coreos/bbolt">BoltDB</a> است. به طور کلی، استورم اندیس‌ها، مجموعه‌ای گسترده از متدها برای ذخیره و واکشی داده‌ها، یک سیستم پرس‌وجوی پیشرفته و امکانات بسیار دیگری را فراهم می‌کند.</p>
<p>علاوه بر مثال‌های زیر، <a href="https://godoc.org/github.com/asdine/storm#pkg-examples">مثال‌های GoDoc</a> را نیز ببینید.</p>
<p><em>برای پرس‌وجوهای پیشرفته‌تر و پشتیبانی از <a href="https://github.com/dgraph-io/badger">Badger</a>، به <a href="https://github.com/asdine/genji">Genji</a> نیز مراجعه کنید</em></p>
<h2>فهرست مطالب</h2>
<ul>
<li><a href="#getting-started">شروع کار</a></li>
<li><a href="#import-storm">ایمپورت کردن استورم</a></li>
<li><a href="#open-a-database">باز کردن یک پایگاه داده</a></li>
<li><a href="#simple-crud-system">سیستم CRUD ساده</a>
<ul>
<li><a href="#declare-your-structures">تعریف ساختارها</a></li>
<li><a href="#save-your-object">ذخیره شیء خود</a>
<ul>
<li><a href="#auto-increment">افزایش خودکار</a></li>
</ul>
</li>
<li><a href="#simple-queries">پرس‌وجوهای ساده</a>
<ul>
<li><a href="#fetch-one-object">واکشی یک شیء</a></li>
<li><a href="#fetch-multiple-objects">واکشی چندین شیء</a></li>
<li><a href="#fetch-all-objects">واکشی همه اشیاء</a></li>
<li><a href="#fetch-all-objects-sorted-by-index">واکشی همه اشیاء بر اساس اندیس مرتب شده</a></li>
<li><a href="#fetch-a-range-of-objects">واکشی محدوده‌ای از اشیاء</a></li>
<li><a href="#fetch-objects-by-prefix">واکشی اشیاء با پیشوند</a></li>
<li><a href="#skip-limit-and-reverse">Skip، Limit و Reverse</a></li>
<li><a href="#delete-an-object">حذف یک شیء</a></li>
<li><a href="#update-an-object">به‌روزرسانی یک شیء</a></li>
<li><a href="#initialize-buckets-and-indexes-before-saving-an-object">مقدارسازی سطل‌ها و اندیس‌ها پیش از ذخیره شیء</a></li>
<li><a href="#drop-a-bucket">حذف یک سطل</a></li>
<li><a href="#re-index-a-bucket">بازسازی اندیس یک سطل</a></li>
</ul>
</li>
<li><a href="#advanced-queries">پرس‌وجوهای پیشرفته</a></li>
<li><a href="#transactions">تراکنش‌ها</a></li>
<li><a href="#options">گزینه‌ها</a>
<ul>
<li><a href="#boltoptions">BoltOptions</a></li>
<li><a href="#marshalunmarshaler">MarshalUnmarshaler</a>
<ul>
<li><a href="#provided-codecs">کدک‌های ارائه شده</a></li>
</ul>
</li>
<li><a href="#use-existing-bolt-connection">استفاده از اتصال Bolt موجود</a></li>
<li><a href="#batch-mode">حالت Batch</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#nodes-and-nested-buckets">گره‌ها و سطل‌های تو در تو</a>
<ul>
<li><a href="#node-options">گزینه‌های گره</a></li>
</ul>
</li>
<li><a href="#simple-keyvalue-store">ذخیره‌ساز ساده کلید/مقدار</a></li>
<li><a href="#boltdb">BoltDB</a></li>
<li><a href="#license">مجوز</a></li>
<li><a href="#credits">اعتبارات</a></li>
</ul>
<h2>شروع کار</h2>
<pre><code class="language-bash">GO111MODULE=on go get -u github.com/asdine/storm/v3
</code></pre>
<h2>ایمپورت کردن استورم</h2>
<pre><code class="language-go">import &quot;github.com/asdine/storm/v3&quot;
</code></pre>
<h2>باز کردن یک پایگاه داده</h2>
<p>روش سریع برای باز کردن یک پایگاه داده</p>
<pre><code class="language-go">db, err := storm.Open(&quot;my.db&quot;)

defer db.Close()
</code></pre>
<p><code>Open</code> می‌تواند گزینه‌های متعددی برای سفارشی‌سازی نحوه عملکرد دریافت کند. <a href="#options">گزینه‌ها</a> را در ادامه ببینید</p>
<h2>سیستم CRUD ساده</h2>
<h3>تعریف ساختارها</h3>
<pre><code class="language-go">type User struct {
  ID int // کلید اصلی
  Group string `storm:&quot;index&quot;` // این فیلد ایندکس خواهد شد
  Email string `storm:&quot;unique&quot;` // این فیلد با محدودیت یکتا ایندکس خواهد شد
  Name string // این فیلد ایندکس نخواهد شد
  Age int `storm:&quot;index&quot;`
}
</code></pre>
<p>کلید اصلی می‌تواند از هر نوعی باشد به شرط اینکه مقدار صفر نباشد. استورم به دنبال تگ <code>id</code> می‌گردد؛ اگر پیدا نشود به دنبال فیلدی با نام <code>ID</code> می‌گردد.</p>
<pre><code class="language-go">type User struct {
  ThePrimaryKey string `storm:&quot;id&quot;`// کلید اصلی
  Group string `storm:&quot;index&quot;` // این فیلد ایندکس خواهد شد
  Email string `storm:&quot;unique&quot;` // این فیلد با محدودیت یکتا ایندکس خواهد شد
  Name string // این فیلد ایندکس نخواهد شد
}
</code></pre>
<p>استورم تگ‌ها را در ساختارهای تو در تو با تگ <code>inline</code> مدیریت می‌کند</p>
<pre><code class="language-go">type Base struct {
  Ident bson.ObjectId `storm:&quot;id&quot;`
}

type User struct {
  Base      `storm:&quot;inline&quot;`
  Group     string `storm:&quot;index&quot;`
  Email     string `storm:&quot;unique&quot;`
  Name      string
  CreatedAt time.Time `storm:&quot;index&quot;`
}
</code></pre>
<h3>ذخیره شیء خود</h3>
<pre><code class="language-go">user := User{
  ID: 10,
  Group: &quot;staff&quot;,
  Email: &quot;john@provider.com&quot;,
  Name: &quot;John&quot;,
  Age: 21,
  CreatedAt: time.Now(),
}

err := db.Save(&amp;user)
// err == nil

user.ID++
err = db.Save(&amp;user)
// err == storm.ErrAlreadyExists
</code></pre>
<p>همین.</p>
<p><code>Save</code> تمام اندیس‌ها و سطل‌های مورد نیاز را ایجاد یا به‌روزرسانی می‌کند، محدودیت‌های یکتا را بررسی کرده و شیء را در فروشگاه ذخیره می‌کند.</p>
<h4>افزایش خودکار</h4>
<p>استورم می‌تواند مقادیر عدد صحیح را به صورت خودکار افزایش دهد تا هنگام ذخیره اشیاء نگرانی از این بابت نداشته باشید. همچنین مقدار جدید به طور خودکار در فیلد شما قرار می‌گیرد.</p>
<pre><code class="language-go">
type Product struct {
  Pk                  int `storm:&quot;id,increment&quot;` // کلید اصلی با افزایش خودکار
  Name                string
  IntegerField        uint64 `storm:&quot;increment&quot;`
  IndexedIntegerField uint32 `storm:&quot;index,increment&quot;`
  UniqueIntegerField  int16  `storm:&quot;unique,increment=100&quot;` // مقدار اولیه را می‌توان تعیین کرد
}

p := Product{Name: &quot;Vaccum Cleaner&quot;}

fmt.Println(p.Pk)
fmt.Println(p.IntegerField)
fmt.Println(p.IndexedIntegerField)
fmt.Println(p.UniqueIntegerField)
// 0
// 0
// 0
// 0

_ = db.Save(&amp;p)

fmt.Println(p.Pk)
fmt.Println(p.IntegerField)
fmt.Println(p.IndexedIntegerField)
fmt.Println(p.UniqueIntegerField)
// 1
// 1
// 1
// 100

</code></pre>
<h3>پرس‌وجوهای ساده</h3>
<p>هر شیء، فارغ از ایندکس بودن یا نبودن، قابل واکشی است. استورم در صورت وجود، از اندیس‌ها استفاده می‌کند و در غیر این صورت از <a href="#advanced-queries">سیستم پرس‌وجو</a> بهره می‌برد.</p>
<h4>واکشی یک شیء</h4>
<pre><code class="language-go">var user User
err := db.One(&quot;Email&quot;, &quot;john@provider.com&quot;, &amp;user)
// err == nil

err = db.One(&quot;Name&quot;, &quot;John&quot;, &amp;user)
// err == nil

err = db.One(&quot;Name&quot;, &quot;Jack&quot;, &amp;user)
// err == storm.ErrNotFound
</code></pre>
<h4>واکشی چندین شیء</h4>
<pre><code class="language-go">var users []User
err := db.Find(&quot;Group&quot;, &quot;staff&quot;, &amp;users)
</code></pre>
<h4>واکشی همه اشیاء</h4>
<pre><code class="language-go">var users []User
err := db.All(&amp;users)
</code></pre>
<h4>واکشی همه اشیاء مرتب‌شده بر اساس ایندکس</h4>
<pre><code class="language-go">var users []User
err := db.AllByIndex(&quot;CreatedAt&quot;, &amp;users)
</code></pre>
<h4>واکشی محدوده‌ای از اشیاء</h4>
<pre><code class="language-go">var users []User
err := db.Range(&quot;Age&quot;, 10, 21, &amp;users)
</code></pre>
<h4>واکشی اشیاء بر اساس پیشوند</h4>
<pre><code class="language-go">var users []User
err := db.Prefix(&quot;Name&quot;, &quot;Jo&quot;, &amp;users)
</code></pre>
<h4>رد کردن، محدود کردن و معکوس کردن</h4>
<pre><code class="language-go">var users []User
err := db.Find(&quot;Group&quot;, &quot;staff&quot;, &amp;users, storm.Skip(10))
err = db.Find(&quot;Group&quot;, &quot;staff&quot;, &amp;users, storm.Limit(10))
err = db.Find(&quot;Group&quot;, &quot;staff&quot;, &amp;users, storm.Reverse())
err = db.Find(&quot;Group&quot;, &quot;staff&quot;, &amp;users, storm.Limit(10), storm.Skip(10), storm.Reverse())

err = db.All(&amp;users, storm.Limit(10), storm.Skip(10), storm.Reverse())
err = db.AllByIndex(&quot;CreatedAt&quot;, &amp;users, storm.Limit(10), storm.Skip(10), storm.Reverse())
err = db.Range(&quot;Age&quot;, 10, 21, &amp;users, storm.Limit(10), storm.Skip(10), storm.Reverse())
</code></pre>
<h4>حذف یک شیء</h4>
<pre><code class="language-go">err := db.DeleteStruct(&amp;user)
</code></pre>
<h4>به‌روزرسانی یک شیء</h4>
<pre><code class="language-go">// به‌روزرسانی چندین فیلد
// فقط برای فیلدهایی که مقدار صفر ندارند کار می‌کند (مثلاً Name نمی‌تواند &quot;&quot; باشد، Age نمی‌تواند 0 باشد)
err := db.Update(&amp;User{ID: 10, Name: &quot;Jack&quot;, Age: 45})

// به‌روزرسانی یک فیلد
// برای فیلدهایی با مقدار صفر نیز کار می‌کند (0، false، &quot;&quot; و ...)
err := db.UpdateField(&amp;User{ID: 10}, &quot;Age&quot;, 0)
</code></pre>
<h4>مقداردهی اولیه باکت‌ها و ایندکس‌ها قبل از ذخیره یک شیء</h4>
<pre><code class="language-go">err := db.Init(&amp;User{})
</code></pre>
<p>مفید هنگام شروع برنامه شما</p>
<h4>حذف یک باکت</h4>
<p>با استفاده از ساختار</p>
<pre><code class="language-go">err := db.Drop(&amp;User)
</code></pre>
<p>با استفاده از نام باکت</p>
<pre><code class="language-go">err := db.Drop(&quot;User&quot;)
</code></pre>
<h4>بازایندکس کردن یک باکت</h4>
<pre><code class="language-go">err := db.ReIndex(&amp;User{})
</code></pre>
<p>مفید هنگامی که ساختار تغییر کرده است</p>
<h3>کوئری‌های پیشرفته</h3>
<p>برای کوئری‌های پیچیده‌تر، می‌توانید از متد <code>Select</code> استفاده کنید.
<code>Select</code> هر تعداد <a href="https://godoc.org/github.com/asdine/storm/q#Matcher"><code>Matcher</code></a> از پکیج <a href="https://godoc.org/github.com/asdine/storm/q"><code>q</code></a> را می‌پذیرد.</p>
<p>در اینجا برخی Matcherهای متداول آمده است:</p>
<pre><code class="language-go">// تساوی
q.Eq(&quot;Name&quot;, John)

// بزرگتر به‌صورت سختگیرانه
q.Gt(&quot;Age&quot;, 7)

// کوچکتر یا مساوی
q.Lte(&quot;Age&quot;, 77)

// رجکس با نامی که با حرف D شروع می‌شود
q.Re(&quot;Name&quot;, &quot;^D&quot;)

// در میان یک آرایه از مقادیر
q.In(&quot;Group&quot;, []string{&quot;Staff&quot;, &quot;Admin&quot;})

// مقایسه فیلدها
q.EqF(&quot;FieldName&quot;, &quot;SecondFieldName&quot;)
q.LtF(&quot;FieldName&quot;, &quot;SecondFieldName&quot;)
q.GtF(&quot;FieldName&quot;, &quot;SecondFieldName&quot;)
q.LteF(&quot;FieldName&quot;, &quot;SecondFieldName&quot;)
q.GteF(&quot;FieldName&quot;, &quot;SecondFieldName&quot;)
</code></pre>
<p>Matcherها می‌توانند با <code>And</code>، <code>Or</code> و <code>Not</code> ترکیب شوند:</p>
<pre><code class="language-go">
// اگر همه تطابق داشته باشند
q.And(
  q.Gt(&quot;Age&quot;, 7),
  q.Re(&quot;Name&quot;, &quot;^D&quot;)
)

// اگر یکی از آن‌ها تطابق داشته باشد
q.Or(
  q.Re(&quot;Name&quot;, &quot;^A&quot;),
  q.Not(
    q.Re(&quot;Name&quot;, &quot;^B&quot;)
  ),
  q.Re(&quot;Name&quot;, &quot;^C&quot;),
  q.In(&quot;Group&quot;, []string{&quot;Staff&quot;, &quot;Admin&quot;}),
  q.And(
    q.StrictEq(&quot;Password&quot;, []byte(password)),
    q.Eq(&quot;Registered&quot;, true)
  )
)
</code></pre>
<p>می‌توانید لیست کامل را در <a href="https://godoc.org/github.com/asdine/storm/q#Matcher">مستندات</a> پیدا کنید.</p>
<p><code>Select</code> هر تعداد Matcher را می‌پذیرد و آن‌ها را در یک <code>q.And()</code> قرار می‌دهد، بنابراین لازم نیست آن را مشخص کنید. این متد یک نوع <a href="https://godoc.org/github.com/asdine/storm#Query"><code>Query</code></a> بازمی‌گرداند.</p>
<pre><code class="language-go">query := db.Select(q.Gte(&quot;Age&quot;, 7), q.Lte(&quot;Age&quot;, 77))
</code></pre>
<p>نوع <code>Query</code> شامل متدهایی برای فیلتر و مرتب‌سازی رکوردها است.</p>
<pre><code class="language-go">// محدود کردن
query = query.Limit(10)

// رد کردن
query = query.Skip(20)

// می‌توان فراخوانی‌ها را زنجیره کرد
query = query.Limit(10).Skip(20).OrderBy(&quot;Age&quot;).Reverse()
</code></pre>
<p>همچنین برای مشخص کردن نحوه واکشی رکوردها.</p>
<pre><code class="language-go">var users []User
err = query.Find(&amp;users)

var user User
err = query.First(&amp;user)
</code></pre>
<p>مثال‌هایی با <code>Select</code>:</p>
<pre><code class="language-go">// یافتن همه کاربران با شناسه بین 10 تا 100
err = db.Select(q.Gte(&quot;ID&quot;, 10), q.Lte(&quot;ID&quot;, 100)).Find(&amp;users)

// Matcherهای تو در تو
err = db.Select(q.Or(
  q.Gt(&quot;ID&quot;, 50),
  q.Lt(&quot;Age&quot;, 21),
  q.And(
    q.Eq(&quot;Group&quot;, &quot;admin&quot;),
    q.Gte(&quot;Age&quot;, 21),
  ),
)).Find(&amp;users)

query := db.Select(q.Gte(&quot;ID&quot;, 10), q.Lte(&quot;ID&quot;, 100)).Limit(10).Skip(5).Reverse().OrderBy(&quot;Age&quot;, &quot;Name&quot;)

// یافتن چندین رکورد
err = query.Find(&amp;users)
// یا
err = db.Select(q.Gte(&quot;ID&quot;, 10), q.Lte(&quot;ID&quot;, 100)).Limit(10).Skip(5).Reverse().OrderBy(&quot;Age&quot;, &quot;Name&quot;).Find(&amp;users)
</code></pre>
<pre><code class="language-go">// یافتن اولین رکورد
err = query.First(&amp;user)
// یا
err = db.Select(q.Gte(&quot;ID&quot;, 10), q.Lte(&quot;ID&quot;, 100)).Limit(10).Skip(5).Reverse().OrderBy(&quot;Age&quot;, &quot;Name&quot;).First(&amp;user)

// حذف تمامی رکوردهای مطابق
err = query.Delete(new(User))

// دریافت رکوردها به صورت یکی یکی (مفید زمانی که سطل حاوی تعداد زیادی رکورد است)
query = db.Select(q.Gte(&quot;ID&quot;, 10),q.Lte(&quot;ID&quot;, 100)).OrderBy(&quot;Age&quot;, &quot;Name&quot;)

err = query.Each(new(User), func(record interface{}) error) {
  u := record.(*User)
  ...
  return nil
}
</code></pre>
<p>برای لیست کامل متدها به <a href="https://godoc.org/github.com/asdine/storm#Query">مستندات</a> مراجعه کنید.</p>
<h3>تراکنش‌ها</h3>
<pre><code class="language-go">tx, err := db.Begin(true)
if err != nil {
  return err
}
defer tx.Rollback()

accountA.Amount -= 100
accountB.Amount += 100

err = tx.Save(accountA)
if err != nil {
  return err
}

err = tx.Save(accountB)
if err != nil {
  return err
}

return tx.Commit()
</code></pre>
<h3>گزینه‌ها</h3>
<p>گزینه‌های استورم توابعی هستند که هنگام ساخت نمونه‌ی استورم می‌توانید آنها را ارسال کنید. هر تعداد گزینه می‌توانید ارسال نمایید.</p>
<h4>BoltOptions</h4>
<p>به طور پیش‌فرض، استورم دیتابیس را با مد <code>0600</code> و تایم‌اوت یک ثانیه باز می‌کند.
می‌توانید این رفتار را با استفاده از <code>BoltOptions</code> تغییر دهید.</p>
<pre><code class="language-go">db, err := storm.Open(&quot;my.db&quot;, storm.BoltOptions(0600, &amp;bolt.Options{Timeout: 1 * time.Second}))
</code></pre>
<h4>MarshalUnmarshaler</h4>
<p>برای ذخیره داده‌ها در BoltDB، استورم به طور پیش‌فرض آن را به صورت JSON مارشال می‌کند. اگر می‌خواهید این رفتار را تغییر دهید، می‌توانید یک کدک که <a href="https://godoc.org/github.com/asdine/storm/codec#MarshalUnmarshaler"><code>codec.MarshalUnmarshaler</code></a> را پیاده‌سازی می‌کند از طریق گزینه‌ی <a href="https://godoc.org/github.com/asdine/storm#Codec"><code>storm.Codec</code></a> ارسال کنید:</p>
<pre><code class="language-go">db := storm.Open(&quot;my.db&quot;, storm.Codec(myCodec))
</code></pre>
<h5>کدک‌های فراهم‌شده</h5>
<p>شما به راحتی می‌توانید <code>MarshalUnmarshaler</code> خود را پیاده‌سازی کنید، اما استورم به طور پیش‌فرض از <a href="https://godoc.org/github.com/asdine/storm/codec/json">JSON</a> (پیش‌فرض)، <a href="https://godoc.org/github.com/asdine/storm/codec/gob">GOB</a>،  <a href="https://godoc.org/github.com/asdine/storm/codec/sereal">Sereal</a>، <a href="https://godoc.org/github.com/asdine/storm/codec/protobuf">Protocol Buffers</a> و <a href="https://godoc.org/github.com/asdine/storm/codec/msgpack">MessagePack</a> پشتیبانی می‌کند.</p>
<p>این کدک‌ها را می‌توانید با import کردن پکیج مربوطه و استفاده از آن به عنوان کدک تنظیم Storm استفاده کنید. مثال زیر همه واریانت‌ها را نشان می‌دهد (بدون هندل صحیح خطا):</p>
<pre><code class="language-go">import (
  &quot;github.com/asdine/storm/v3&quot;
  &quot;github.com/asdine/storm/v3/codec/gob&quot;
  &quot;github.com/asdine/storm/v3/codec/json&quot;
  &quot;github.com/asdine/storm/v3/codec/sereal&quot;
  &quot;github.com/asdine/storm/v3/codec/protobuf&quot;
  &quot;github.com/asdine/storm/v3/codec/msgpack&quot;
)

var gobDb, _ = storm.Open(&quot;gob.db&quot;, storm.Codec(gob.Codec))
var jsonDb, _ = storm.Open(&quot;json.db&quot;, storm.Codec(json.Codec))
var serealDb, _ = storm.Open(&quot;sereal.db&quot;, storm.Codec(sereal.Codec))
var protobufDb, _ = storm.Open(&quot;protobuf.db&quot;, storm.Codec(protobuf.Codec))
var msgpackDb, _ = storm.Open(&quot;msgpack.db&quot;, storm.Codec(msgpack.Codec))
</code></pre>
<p><strong>نکته</strong>: افزودن تگ‌های استورم به فایل‌های Protobuf تولید شده می‌تواند دشوار باشد. یک راه حل خوب استفاده از <a href="https://github.com/favadi/protoc-go-inject-tag">این ابزار</a> برای تزریق تگ‌ها هنگام کامپایل است.</p>
<h4>استفاده از اتصال موجود Bolt</h4>
<p>می‌توانید از یک اتصال موجود استفاده کرده و آن را به استورم ارسال کنید.</p>
<pre><code class="language-go">bDB, _ := bolt.Open(filepath.Join(dir, &quot;bolt.db&quot;), 0600, &amp;bolt.Options{Timeout: 10 * time.Second})
db := storm.Open(&quot;my.db&quot;, storm.UseDB(bDB))
</code></pre>
<h4>حالت Batch</h4>
<p>حالت Batch را می‌توان برای افزایش سرعت نوشتن همزمان فعال کرد (نگاه کنید به <a href="https://github.com/coreos/bbolt#batch-read-write-transactions">Batch read-write transactions</a>)</p>
<pre><code class="language-go">db := storm.Open(&quot;my.db&quot;, storm.Batch())
</code></pre>
<h2>نودها و باکت‌های تو در تو</h2>
<p>استورم با استفاده از قابلیت nested buckets در BoltDB از طریق <code>storm.Node</code> بهره می‌برد.
یک <code>storm.Node</code> شیء پایه‌ای است که توسط <code>storm.DB</code> برای مدیریت یک باکت استفاده می‌شود.
برای ساخت یک باکت تو در تو و استفاده از همان API مشابه <code>storm.DB</code>، می‌توانید از متد <code>DB.From</code> استفاده کنید.</p>
<pre><code class="language-go">repo := db.From(&quot;repo&quot;)

err := repo.Save(&amp;Issue{
  Title: &quot;I want more features&quot;,
  Author: user.ID,
})

err = repo.Save(newRelease(&quot;0.10&quot;))

var issues []Issue
err = repo.Find(&quot;Author&quot;, user.ID, &amp;issues)

var release Release
err = repo.One(&quot;Tag&quot;, &quot;0.10&quot;, &amp;release)
</code></pre>
<p>همچنین می‌توانید نودها را به هم زنجیر کنید تا یک سلسله مراتب بسازید</p>
<pre><code class="language-go">chars := db.From(&quot;characters&quot;)
heroes := chars.From(&quot;heroes&quot;)
enemies := chars.From(&quot;enemies&quot;)

items := db.From(&quot;items&quot;)
potions := items.From(&quot;consumables&quot;).From(&quot;medicine&quot;).From(&quot;potions&quot;)
</code></pre>
<p>حتی می‌توانید کل سلسله مراتب را به عنوان آرگومان به <code>From</code> ارسال کنید:</p>
<pre><code class="language-go">privateNotes := db.From(&quot;notes&quot;, &quot;private&quot;)
workNotes :=  db.From(&quot;notes&quot;, &quot;work&quot;)
</code></pre>
<h3>گزینه‌های Node</h3>
<p>یک Node را نیز می‌توان پیکربندی کرد. فعال‌سازی یک گزینه روی یک Node باعث ایجاد یک کپی می‌شود، بنابراین یک Node همیشه thread-safe است.</p>
<pre><code class="language-go">n := db.From(&quot;my-node&quot;)
</code></pre>
<p>دادن یک تراکنش bolt.Tx به Node</p>
<pre><code class="language-go">n = n.WithTransaction(tx)
</code></pre>
<p>فعال کردن حالت batch</p>
<pre><code class="language-go">n = n.WithBatch(true)
</code></pre>
<p>استفاده از یک Codec</p>
<pre><code class="language-go">n = n.WithCodec(gob.Codec)
</code></pre>
<h2>فروشگاه ساده کلید/مقدار</h2>
<p>استورم می‌تواند به عنوان یک فروشگاه کلید/مقدار ساده و مقاوم که می‌تواند هر چیزی را ذخیره کند استفاده شود.
کلید و مقدار می‌توانند از هر نوعی باشند به شرط آنکه کلید مقدار صفر نباشد.</p>
<p>ذخیره داده:</p>
<pre><code class="language-go">db.Set(&quot;logs&quot;, time.Now(), &quot;I'm eating my breakfast man&quot;)
db.Set(&quot;sessions&quot;, bson.NewObjectId(), &amp;someUser)
db.Set(&quot;weird storage&quot;, &quot;754-3010&quot;, map[string]interface{}{
  &quot;hair&quot;: &quot;blonde&quot;,
  &quot;likes&quot;: []string{&quot;cheese&quot;, &quot;star wars&quot;},
})
</code></pre>
<p>دریافت داده:</p>
<pre><code class="language-go">user := User{}
db.Get(&quot;sessions&quot;, someObjectId, &amp;user)

var details map[string]interface{}
db.Get(&quot;weird storage&quot;, &quot;754-3010&quot;, &amp;details)
</code></pre>
<p>db.Get(&quot;sessions&quot;, someObjectId, &amp;details)</p>
<pre><code>
حذف داده‌ها:

```go
db.Delete(&quot;sessions&quot;, someObjectId)
db.Delete(&quot;weird storage&quot;, &quot;754-3010&quot;)
</code></pre>
<p>شما می‌توانید سایر متدهای مفید را در <a href="https://godoc.org/github.com/asdine/storm#KeyValueStore">مستندات</a> پیدا کنید.</p>
<h2>BoltDB</h2>
<p>BoltDB همچنان به راحتی قابل دسترسی است و می‌توانید مانند گذشته از آن استفاده کنید</p>
<pre><code class="language-go">db.Bolt.View(func(tx *bolt.Tx) error {
  bucket := tx.Bucket([]byte(&quot;my bucket&quot;))
  val := bucket.Get([]byte(&quot;any id&quot;))
  fmt.Println(string(val))
  return nil
})
</code></pre>
<p>می‌توانید یک تراکنش را نیز به Storm منتقل کنید</p>
<pre><code class="language-go">db.Bolt.Update(func(tx *bolt.Tx) error {
  ...
  dbx := db.WithTransaction(tx)
  err = dbx.Save(&amp;user)
  ...
  return nil
})
</code></pre>
<h2>مجوز</h2>
<p>MIT</p>
<h2>اعتبارها</h2>
<ul>
<li><a href="https://github.com/asdine">Asdine El Hrychy</a></li>
<li><a href="https://github.com/bep">Bjørn Erik Pedersen</a></li>
</ul>
<hr />
<p>Tranlated By <a href="https://github.com/OpenAiTx/OpenAiTx">Open Ai Tx</a> | Last indexed: 2025-06-11</p>
<hr />

        </div>
    </div>
    <footer class="footer">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank">Open AI Tx</a>
    </footer>
    <!-- Default Statcounter code for openaitx
https://openaitx.github.io/ -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>
    <!-- End of Statcounter Code -->
</body>
</html>