<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>storm - asdine/storm</title>
    <meta name="title" content="storm - asdine/storm">
    <meta name="description" content="asdine/storm - GitHub repository ar documentation and informationStorm Storm هو مجموعة أدوات بسيطة وقوية لـ BoltDB. بشكل أساسي، يوفر Storm الفهارس، ونطاقًا واسعًا من الطرق لتخزين وجلب البيانات، ونظام استعلام متقدم، وأكثر من ذ...">
    <meta name="keywords" content="asdine, storm, GitHub, repository, ar documentation">
    <meta name="author" content="Open AI Tx">
    <meta name="robots" content="index, follow">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://openaitx.github.io/projects/asdine/storm/README-ar.html">
    <meta property="og:title" content="storm - asdine/storm">
    <meta property="og:description" content="asdine/storm - GitHub repository ar documentation and information">
    <meta property="og:image" content="https://openaitx.github.io/logo_crop.png">
    <link rel="icon" type="image/jpeg" href="/icon.jpg">
    <link rel="apple-touch-icon" href="/icon.jpg">
    <script src="/js/marked.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/css/github.min.css?v=20250613">
    <script src="/js/highlight.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/view.css?v=20250613">
    <style>
        body { display: flex; flex-direction: column; min-height: 100vh; }
        .main-container { margin: 0 auto; width: 100%; max-width: 980px; padding: 0 20px; }
        @media (max-width: 768px) { .main-container { padding: 0 15px; } }
        .markdown-body img { max-width: 100%; height: auto; }
        .header { text-align: center; margin-bottom: 30px; padding: 20px; background-color: #f6f8fa; border-bottom: 1px solid #e1e4e8; position: relative; }
        .header .links { margin-top: 10px; font-size: 16px; }
        .header .links a { color: #0366d6; text-decoration: none; margin-left: 5px; }
        .header .links a:hover { text-decoration: underline; }
        .language-badges { margin-top: 15px; text-align: center; }
        .language-badges a { display: inline-block; margin: 2px; text-decoration: none; }
        .language-badges img { height: 20px; border-radius: 3px; }
        .language-badges a:hover img { opacity: 0.8; }
    </style>
</head>
<body>
    <div class="header">
        <div class="links">
            GitHub Repository: <a href="https://github.com/asdine/storm" id="githubRepoLink" target="_blank">asdine/storm</a>
<h1 style="display: none;">Storm Storm هو مجموعة أدوات بسيطة وقوية لـ BoltDB. بشكل أساسي، يوفر Storm الفهارس، ونطاقًا واسعًا من الطرق لتخزين وجلب البيانات، ونظام استعلام متقدم، وأكثر من ذ...</h1>
        </div>
        <div class="language-badges" id="languageBadges">
            <!-- You can generate language badges here if needed -->
        </div>
    </div>
    <div class="main-container">
        <div class="markdown-body" id="content">
            <h1>Storm</h1>
<p><a href="https://travis-ci.org/asdine/storm"><img src="https://travis-ci.org/asdine/storm.svg" alt="Build Status" /></a>
<a href="https://godoc.org/github.com/asdine/storm"><img src="https://godoc.org/github.com/asdine/storm?status.svg" alt="GoDoc" /></a></p>
<p>Storm هو مجموعة أدوات بسيطة وقوية لـ <a href="https://github.com/coreos/bbolt">BoltDB</a>. بشكل أساسي، يوفر Storm الفهارس، ونطاقًا واسعًا من الطرق لتخزين وجلب البيانات، ونظام استعلام متقدم، وأكثر من ذلك بكثير.</p>
<p>بالإضافة إلى الأمثلة أدناه، راجع أيضًا <a href="https://godoc.org/github.com/asdine/storm#pkg-examples">الأمثلة في GoDoc</a>.</p>
<p><em>للحصول على استعلامات موسعة ودعم لـ <a href="https://github.com/dgraph-io/badger">Badger</a>، راجع أيضًا <a href="https://github.com/asdine/genji">Genji</a></em></p>
<h2>جدول المحتويات</h2>
<ul>
<li><a href="#getting-started">البدء</a></li>
<li><a href="#import-storm">استيراد Storm</a></li>
<li><a href="#open-a-database">فتح قاعدة بيانات</a></li>
<li><a href="#simple-crud-system">نظام CRUD بسيط</a>
<ul>
<li><a href="#declare-your-structures">تعريف الهياكل</a></li>
<li><a href="#save-your-object">حفظ الكائن</a>
<ul>
<li><a href="#auto-increment">الزيادة التلقائية</a></li>
</ul>
</li>
<li><a href="#simple-queries">استعلامات بسيطة</a>
<ul>
<li><a href="#fetch-one-object">جلب كائن واحد</a></li>
<li><a href="#fetch-multiple-objects">جلب عدة كائنات</a></li>
<li><a href="#fetch-all-objects">جلب جميع الكائنات</a></li>
<li><a href="#fetch-all-objects-sorted-by-index">جلب جميع الكائنات مرتبة حسب الفهرس</a></li>
<li><a href="#fetch-a-range-of-objects">جلب نطاق من الكائنات</a></li>
<li><a href="#fetch-objects-by-prefix">جلب الكائنات حسب البادئة</a></li>
<li><a href="#skip-limit-and-reverse">تخطي، حد، وعكس</a></li>
<li><a href="#delete-an-object">حذف كائن</a></li>
<li><a href="#update-an-object">تحديث كائن</a></li>
<li><a href="#initialize-buckets-and-indexes-before-saving-an-object">تهيئة الحاويات والفهارس قبل حفظ الكائن</a></li>
<li><a href="#drop-a-bucket">حذف حاوية</a></li>
<li><a href="#re-index-a-bucket">إعادة فهرسة حاوية</a></li>
</ul>
</li>
<li><a href="#advanced-queries">استعلامات متقدمة</a></li>
<li><a href="#transactions">المعاملات</a></li>
<li><a href="#options">الخيارات</a>
<ul>
<li><a href="#boltoptions">خيارات Bolt</a></li>
<li><a href="#marshalunmarshaler">MarshalUnmarshaler</a>
<ul>
<li><a href="#provided-codecs">الترميزات المضمنة</a></li>
</ul>
</li>
<li><a href="#use-existing-bolt-connection">استخدام اتصال Bolt موجود</a></li>
<li><a href="#batch-mode">وضع الدُفعات</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#nodes-and-nested-buckets">العُقد والحاويات المتداخلة</a>
<ul>
<li><a href="#node-options">خيارات العقدة</a></li>
</ul>
</li>
<li><a href="#simple-keyvalue-store">مخزن مفتاح/قيمة بسيط</a></li>
<li><a href="#boltdb">BoltDB</a></li>
<li><a href="#license">الترخيص</a></li>
<li><a href="#credits">الاعتمادات</a></li>
</ul>
<h2>البدء</h2>
<pre><code class="language-bash">GO111MODULE=on go get -u github.com/asdine/storm/v3
</code></pre>
<h2>استيراد Storm</h2>
<pre><code class="language-go">import &quot;github.com/asdine/storm/v3&quot;
</code></pre>
<h2>فتح قاعدة بيانات</h2>
<p>طريقة سريعة لفتح قاعدة بيانات</p>
<pre><code class="language-go">db, err := storm.Open(&quot;my.db&quot;)

defer db.Close()
</code></pre>
<p>يمكن أن يستقبل <code>Open</code> عدة خيارات لتخصيص طريقة عمله. راجع <a href="#options">الخيارات</a> أدناه</p>
<h2>نظام CRUD بسيط</h2>
<h3>تعريف الهياكل</h3>
<pre><code class="language-go">type User struct {
  ID int // المفتاح الأساسي
  Group string `storm:&quot;index&quot;` // سيتم فهرسة هذا الحقل
  Email string `storm:&quot;unique&quot;` // سيتم فهرسة هذا الحقل بقيد فريد
  Name string // هذا الحقل لن يتم فهرسته
  Age int `storm:&quot;index&quot;`
}
</code></pre>
<p>يمكن أن يكون المفتاح الأساسي من أي نوع طالما أنه ليس قيمة صفرية. سيبحث Storm عن الوسم <code>id</code>، إذا لم يكن موجودًا سيبحث Storm عن حقل باسم <code>ID</code>.</p>
<pre><code class="language-go">type User struct {
  ThePrimaryKey string `storm:&quot;id&quot;`// المفتاح الأساسي
  Group string `storm:&quot;index&quot;` // سيتم فهرسة هذا الحقل
  Email string `storm:&quot;unique&quot;` // سيتم فهرسة هذا الحقل بقيد فريد
  Name string // هذا الحقل لن يتم فهرسته
}
</code></pre>
<p>يتعامل Storm مع الوسوم في الهياكل المتداخلة باستخدام الوسم <code>inline</code></p>
<pre><code class="language-go">type Base struct {
  Ident bson.ObjectId `storm:&quot;id&quot;`
}

type User struct {
  Base      `storm:&quot;inline&quot;`
  Group     string `storm:&quot;index&quot;`
  Email     string `storm:&quot;unique&quot;`
  Name      string
  CreatedAt time.Time `storm:&quot;index&quot;`
}
</code></pre>
<h3>حفظ الكائن</h3>
<pre><code class="language-go">user := User{
  ID: 10,
  Group: &quot;staff&quot;,
  Email: &quot;john@provider.com&quot;,
  Name: &quot;John&quot;,
  Age: 21,
  CreatedAt: time.Now(),
}

err := db.Save(&amp;user)
// err == nil

user.ID++
err = db.Save(&amp;user)
// err == storm.ErrAlreadyExists
</code></pre>
<p>هذا كل شيء.</p>
<p>يقوم <code>Save</code> بإنشاء أو تحديث جميع الفهارس والحاويات المطلوبة، ويتحقق من القيود الفريدة ويحفظ الكائن في المخزن.</p>
<h4>الزيادة التلقائية</h4>
<p>يمكن لـ Storm زيادة القيم الصحيحة تلقائيًا حتى لا تقلق بشأن ذلك عند حفظ الكائنات الخاصة بك. أيضًا، يتم إدراج القيمة الجديدة تلقائيًا في الحقل الخاص بك.</p>
<pre><code class="language-go">
type Product struct {
  Pk                  int `storm:&quot;id,increment&quot;` // مفتاح أساسي مع زيادة تلقائية
  Name                string
  IntegerField        uint64 `storm:&quot;increment&quot;`
  IndexedIntegerField uint32 `storm:&quot;index,increment&quot;`
  UniqueIntegerField  int16  `storm:&quot;unique,increment=100&quot;` // يمكن تعيين القيمة الابتدائية
}

p := Product{Name: &quot;Vaccum Cleaner&quot;}

fmt.Println(p.Pk)
fmt.Println(p.IntegerField)
fmt.Println(p.IndexedIntegerField)
fmt.Println(p.UniqueIntegerField)
// 0
// 0
// 0
// 0

_ = db.Save(&amp;p)

fmt.Println(p.Pk)
fmt.Println(p.IntegerField)
fmt.Println(p.IndexedIntegerField)
fmt.Println(p.UniqueIntegerField)
// 1
// 1
// 1
// 100

</code></pre>
<h3>استعلامات بسيطة</h3>
<p>يمكن جلب أي كائن سواء كان مفهرسًا أو غير مفهرس. يستخدم Storm الفهارس عندما تكون متاحة، وإلا يستخدم <a href="#advanced-queries">نظام الاستعلام</a>.</p>
<h4>جلب كائن واحد</h4>
<pre><code class="language-go">var user User
err := db.One(&quot;Email&quot;, &quot;john@provider.com&quot;, &amp;user)
// err == nil

err = db.One(&quot;Name&quot;, &quot;John&quot;, &amp;user)
// err == nil

err = db.One(&quot;Name&quot;, &quot;Jack&quot;, &amp;user)
// err == storm.ErrNotFound
</code></pre>
<h4>جلب عدة كائنات</h4>
<pre><code class="language-go">var users []User
err := db.Find(&quot;Group&quot;, &quot;staff&quot;, &amp;users)
</code></pre>
<h4>جلب جميع الكائنات</h4>
<pre><code class="language-go">var users []User
err := db.All(&amp;users)
</code></pre>
<h4>جلب جميع الكائنات مرتبة حسب الفهرس</h4>
<pre><code class="language-go">var users []User
err := db.AllByIndex(&quot;CreatedAt&quot;, &amp;users)
</code></pre>
<h4>جلب نطاق من الكائنات</h4>
<pre><code class="language-go">var users []User
err := db.Range(&quot;Age&quot;, 10, 21, &amp;users)
</code></pre>
<h4>جلب الكائنات حسب البادئة</h4>
<pre><code class="language-go">var users []User
err := db.Prefix(&quot;Name&quot;, &quot;Jo&quot;, &amp;users)
</code></pre>
<h4>التجاوز، التحديد والعكس</h4>
<pre><code class="language-go">var users []User
err := db.Find(&quot;Group&quot;, &quot;staff&quot;, &amp;users, storm.Skip(10))
err = db.Find(&quot;Group&quot;, &quot;staff&quot;, &amp;users, storm.Limit(10))
err = db.Find(&quot;Group&quot;, &quot;staff&quot;, &amp;users, storm.Reverse())
err = db.Find(&quot;Group&quot;, &quot;staff&quot;, &amp;users, storm.Limit(10), storm.Skip(10), storm.Reverse())

err = db.All(&amp;users, storm.Limit(10), storm.Skip(10), storm.Reverse())
err = db.AllByIndex(&quot;CreatedAt&quot;, &amp;users, storm.Limit(10), storm.Skip(10), storm.Reverse())
err = db.Range(&quot;Age&quot;, 10, 21, &amp;users, storm.Limit(10), storm.Skip(10), storm.Reverse())
</code></pre>
<h4>حذف كائن</h4>
<pre><code class="language-go">err := db.DeleteStruct(&amp;user)
</code></pre>
<h4>تحديث كائن</h4>
<pre><code class="language-go">// تحديث عدة حقول
// يعمل فقط مع الحقول التي ليست بقيمتها الصفرية (مثلاً: لا يمكن أن يكون Name = &quot;&quot; أو Age = 0)
err := db.Update(&amp;User{ID: 10, Name: &quot;Jack&quot;, Age: 45})

// تحديث حقل واحد
// يعمل أيضاً مع الحقول ذات القيم الصفرية (0, false, &quot;&quot;, ...)
err := db.UpdateField(&amp;User{ID: 10}, &quot;Age&quot;, 0)
</code></pre>
<h4>تهيئة الحاويات والفهارس قبل حفظ الكائن</h4>
<pre><code class="language-go">err := db.Init(&amp;User{})
</code></pre>
<p>مفيد عند بدء تشغيل التطبيق الخاص بك</p>
<h4>حذف حاوية</h4>
<p>باستخدام البنية الهيكلية</p>
<pre><code class="language-go">err := db.Drop(&amp;User)
</code></pre>
<p>باستخدام اسم الحاوية</p>
<pre><code class="language-go">err := db.Drop(&quot;User&quot;)
</code></pre>
<h4>إعادة فهرسة الحاوية</h4>
<pre><code class="language-go">err := db.ReIndex(&amp;User{})
</code></pre>
<p>مفيد عند تغيير البنية الهيكلية</p>
<h3>الاستعلامات المتقدمة</h3>
<p>للاستعلامات الأكثر تعقيدًا، يمكنك استخدام دالة <code>Select</code>.
تأخذ <code>Select</code> أي عدد من <a href="https://godoc.org/github.com/asdine/storm/q#Matcher"><code>Matcher</code></a> من حزمة <a href="https://godoc.org/github.com/asdine/storm/q"><code>q</code></a>.</p>
<p>إليك بعض المطابقات الشائعة:</p>
<pre><code class="language-go">// المساواة
q.Eq(&quot;Name&quot;, John)

// أكبر من بشكل صارم
q.Gt(&quot;Age&quot;, 7)

// أصغر من أو يساوي
q.Lte(&quot;Age&quot;, 77)

// تعبير نمطي (Regex) لاسم يبدأ بالحرف D
q.Re(&quot;Name&quot;, &quot;^D&quot;)

// ضمن مصفوفة القيم المحددة
q.In(&quot;Group&quot;, []string{&quot;Staff&quot;, &quot;Admin&quot;})

// مقارنة الحقول
q.EqF(&quot;FieldName&quot;, &quot;SecondFieldName&quot;)
q.LtF(&quot;FieldName&quot;, &quot;SecondFieldName&quot;)
q.GtF(&quot;FieldName&quot;, &quot;SecondFieldName&quot;)
q.LteF(&quot;FieldName&quot;, &quot;SecondFieldName&quot;)
q.GteF(&quot;FieldName&quot;, &quot;SecondFieldName&quot;)
</code></pre>
<p>يمكن أيضًا دمج المطابقات باستخدام <code>And</code>، <code>Or</code> و <code>Not</code>:</p>
<pre><code class="language-go">
// يطابق إذا تطابقت جميع الشروط
q.And(
  q.Gt(&quot;Age&quot;, 7),
  q.Re(&quot;Name&quot;, &quot;^D&quot;)
)

// يطابق إذا تحقق شرط واحد على الأقل
q.Or(
  q.Re(&quot;Name&quot;, &quot;^A&quot;),
  q.Not(
    q.Re(&quot;Name&quot;, &quot;^B&quot;)
  ),
  q.Re(&quot;Name&quot;, &quot;^C&quot;),
  q.In(&quot;Group&quot;, []string{&quot;Staff&quot;, &quot;Admin&quot;}),
  q.And(
    q.StrictEq(&quot;Password&quot;, []byte(password)),
    q.Eq(&quot;Registered&quot;, true)
  )
)
</code></pre>
<p>يمكنك العثور على القائمة الكاملة في <a href="https://godoc.org/github.com/asdine/storm/q#Matcher">التوثيق</a>.</p>
<p>تأخذ <code>Select</code> أي عدد من المطابقات وتغلفها تلقائيًا داخل <code>q.And()</code> لذا ليس من الضروري تحديدها. وتُرجع نوع <a href="https://godoc.org/github.com/asdine/storm#Query"><code>Query</code></a>.</p>
<pre><code class="language-go">query := db.Select(q.Gte(&quot;Age&quot;, 7), q.Lte(&quot;Age&quot;, 77))
</code></pre>
<p>يحتوي نوع <code>Query</code> على طرق لتصفية وترتيب السجلات.</p>
<pre><code class="language-go">// التحديد
query = query.Limit(10)

// التجاوز
query = query.Skip(20)

// يمكن أيضًا ربط الاستدعاءات
query = query.Limit(10).Skip(20).OrderBy(&quot;Age&quot;).Reverse()
</code></pre>
<p>وكذلك لتحديد كيفية جلبها.</p>
<pre><code class="language-go">var users []User
err = query.Find(&amp;users)

var user User
err = query.First(&amp;user)
</code></pre>
<p>أمثلة مع <code>Select</code>:</p>
<pre><code class="language-go">// إيجاد جميع المستخدمين الذين تتراوح معرفاتهم بين 10 و 100
err = db.Select(q.Gte(&quot;ID&quot;, 10), q.Lte(&quot;ID&quot;, 100)).Find(&amp;users)

// مطابقات متداخلة
err = db.Select(q.Or(
  q.Gt(&quot;ID&quot;, 50),
  q.Lt(&quot;Age&quot;, 21),
  q.And(
    q.Eq(&quot;Group&quot;, &quot;admin&quot;),
    q.Gte(&quot;Age&quot;, 21),
  ),
)).Find(&amp;users)

query := db.Select(q.Gte(&quot;ID&quot;, 10), q.Lte(&quot;ID&quot;, 100)).Limit(10).Skip(5).Reverse().OrderBy(&quot;Age&quot;, &quot;Name&quot;)

// إيجاد عدة سجلات
err = query.Find(&amp;users)
// أو
err = db.Select(q.Gte(&quot;ID&quot;, 10), q.Lte(&quot;ID&quot;, 100)).Limit(10).Skip(5).Reverse().OrderBy(&quot;Age&quot;, &quot;Name&quot;).Find(&amp;users)
</code></pre>
<pre><code class="language-go">// إيجاد أول سجل
err = query.First(&amp;user)
// أو
err = db.Select(q.Gte(&quot;ID&quot;, 10), q.Lte(&quot;ID&quot;, 100)).Limit(10).Skip(5).Reverse().OrderBy(&quot;Age&quot;, &quot;Name&quot;).First(&amp;user)

// حذف جميع السجلات المطابقة
err = query.Delete(new(User))

// جلب السجلات واحداً تلو الآخر (مفيد عندما يحتوي الحاوي على الكثير من السجلات)
query = db.Select(q.Gte(&quot;ID&quot;, 10),q.Lte(&quot;ID&quot;, 100)).OrderBy(&quot;Age&quot;, &quot;Name&quot;)

err = query.Each(new(User), func(record interface{}) error) {
  u := record.(*User)
  ...
  return nil
}
</code></pre>
<p>راجع <a href="https://godoc.org/github.com/asdine/storm#Query">التوثيق</a> لقائمة كاملة من الدوال.</p>
<h3>المعاملات</h3>
<pre><code class="language-go">tx, err := db.Begin(true)
if err != nil {
  return err
}
defer tx.Rollback()

accountA.Amount -= 100
accountB.Amount += 100

err = tx.Save(accountA)
if err != nil {
  return err
}

err = tx.Save(accountB)
if err != nil {
  return err
}

return tx.Commit()
</code></pre>
<h3>الخيارات</h3>
<p>خيارات Storm هي دوال يمكن تمريرها عند إنشاء مثيل Storm الخاص بك. يمكنك تمرير أي عدد من الخيارات.</p>
<h4>BoltOptions</h4>
<p>بشكل افتراضي، يقوم Storm بفتح قاعدة البيانات بالوضع <code>0600</code> ومدة انتظار ثانية واحدة.
يمكنك تغيير هذا السلوك باستخدام <code>BoltOptions</code></p>
<pre><code class="language-go">db, err := storm.Open(&quot;my.db&quot;, storm.BoltOptions(0600, &amp;bolt.Options{Timeout: 1 * time.Second}))
</code></pre>
<h4>MarshalUnmarshaler</h4>
<p>لحفظ البيانات في BoltDB، يقوم Storm بتحويلها إلى JSON بشكل افتراضي. إذا رغبت في تغيير هذا السلوك يمكنك تمرير codec ينفذ <a href="https://godoc.org/github.com/asdine/storm/codec#MarshalUnmarshaler"><code>codec.MarshalUnmarshaler</code></a> عبر خيار <a href="https://godoc.org/github.com/asdine/storm#Codec"><code>storm.Codec</code></a>:</p>
<pre><code class="language-go">db := storm.Open(&quot;my.db&quot;, storm.Codec(myCodec))
</code></pre>
<h5>codecs الموفرة</h5>
<p>يمكنك بسهولة تنفيذ <code>MarshalUnmarshaler</code> الخاص بك، لكن Storm يأتي بدعم مدمج لـ <a href="https://godoc.org/github.com/asdine/storm/codec/json">JSON</a> (افتراضي)، <a href="https://godoc.org/github.com/asdine/storm/codec/gob">GOB</a>،  <a href="https://godoc.org/github.com/asdine/storm/codec/sereal">Sereal</a>، <a href="https://godoc.org/github.com/asdine/storm/codec/protobuf">Protocol Buffers</a> و <a href="https://godoc.org/github.com/asdine/storm/codec/msgpack">MessagePack</a>.</p>
<p>يمكنك استخدام هذه الأكواد عبر استيراد الحزمة المناسبة واستخدام هذا الـ codec لتكوين Storm. المثال أدناه يوضح كل المتغيرات (دون معالجة أخطاء مناسبة):</p>
<pre><code class="language-go">import (
  &quot;github.com/asdine/storm/v3&quot;
  &quot;github.com/asdine/storm/v3/codec/gob&quot;
  &quot;github.com/asdine/storm/v3/codec/json&quot;
  &quot;github.com/asdine/storm/v3/codec/sereal&quot;
  &quot;github.com/asdine/storm/v3/codec/protobuf&quot;
  &quot;github.com/asdine/storm/v3/codec/msgpack&quot;
)

var gobDb, _ = storm.Open(&quot;gob.db&quot;, storm.Codec(gob.Codec))
var jsonDb, _ = storm.Open(&quot;json.db&quot;, storm.Codec(json.Codec))
var serealDb, _ = storm.Open(&quot;sereal.db&quot;, storm.Codec(sereal.Codec))
var protobufDb, _ = storm.Open(&quot;protobuf.db&quot;, storm.Codec(protobuf.Codec))
var msgpackDb, _ = storm.Open(&quot;msgpack.db&quot;, storm.Codec(msgpack.Codec))
</code></pre>
<p><strong>نصيحة</strong>: إضافة وسوم Storm لملفات Protobuf المولدة قد يكون صعباً. حل جيد هو استخدام <a href="https://github.com/favadi/protoc-go-inject-tag">هذه الأداة</a> لإدراج الوسوم أثناء الترجمة.</p>
<h4>استخدام اتصال Bolt موجود</h4>
<p>يمكنك استخدام اتصال موجود وتمريره إلى Storm</p>
<pre><code class="language-go">bDB, _ := bolt.Open(filepath.Join(dir, &quot;bolt.db&quot;), 0600, &amp;bolt.Options{Timeout: 10 * time.Second})
db := storm.Open(&quot;my.db&quot;, storm.UseDB(bDB))
</code></pre>
<h4>وضع الدفعية (Batch mode)</h4>
<p>يمكن تفعيل وضع الدفعية لتسريع عمليات الكتابة المتزامنة (راجع <a href="https://github.com/coreos/bbolt#batch-read-write-transactions">معاملات القراءة/الكتابة الدفعية</a>)</p>
<pre><code class="language-go">db := storm.Open(&quot;my.db&quot;, storm.Batch())
</code></pre>
<h2>العقد والحاويات المتداخلة</h2>
<p>يستفيد Storm من ميزة الحاويات المتداخلة في BoltDB باستخدام <code>storm.Node</code>.
العقدة <code>storm.Node</code> هي الكائن الأساسي الذي يستخدمه <code>storm.DB</code> للتحكم في الحاوي.
لإنشاء حاوي متداخل واستخدام نفس واجهة برمجة التطبيقات الخاصة بـ <code>storm.DB</code>، يمكنك استخدام الدالة <code>DB.From</code>.</p>
<pre><code class="language-go">repo := db.From(&quot;repo&quot;)

err := repo.Save(&amp;Issue{
  Title: &quot;أريد المزيد من الميزات&quot;,
  Author: user.ID,
})

err = repo.Save(newRelease(&quot;0.10&quot;))

var issues []Issue
err = repo.Find(&quot;Author&quot;, user.ID, &amp;issues)

var release Release
err = repo.One(&quot;Tag&quot;, &quot;0.10&quot;, &amp;release)
</code></pre>
<p>يمكنك أيضاً ربط العقد لإنشاء تسلسل هرمي</p>
<pre><code class="language-go">chars := db.From(&quot;characters&quot;)
heroes := chars.From(&quot;heroes&quot;)
enemies := chars.From(&quot;enemies&quot;)

items := db.From(&quot;items&quot;)
potions := items.From(&quot;consumables&quot;).From(&quot;medicine&quot;).From(&quot;potions&quot;)
</code></pre>
<p>يمكنك حتى تمرير التسلسل الهرمي بالكامل كوسائط إلى <code>From</code>:</p>
<pre><code class="language-go">privateNotes := db.From(&quot;notes&quot;, &quot;private&quot;)
workNotes :=  db.From(&quot;notes&quot;, &quot;work&quot;)
</code></pre>
<h3>خيارات العقدة</h3>
<p>يمكن أيضاً تكوين العقدة. تفعيل الخيار على العقدة ينشئ نسخة، لذا فإن العقدة دائماً آمنة للخيوط.</p>
<pre><code class="language-go">n := db.From(&quot;my-node&quot;)
</code></pre>
<p>إعطاء معاملة bolt.Tx للعقدة</p>
<pre><code class="language-go">n = n.WithTransaction(tx)
</code></pre>
<p>تفعيل وضع الدفعية</p>
<pre><code class="language-go">n = n.WithBatch(true)
</code></pre>
<p>استخدام Codec</p>
<pre><code class="language-go">n = n.WithCodec(gob.Codec)
</code></pre>
<h2>مخزن مفاتيح/قيم بسيط</h2>
<p>يمكن استخدام Storm كمخزن مفاتيح/قيم بسيط وموثوق يمكنه حفظ أي شيء.
المفتاح والقيمة يمكن أن يكونا من أي نوع طالما أن المفتاح ليس قيمة صفرية.</p>
<p>حفظ البيانات :</p>
<pre><code class="language-go">db.Set(&quot;logs&quot;, time.Now(), &quot;أنا آكل فطوري الآن&quot;)
db.Set(&quot;sessions&quot;, bson.NewObjectId(), &amp;someUser)
db.Set(&quot;weird storage&quot;, &quot;754-3010&quot;, map[string]interface{}{
  &quot;hair&quot;: &quot;blonde&quot;,
  &quot;likes&quot;: []string{&quot;cheese&quot;, &quot;star wars&quot;},
})
</code></pre>
<p>جلب البيانات :</p>
<pre><code class="language-go">user := User{}
db.Get(&quot;sessions&quot;, someObjectId, &amp;user)

var details map[string]interface{}
db.Get(&quot;weird storage&quot;, &quot;754-3010&quot;, &amp;details)
</code></pre>
<pre><code>db.Get(&quot;sessions&quot;, someObjectId, &amp;details)
</code></pre>
<p>حذف البيانات :</p>
<pre><code class="language-go">db.Delete(&quot;sessions&quot;, someObjectId)
db.Delete(&quot;weird storage&quot;, &quot;754-3010&quot;)
</code></pre>
<p>يمكنك العثور على طرق مفيدة أخرى في <a href="https://godoc.org/github.com/asdine/storm#KeyValueStore">التوثيق</a>.</p>
<h2>BoltDB</h2>
<p>لا يزال بإمكانك الوصول إلى BoltDB بسهولة ويمكن استخدامه كالمعتاد</p>
<pre><code class="language-go">db.Bolt.View(func(tx *bolt.Tx) error {
  bucket := tx.Bucket([]byte(&quot;my bucket&quot;))
  val := bucket.Get([]byte(&quot;any id&quot;))
  fmt.Println(string(val))
  return nil
})
</code></pre>
<p>يمكن أيضًا تمرير المعاملة إلى Storm</p>
<pre><code class="language-go">db.Bolt.Update(func(tx *bolt.Tx) error {
  ...
  dbx := db.WithTransaction(tx)
  err = dbx.Save(&amp;user)
  ...
  return nil
})
</code></pre>
<h2>الرخصة</h2>
<p>MIT</p>
<h2>الاعتمادات</h2>
<ul>
<li><a href="https://github.com/asdine">أسدين الحريشي</a></li>
<li><a href="https://github.com/bep">بيورن إريك بيديرسن</a></li>
</ul>
<hr />
<p>Tranlated By <a href="https://github.com/OpenAiTx/OpenAiTx">Open Ai Tx</a> | Last indexed: 2025-06-11</p>
<hr />

        </div>
    </div>
    <footer class="footer">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank">Open AI Tx</a>
    </footer>
    <!-- Statcounter and other scripts can be added here -->
</body>
</html>