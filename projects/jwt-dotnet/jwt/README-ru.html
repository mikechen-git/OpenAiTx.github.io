<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jwt - jwt-dotnet/jwt</title>
    <meta name="title" content="jwt - jwt-dotnet/jwt">
    <meta name="description" content="jwt-dotnet/jwt - GitHub repository ru documentation and informationJwt.Net, реализация JWT (JSON Web Token) для .NET Спонсор Доступные NuGet-пакеты Поддерживаемые версии .NET: Jwt.NET Создание (кодирование) токена Или с помощью fluent builder API Парсинг (декодирование) и проверка токена Или с помощью fluent builder API Или с помощью fluent builder API Проверка срока действия токена Парсинг (декодирование) заголовка токена Или с помощью fluent builder API Отключение части проверки токена Или с помощью fluent builder API Пользовательский JSON-сериализатор Пользовательские настройки сериализации JSON с использованием стандартного JsonNetSerializer Jwt.Net ASP.NET Core Регистрация обработчика аутентификации для проверки JWT Пользовательские фабрики для создания Identity или AuthenticationTicket Лицензия Jwt.Net, реализация JWT (JSON Web Token) для .NET Эта библиотека поддерживает генерацию и декодирование JSON Web Tokens. Спонсор | | | |-|-| | | Если вы хотите быстро внедрить безопасную аутентификацию в свой проект с JWT, создайте аккаунт в Auth0; это бесплатно! | Доступные NuGet-пакеты Jwt.Net Jwt.Net для контейнера внедрения зависимостей Microsoft Jwt.Net для ASP.NET Core Поддерживаемые версии...">
    <meta name="keywords" content="jwt-dotnet, jwt, GitHub, repository, ru documentation">
    <meta name="author" content="Open AI Tx">
    <meta name="robots" content="index, follow">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://openaitx.github.io/projects/jwt-dotnet/jwt/README-ru.html">
    <meta property="og:title" content="jwt - jwt-dotnet/jwt">
    <meta property="og:description" content="jwt-dotnet/jwt - GitHub repository ru documentation and information">
    <meta property="og:image" content="https://openaitx.github.io/logo_crop.png">
    <link rel="icon" type="image/jpeg" href="/icon.jpg">
    <link rel="apple-touch-icon" href="/icon.jpg">
    <script src="/js/marked.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/css/github.min.css?v=20250613">
    <script src="/js/highlight.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/view.css?v=20250613">
    <style>
        body { display: flex; flex-direction: column; min-height: 100vh; }
        .main-container { margin: 0 auto; width: 100%; max-width: 980px; padding: 0 20px; }
        @media (max-width: 768px) { .main-container { padding: 0 15px; } }
        .markdown-body img { max-width: 100%; height: auto; }
        .header { text-align: center; margin-bottom: 30px; padding: 20px; background-color: #f6f8fa; border-bottom: 1px solid #e1e4e8; position: relative; }
        .header .links { margin-top: 10px; font-size: 16px; }
        .header .links a { color: #0366d6; text-decoration: none; margin-left: 5px; }
        .header .links a:hover { text-decoration: underline; }
        .language-badges { margin-top: 15px; text-align: center; }
        .language-badges a { display: inline-block; margin: 2px; text-decoration: none; }
        .language-badges img { height: 20px; border-radius: 3px; }
        .language-badges a:hover img { opacity: 0.8; }
    </style>
</head>
<body>
    <div class="header">
        <div class="links">
            GitHub Repository: <a href="https://github.com/jwt-dotnet/jwt" id="githubRepoLink" target="_blank">jwt-dotnet/jwt</a>
<br>
<h1 style="display: none;">Jwt.Net, реализация JWT (JSON Web Token) для .NET Спонсор Доступные NuGet-пакеты Поддерживаемые версии .NET: Jwt.NET Создание (кодирование) токена Или с помощью fluent builder API Парсинг (декодирование) и проверка токена Или с помощью fluent builder API Или с помощью fluent builder API Проверка срока действия токена Парсинг (декодирование) заголовка токена Или с помощью fluent builder API Отключение части проверки токена Или с помощью fluent builder API Пользовательский JSON-сериализатор Пользовательские настройки сериализации JSON с использованием стандартного JsonNetSerializer Jwt.Net ASP.NET Core Регистрация обработчика аутентификации для проверки JWT Пользовательские фабрики для создания Identity или AuthenticationTicket Лицензия Jwt.Net, реализация JWT (JSON Web Token) для .NET Эта библиотека поддерживает генерацию и декодирование JSON Web Tokens. Спонсор | | | |-|-| | | Если вы хотите быстро внедрить безопасную аутентификацию в свой проект с JWT, создайте аккаунт в Auth0; это бесплатно! | Доступные NuGet-пакеты Jwt.Net Jwt.Net для контейнера внедрения зависимостей Microsoft Jwt.Net для ASP.NET Core Поддерживаемые версии...</h1>
        </div>
        <div class="language-badges" id="languageBadges">
            <!-- You can generate language badges here if needed -->
        </div>
    </div>
    <div class="main-container">
        <div class="markdown-body" id="content">
            <!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DO NOT EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<ul>
<li><a href="#jwtnet-a-jwt-json-web-token-implementation-for-net">Jwt.Net, реализация JWT (JSON Web Token) для .NET</a></li>
<li><a href="#sponsor">Спонсор</a></li>
<li><a href="#avaliable-nuget-packages">Доступные NuGet-пакеты</a></li>
<li><a href="#supported-net-versions">Поддерживаемые версии .NET:</a></li>
<li><a href="#jwtnet">Jwt.NET</a>
<ul>
<li><a href="#creating-encoding-token">Создание (кодирование) токена</a>
<ul>
<li><a href="#or-using-the-fluent-builder-api">Или с помощью fluent builder API</a></li>
</ul>
</li>
<li><a href="#parsing-decoding-and-verifying-token">Парсинг (декодирование) и проверка токена</a>
<ul>
<li><a href="#or-using-the-fluent-builder-api-1">Или с помощью fluent builder API</a></li>
<li><a href="#or-using-the-fluent-builder-api-2">Или с помощью fluent builder API</a></li>
</ul>
</li>
<li><a href="#validate-token-expiration">Проверка срока действия токена</a></li>
<li><a href="#parsing-decoding-token-header">Парсинг (декодирование) заголовка токена</a>
<ul>
<li><a href="#or-using-the-fluent-builder-api-3">Или с помощью fluent builder API</a></li>
</ul>
</li>
<li><a href="#turning-off-parts-of-token-validation">Отключение части проверки токена</a>
<ul>
<li><a href="#or-using-the-fluent-builder-api-4">Или с помощью fluent builder API</a></li>
</ul>
</li>
<li><a href="#custom-json-serializer">Пользовательский JSON-сериализатор</a></li>
<li><a href="#custom-json-serialization-settings-with-the-default-jsonnetserializer">Пользовательские настройки сериализации JSON с использованием стандартного JsonNetSerializer</a></li>
</ul>
</li>
<li><a href="#jwtnet-aspnet-core">Jwt.Net ASP.NET Core</a>
<ul>
<li><a href="#register-authentication-handler-to-validate-jwt">Регистрация обработчика аутентификации для проверки JWT</a></li>
<li><a href="#custom-factories-to-produce-identity-or-authenticationticket">Пользовательские фабрики для создания Identity или AuthenticationTicket</a></li>
</ul>
</li>
<li><a href="#license">Лицензия</a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<p><a href="https://abatishchev.visualstudio.com/OpenSource/_build/latest?definitionId=9"><img src="https://abatishchev.visualstudio.com/OpenSource/_apis/build/status/Jwt.Net-CI" alt="Build status" /></a>
<a href="https://abatishchev.visualstudio.com/OpenSource/_release?_a=releases&amp;view=mine&amp;definitionId=2"><img src="https://abatishchev.vsrm.visualstudio.com/_apis/public/Release/badge/b7fc2610-91d5-4968-814c-97a9d76b03c4/2/2" alt="Release status" /></a></p>
<h2>Jwt.Net, реализация JWT (JSON Web Token) для .NET</h2>
<p>Эта библиотека поддерживает генерацию и декодирование <a href="https://tools.ietf.org/html/rfc7519">JSON Web Tokens</a>.</p>
<h2>Спонсор</h2>
<p>| | |
|-|-|
| <a href="https://a0.to/try-auth0"><img alt="Auth0 logo" src="https://cdn.auth0.com/blog/github-sponsorships/brand-evolution-logo-Auth0-horizontal-Indigo.png" height="91"></a> | Если вы хотите быстро внедрить безопасную аутентификацию в свой проект с JWT, <a href="https://a0.to/try-auth0">создайте аккаунт в Auth0</a>; это бесплатно! |</p>
<h2>Доступные NuGet-пакеты</h2>
<ol>
<li>Jwt.Net</li>
</ol>
<p><a href="https://www.nuget.org/packages/JWT"><img src="https://img.shields.io/nuget/v/JWT.svg" alt="NuGet" /></a>
<a href="https://www.nuget.org/packages/JWT"><img src="https://img.shields.io/nuget/vpre/JWT.svg" alt="NuGet Pre" /></a></p>
<ol start="2">
<li>Jwt.Net для контейнера внедрения зависимостей Microsoft</li>
</ol>
<p><a href="https://www.nuget.org/packages/JWT.Extensions.DependencyInjection"><img src="https://img.shields.io/nuget/v/JWT.Extensions.DependencyInjection.svg" alt="NuGet" /></a>
<a href="https://www.nuget.org/packages/JWT.Extensions.DependencyInjection"><img src="https://img.shields.io/nuget/vpre/JWT.Extensions.DependencyInjection.svg" alt="NuGet Pre" /></a></p>
<ol start="3">
<li>Jwt.Net для ASP.NET Core</li>
</ol>
<p><a href="https://www.nuget.org/packages/JWT.Extensions.AspNetCore"><img src="https://img.shields.io/nuget/v/JWT.Extensions.AspNetCore.svg" alt="NuGet" /></a>
<a href="https://www.nuget.org/packages/JWT.Extensions.AspNetCore"><img src="https://img.shields.io/nuget/vpre/JWT.Extensions.AspNetCore.svg" alt="NuGet Pre" /></a></p>
<h2>Поддерживаемые версии .NET:</h2>
<ul>
<li>.NET Framework 3.5</li>
<li>.NET Framework 4.0 - 4.8</li>
<li>.NET Standard 1.3, 2.0</li>
<li>.NET 6.0</li>
</ul>
<h2>Jwt.NET</h2>
<h3>Создание (кодирование) токена</h3>
<pre><code class="language-c#">var payload = new Dictionary&lt;string, object&gt;
{
    { &quot;claim1&quot;, 0 },
    { &quot;claim2&quot;, &quot;claim2-value&quot; }
};

IJwtAlgorithm algorithm = new RS256Algorithm(certificate);
IJsonSerializer serializer = new JsonNetSerializer();
IBase64UrlEncoder urlEncoder = new JwtBase64UrlEncoder();
IJwtEncoder encoder = new JwtEncoder(algorithm, serializer, urlEncoder);
const string key = null; // не требуется, если используется асимметричный алгоритм

var token = encoder.Encode(payload, key);
Console.WriteLine(token);
</code></pre>
<h4>Или с помощью fluent builder API</h4>
<pre><code class="language-c#">var token = JwtBuilder.Create()
                      .WithAlgorithm(new RS256Algorithm(certificate))
                      .AddClaim(&quot;exp&quot;, DateTimeOffset.UtcNow.AddHours(1).ToUnixTimeSeconds())
                      .AddClaim(&quot;claim1&quot;, 0)
                      .AddClaim(&quot;claim2&quot;, &quot;claim2-value&quot;)
                      .Encode();
Console.WriteLine(token);
</code></pre>
<h3>Парсинг (декодирование) и проверка токена</h3>
<pre><code class="language-c#">try
{
    IJsonSerializer serializer = new JsonNetSerializer();
    IDateTimeProvider provider = new UtcDateTimeProvider();
    IJwtValidator validator = new JwtValidator(serializer, provider);
    IBase64UrlEncoder urlEncoder = new JwtBase64UrlEncoder();
    IJwtAlgorithm algorithm = new RS256Algorithm(certificate);
    IJwtDecoder decoder = new JwtDecoder(serializer, validator, urlEncoder, algorithm);
    
    var json = decoder.Decode(token);
    Console.WriteLine(json);
}
catch (TokenNotYetValidException)
{
    Console.WriteLine(&quot;Token is not valid yet&quot;);
}
catch (TokenExpiredException)
{
    Console.WriteLine(&quot;Token has expired&quot;);
}
catch (SignatureVerificationException)
{
    Console.WriteLine(&quot;Token has invalid signature&quot;);
}
</code></pre>
<h4>Или с помощью fluent builder API</h4>
<pre><code class="language-c#">var json = JwtBuilder.Create()
                     .WithAlgorithm(new RS256Algorithm(certificate))
                     .MustVerifySignature()
                     .Decode(token);                    
Console.WriteLine(json);
</code></pre>
<p>Результат будет:</p>
<blockquote>
<p>{ &quot;claim1&quot;: 0, &quot;claim2&quot;: &quot;claim2-value&quot; }</p>
</blockquote>
<p>Вы также можете десериализовать JSON-полезную нагрузку напрямую в тип .NET:</p>
<pre><code class="language-c#">var payload = decoder.DecodeToObject&lt;IDictionary&lt;string, object&gt;&gt;(token, secret);
</code></pre>
<h4>Или с помощью fluent builder API</h4>
<pre><code class="language-c#">var payload = JwtBuilder.Create()
                        .WithAlgorithm(new RS256Algorithm(certificate))
                        .WithSecret(secret)
                        .MustVerifySignature()
                        .Decode&lt;IDictionary&lt;string, object&gt;&gt;(token);     
</code></pre>
<h3>Проверка срока действия токена</h3>
<p>Как указано в <a href="https://tools.ietf.org/html/rfc7519#section-4.1.4">RFC 7519, раздел 4.1.4</a>:</p>
<blockquote>
<p>Поле <code>exp</code> определяет момент времени, после которого JWT НЕ ДОЛЖЕН приниматься для обработки.</p>
</blockquote>
<p>Если это поле присутствует в полезной нагрузке и его значение меньше текущего времени, токен не пройдет проверку. Значение должно быть указано как количество секунд с <a href="https://en.wikipedia.org/wiki/Unix_time">эпохи Unix</a>, 1/1/1970 00:00:00 UTC.</p>
<pre><code class="language-c#">IDateTimeProvider provider = new UtcDateTimeProvider();
var now = provider.GetNow().AddMinutes(-5); // токен истек 5 минут назад

double secondsSinceEpoch = UnixEpoch.GetSecondsSince(now);

var payload = new Dictionary&lt;string, object&gt;
{
    { &quot;exp&quot;, secondsSinceEpoch }
};
var token = encoder.Encode(payload);

decoder.Decode(token); // выбрасывает TokenExpiredException
</code></pre>
<p>Далее, как указано в <a href="https://tools.ietf.org/html/rfc7519#section-4.1.5">RFC 7519, раздел 4.1.5</a>:</p>
<blockquote>
<p>Поле &quot;nbf&quot; (not before) определяет момент времени, до которого JWT НЕ ДОЛЖЕН приниматься для обработки</p>
</blockquote>
<p>Если это поле присутствует в полезной нагрузке и его значение больше текущего времени, токен не пройдет проверку.</p>
<h3>Парсинг (декодирование) заголовка токена</h3>
<pre><code class="language-c#">IJsonSerializer serializer = new JsonNetSerializer();
IBase64UrlEncoder urlEncoder = new JwtBase64UrlEncoder();
IJwtDecoder decoder = new JwtDecoder(serializer, urlEncoder);

JwtHeader header = decoder.DecodeHeader&lt;JwtHeader&gt;(token);

var typ = header.Type; // JWT
var alg = header.Algorithm; // RS256
var kid = header.KeyId; // CFAEAE2D650A6CA9862575DE54371EA980643849
</code></pre>
<h4>Или с помощью fluent builder API</h4>
<pre><code class="language-c#">JwtHeader header = JwtBuilder.Create()
                             .DecodeHeader&lt;JwtHeader&gt;(token);

var typ = header.Type; // JWT
var alg = header.Algorithm; // RS256
var kid = header.KeyId; // CFAEAE2D650A6CA9862575DE54371EA980643849
</code></pre>
<h3>Отключение частей валидации токена</h3>
<p>Если вы хотите валидировать токен, но игнорировать некоторые части валидации (например, истёк ли срок действия токена или ещё не наступил), вы можете передать объект <code>ValidateParameters</code> в конструктор класса <code>JwtValidator</code>.</p>
<pre><code class="language-c#">var validationParameters = new ValidationParameters
{
    ValidateSignature = true,
    ValidateExpirationTime = false,
    ValidateIssuedTime = false,
    TimeMargin = 100
};
IJwtValidator validator = new JwtValidator(serializer, provider, validationParameters);
IJwtDecoder decoder = new JwtDecoder(serializer, validator, urlEncoder, algorithm);
var json = decoder.Decode(expiredToken); // не выбросит исключение из-за истёкшего токена
</code></pre>
<h4>Или используя fluent builder API</h4>
<pre><code class="language-c#">var json = JwtBuilder.Create()
                     .WithAlgorithm(new RS256Algorirhm(certificate))
                     .WithSecret(secret)
                     .WithValidationParameters(
                         new ValidationParameters
                         {
                             ValidateSignature = true,
                             ValidateExpirationTime = false,
                             ValidateIssuedTime = false,
                             TimeMargin = 100
                         })
                     .Decode(expiredToken);
</code></pre>
<h3>Пользовательский JSON-сериализатор</h3>
<p>По умолчанию сериализация JSON выполняется с помощью JsonNetSerializer, реализованного с использованием <a href="https://www.json.net">Json.Net</a>. Чтобы использовать другой сериализатор, реализуйте интерфейс <code>IJsonSerializer</code>:</p>
<pre><code class="language-c#">public sealed class CustomJsonSerializer : IJsonSerializer
{
    public string Serialize(object obj)
    {
        // Реализуйте с использованием любимого JSON-сериализатора
    }

    public T Deserialize&lt;T&gt;(string json)
    {
        // Реализуйте с использованием любимого JSON-сериализатора
    }
}
</code></pre>
<p>Затем передайте этот сериализатор в конструктор JwtEncoder:</p>
<pre><code class="language-c#">IJwtAlgorithm algorithm = new RS256Algorirhm(certificate);
IJsonSerializer serializer = new CustomJsonSerializer();
IBase64UrlEncoder urlEncoder = new JwtBase64UrlEncoder();
IJwtEncoder encoder = new JwtEncoder(algorithm, serializer, urlEncoder);
</code></pre>
<h3>Пользовательские настройки сериализации JSON с использованием стандартного JsonNetSerializer</h3>
<p>Как упоминалось выше, сериализация JSON по умолчанию выполняется с помощью <code>JsonNetSerializer</code>. Вы можете определить свои собственные настройки сериализации следующим образом:</p>
<pre><code class="language-c#">JsonSerializer customJsonSerializer = new JsonSerializer
{
    // Все ключи начинаются с маленькой буквы вместо использования регистра модели/свойства, например, fullName
    ContractResolver = new CamelCasePropertyNamesContractResolver(), 
    
    // Красиво и удобно для чтения, но вы также можете использовать Formatting.None для уменьшения размера данных
    Formatting = Formatting.Indented,
    
    // Наиболее подходящий формат даты и времени.
    DateFormatHandling = DateFormatHandling.IsoDateFormat,
    
    // Не добавлять ключи/значения, если значение равно null.
    NullValueHandling = NullValueHandling.Ignore,
    
    // Использовать строковое значение enum, а не неявное int-значение, например, &quot;red&quot; для enum Color { Red }
    Converters.Add(new StringEnumConverter())
};
IJsonSerializer serializer = new JsonNetSerializer(customJsonSerializer);
</code></pre>
<h2>Jwt.Net ASP.NET Core</h2>
<h3>Регистрируем обработчик аутентификации для проверки JWT</h3>
<pre><code class="language-c#">public void ConfigureServices(IServiceCollection services)
{
    services.AddAuthentication(options =&gt;
                 {
                     options.DefaultAuthenticateScheme = JwtAuthenticationDefaults.AuthenticationScheme;
                     options.DefaultChallengeScheme = JwtAuthenticationDefaults.AuthenticationScheme;
                 })
            .AddJwt(options =&gt;
                 {
                     // секреты, требуются только для симметричных алгоритмов, например, HMACSHA256Algorithm
                     // options.Keys = new[] { &quot;mySecret&quot; };
                     
                     // необязательно; отключает выброс исключения при недействительной подписи JWT
                     // options.VerifySignature = false;
                 });
  // не-генерик версия AddJwt() требует ручной регистрации экземпляра IAlgorithmFactory
  services.AddSingleton&lt;IAlgorithmFactory&gt;(new RSAlgorithmFactory(certificate));
  // или
  services.AddSingleton&lt;IAlgorithmFactory&gt;(new DelegateAlgorithmFactory(algorithm));

  // или используйте генерик-версию AddJwt&lt;TFactory() для использования собственной реализации IAlgorithmFactory
  .AddJwt&lt;MyCustomAlgorithmFactory&gt;(options =&gt; ...);
}

public void Configure(IApplicationBuilder app)
{
    app.UseAuthentication();
}
</code></pre>
<h3>Пользовательские фабрики для создания Identity или AuthenticationTicket</h3>
<pre><code class="language-c#">services.AddSingleton&lt;IIdentityFactory, CustomIdentityFctory&gt;();
services.AddSingleton&lt;ITicketFactory, CustomTicketFactory&gt;();
</code></pre>
<h2>Лицензия</h2>
<p>Следующие проекты и полученные из них пакеты лицензированы как Public Domain, см. файл <a href="LICENSE.md#Public-Domain">LICENSE#Public-Domain</a>.</p>
<ul>
<li>JWT</li>
</ul>
<p>Следующие проекты и полученные из них пакеты лицензированы под лицензией MIT, см. файл <a href="LICENSE.md#MIT">LICENSE#MIT</a>.</p>
<ul>
<li>JWT.Extensions.AspNetCore</li>
<li>JWT.Extensions.DependencyInjection</li>
</ul>
<pre><code>

---


Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-06-09


---
</code></pre>

        </div>
    </div>
    <footer class="footer">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank">Open AI Tx</a>
    </footer>
    <!-- Statcounter and other scripts can be added here -->
</body>
</html>