<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>apriltag-standalone - HexLoom/apriltag-standalone en</title>
    <meta name="title" content="apriltag-standalone - HexLoom/apriltag-standalone en | AprilTag Standalone Detection Library This is an AprilTag recognition toolkit based on the pupil-apriltags library for detecting and tracking AprilTags in camer...">
    <meta name="description" content="HexLoom/apriltag-standalone - GitHub repository en documentation and information | AprilTag Standalone Detection Library This is an AprilTag recognition toolkit based on the pupil-apriltags library for detecting and tracking AprilTags in camer...">
    <meta name="keywords" content="HexLoom, apriltag-standalone, GitHub, repository, en documentation">
    <meta name="author" content="Open AI Tx">
    <meta name="robots" content="index, follow">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://openaitx.github.io/projects/HexLoom/apriltag-standalone/README-en.html">
    <meta property="og:title" content="apriltag-standalone - HexLoom/apriltag-standalone en | AprilTag Standalone Detection Library This is an AprilTag recognition toolkit based on the pupil-apriltags library for detecting and tracking AprilTags in camer...">
    <meta property="og:description" content="HexLoom/apriltag-standalone - GitHub repository en documentation and information | AprilTag Standalone Detection Library This is an AprilTag recognition toolkit based on the pupil-apriltags library for detecting and tracking AprilTags in camer...">
    <meta property="og:image" content="https://openaitx.github.io/logo_crop.png">
    <link rel="icon" type="image/jpeg" href="/icon.jpg">
    <link rel="apple-touch-icon" href="/icon.jpg">
    <script src="/js/marked.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/css/github.min.css?v=20250613">
    <script src="/js/highlight.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/view.css?v=20250613">
    <style>
        body { display: flex; flex-direction: column; min-height: 100vh; }
        .main-container { margin: 0 auto; width: 100%; max-width: 980px; padding: 0 20px; }
        @media (max-width: 768px) { .main-container { padding: 0 15px; } }
        .markdown-body img { max-width: 100%; height: auto; }
        .header { text-align: center; margin-bottom: 30px; padding: 20px; background-color: #f6f8fa; border-bottom: 1px solid #e1e4e8; position: relative; }
        .header .links { margin-top: 10px; font-size: 16px; }
        .header .links a { color: #0366d6; text-decoration: none; margin-left: 5px; }
        .header .links a:hover { text-decoration: underline; }
        .language-badges { margin-top: 15px; text-align: center; }
        .language-badges a { display: inline-block; margin: 2px; text-decoration: none; }
        .language-badges img { height: 20px; border-radius: 3px; }
        .language-badges a:hover img { opacity: 0.8; }
    </style>
</head>
<body>
    <div style="position: fixed; top: 2px; left: 2px; z-index: 2000; background: rgba(255,255,255,0.95); border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); padding: 4px 14px; font-size: 15px; color: #222; font-family: 'Segoe UI', Arial, sans-serif; font-weight: 500; letter-spacing: 0.5px;">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank" style="color: #0366d6; text-decoration: none; font-weight: 600;">Open AI Tx</a>
    </div>
    <div class="header">
        <div class="links">
            GitHub Repository: <a href="https://github.com/HexLoom/apriltag-standalone" id="githubRepoLink" target="_blank">HexLoom/apriltag-standalone</a>
<h1 style="display: none;">AprilTag Standalone Detection Library This is an AprilTag recognition toolkit based on the pupil-apriltags library for detecting and tracking AprilTags in camer...</h1>
        </div>
        <div class="language-badges" id="languageBadges">
            <!-- You can generate language badges here if needed -->
        </div>
    </div>
    <div class="main-container">
        <div class="markdown-body" id="content">
            <h1>AprilTag Standalone Detection Library</h1>
<p>This is an AprilTag recognition toolkit based on the pupil-apriltags library for detecting and tracking AprilTags in camera images.</p>
<!-- Keep these links. Translations will automatically update with the README. -->
<p><a href="https://www.readme-i18n.com/HexLoom/apriltag-standalone?lang=de">Deutsch</a> |
<a href="https://www.readme-i18n.com/HexLoom/apriltag-standalone?lang=en">English</a> |
<a href="https://www.readme-i18n.com/HexLoom/apriltag-standalone?lang=es">Español</a> |
<a href="https://www.readme-i18n.com/HexLoom/apriltag-standalone?lang=fr">français</a> |
<a href="https://www.readme-i18n.com/HexLoom/apriltag-standalone?lang=ja">日本語</a> |
<a href="https://www.readme-i18n.com/HexLoom/apriltag-standalone?lang=ko">한국어</a> |
<a href="https://www.readme-i18n.com/HexLoom/apriltag-standalone?lang=pt">Português</a> |
<a href="https://www.readme-i18n.com/HexLoom/apriltag-standalone?lang=ru">Русский</a> |
<a href="https://www.readme-i18n.com/HexLoom/apriltag-standalone?lang=zh">中文</a></p>
<h2>Dependencies</h2>
<ul>
<li>Python 3.6+</li>
<li>OpenCV</li>
<li>NumPy</li>
<li>pupil-apriltags</li>
</ul>
<h2>Installation</h2>
<ol>
<li>Make sure Python is installed</li>
<li>Install the necessary dependencies:</li>
</ol>
<pre><code class="language-bash">pip install opencv-python numpy pupil-apriltags
</code></pre>
<h2>Usage</h2>
<h3>Basic Usage</h3>
<pre><code class="language-python">import cv2
from apriltag import Detector, DetectorOptions

# Create detector
options = DetectorOptions(
    families=&quot;tag36h11&quot;,  # Tag family
    border=1,             # Tag border size
    nthreads=4,           # Number of threads
    quad_decimate=1.0,    # Image downsampling factor
    quad_blur=0.0,        # Gaussian blur factor
    refine_edges=True     # Refine edges or not
)
detector = Detector(options)

# Read image
img = cv2.imread(&quot;test_image.jpg&quot;)
gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

# Detect AprilTags
detections = detector.detect(gray)

# Show detection results
for detection in detections:
    print(f&quot;Tag Family: {detection.tag_family}, ID: {detection.tag_id}&quot;)
    print(f&quot;Center: {detection.center}&quot;)
    print(f&quot;Corners: {detection.corners}&quot;)
</code></pre>
<h3>Drawing Detection Results</h3>
<pre><code class="language-python">import numpy as np
from apriltag import draw_detection_results

# Camera intrinsic matrix and distortion coefficients
K = np.array([[800, 0, 320], [0, 800, 240], [0, 0, 1]], dtype=np.float32)
D = np.zeros((4, 1), dtype=np.float32)

# Draw detection results
result_img = draw_detection_results(img, detections, K, D, tag_size=0.1)

# Show result
cv2.imshow(&quot;AprilTag Detection&quot;, result_img)
cv2.waitKey(0)
</code></pre>
<h3>Running the Test Script</h3>
<p>A simple test script is provided to verify AprilTag detection functionality:</p>
<pre><code class="language-bash">python test_apriltag.py
</code></pre>
<p>This will open the default computer camera and detect AprilTags in real time. Press &quot;q&quot; to exit.</p>
<h2>Supported Tag Families</h2>
<p>The pupil-apriltags library supports the following tag families:</p>
<ul>
<li>tag36h11 (default)</li>
<li>tag25h9</li>
<li>tag16h5</li>
<li>tagCircle21h7</li>
<li>tagCircle49h12</li>
<li>tagStandard41h12</li>
<li>tagStandard52h13</li>
<li>tagCustom48h12</li>
</ul>
<h2>Notes</h2>
<ul>
<li>For better performance, you can adjust the parameters in DetectorOptions</li>
<li>For devices with limited computing resources, consider increasing the quad_decimate parameter to reduce computational complexity</li>
<li>Make sure the size of the AprilTag marker used matches the tag_size parameter in the code</li>
<li>Drawing 3D coordinate axes requires accurate camera parameters</li>
</ul>
<h2>Features</h2>
<ul>
<li>Real-time AprilTag detection with USB cameras</li>
<li>Computes and displays tag 3D pose (position and orientation)</li>
<li>Supports saving original and annotated images</li>
<li>Customizable configuration and camera parameters</li>
<li>Includes a complete camera calibration tool</li>
<li>No ROS dependency, a pure Python standalone version of the original ROS package</li>
</ul>
<h2>Installation Steps</h2>
<h3>1. Install AprilTag C Library</h3>
<p>The AprilTag C library is required. Please install as follows:</p>
<h4>Ubuntu/Debian:</h4>
<pre><code class="language-bash">sudo apt-get update
sudo apt-get install -y libapriltag-dev
</code></pre>
<h4>Windows:</h4>
<p>Windows users need to compile or download the precompiled binaries themselves, and ensure <code>apriltag.dll</code> is in the system PATH or the current directory.</p>
<h3>2. Install Python Dependencies</h3>
<pre><code class="language-bash">pip install -r requirements.txt  -i https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple
pip install pupil-apriltags -i https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple
</code></pre>
<h2>User Guide</h2>
<h3>Quick Start (Recommended)</h3>
<p>The simplest way to use is to run the integrated tool, which provides an interactive menu to guide you through all steps:</p>
<pre><code class="language-bash">python apriltag_tool.py
</code></pre>
<p>This tool provides menu options:</p>
<ol>
<li>Generate chessboard calibration board</li>
<li>Camera calibration</li>
<li>AprilTag detection</li>
<li>View help documentation</li>
</ol>
<p>Simply follow the menu prompts to complete the entire process.</p>
<h3>Camera Calibration</h3>
<p>It is recommended to calibrate the camera before using AprilTag detection to obtain accurate camera parameters:</p>
<pre><code class="language-bash"># First, generate the chessboard calibration board
python create_chessboard.py --size 9x6 --square 100 --output chessboard.png --dpi 300

# Print the chessboard and measure the actual square size, then calibrate
python camera_calibration.py --size 9x6 --square 0.025 --output config/camera/HSK_200W53_1080P.yaml
</code></pre>
<p>Parameter description:</p>
<p><strong>Chessboard Generation Tool (create_chessboard.py):</strong></p>
<ul>
<li><code>--size</code>: Number of inner corners, width x height (default: 9x6)</li>
<li><code>--square</code>: Square size in pixels (default: 100)</li>
<li><code>--output</code>: Output file path (default: chessboard.png)</li>
<li><code>--dpi</code>: Output image DPI (default: 300), affects print size</li>
</ul>
<p><strong>Camera Calibration Program (camera_calibration.py):</strong></p>
<ul>
<li><code>--size</code>: Number of inner corners, width x height (default: 9x6)</li>
<li><code>--square</code>: Chessboard square size in meters (default: 0.025)</li>
<li><code>--output</code>: Output file path (default: config/camera/HSK_200W53_1080P.yaml)</li>
<li><code>--camera</code>: Camera device ID (default: 0)</li>
<li><code>--width</code>: Camera capture width (default: 1280)</li>
<li><code>--height</code>: Camera capture height (default: 720)</li>
<li><code>--samples</code>: Number of samples required for calibration (default: 20)</li>
<li><code>--preview</code>: Preview correction effect after calibration</li>
</ul>
<p>Calibration process:</p>
<ol>
<li>Generate and print the chessboard calibration board</li>
<li>Measure the actual square size (in meters)</li>
<li>Run the calibration program, place the chessboard in front of the camera, and collect samples from different angles</li>
<li>The program will automatically detect the chessboard and collect samples, or you can press the 's' key to manually save the current frame</li>
<li>After collecting enough samples, the program will automatically compute camera parameters and save them to the specified file</li>
</ol>
<h3>AprilTag Detection</h3>
<p>After calibration is complete, you can run the AprilTag detection program:</p>
<pre><code class="language-bash">python apriltag_detector.py
</code></pre>
<h3>Advanced Usage</h3>
<pre><code class="language-bash">python apriltag_detector.py [config_file_path] --camera CAMERA_ID --width WIDTH --height HEIGHT --camera_info CAMERA_PARAMS_FILE
</code></pre>
<p>Parameter description:</p>
<ul>
<li><code>config_file_path</code>: Path to the AprilTag configuration file (default: <code>config/vision/tags_36h11_all.json</code>)</li>
<li><code>--camera</code>: Camera device ID (default: 0)</li>
<li><code>--camera_info</code>: Path to camera intrinsic parameter file (default: <code>config/camera/HSK_200W53_1080P.yaml</code>)</li>
<li><code>--width</code>: Camera capture width (default: 1280)</li>
<li><code>--height</code>: Camera capture height (default: 720)</li>
</ul>
<h3>Keyboard Controls</h3>
<ul>
<li><code>q</code>: Exit the program</li>
</ul>
<h2>Configuration File Description</h2>
<p>All system configurations can be set in the <code>config/vision/table_setup.json</code> file:</p>
<pre><code class="language-json">{
    &quot;AprilTagConfig&quot;: {
        &quot;family&quot;: &quot;tag36h11&quot;,      // Tag family
        &quot;size&quot;: 0.05,              // Tag physical size (unit: meters)
        &quot;threads&quot;: 2,              // Number of processing threads
        &quot;max_hamming&quot;: 0,          // Maximum Hamming distance
        &quot;z_up&quot;: true,              // Z-axis upward
        &quot;decimate&quot;: 1.0,           // Image downsampling factor
        &quot;blur&quot;: 0.8,               // Blur factor
        &quot;refine_edges&quot;: 1,         // Whether to refine edges
        &quot;debug&quot;: 0                 // Enable debugging
    },

    &quot;Camera&quot;: {
        &quot;device_id&quot;: 0,            // Camera device ID
        &quot;width&quot;: 1280,             // Camera width resolution
        &quot;height&quot;: 720,             // Camera height resolution
        &quot;camera_info_path&quot;: &quot;config/camera/HSK_200W53_1080P.yaml&quot;  // Camera calibration parameter file
    },

    &quot;Archive&quot;: {
        &quot;enable&quot;: true,            // Enable data archiving
        &quot;preview&quot;: true,           // Show preview window
        &quot;save_raw&quot;: false,         // Save raw images
        &quot;save_pred&quot;: false,        // Save predicted images
        &quot;path&quot;: &quot;./data/table_tracking&quot;  // Data saving path
    },

    &quot;TableConfig&quot;: {
        &quot;reference_tags&quot;: [0, 1, 2, 3],      // List of reference tag IDs
        &quot;moving_tags&quot;: [4, 5, 6],            // List of moving tag IDs
        &quot;require_initialization&quot;: true,       // Whether initialization is required
        &quot;tag_positions&quot;: {                    // Preset tag positions (if any)
            &quot;0&quot;: [0.0, 0.0, 0.0],
            &quot;1&quot;: [0.5, 0.0, 0.0],
            &quot;2&quot;: [0.5, 0.5, 0.0],
            &quot;3&quot;: [0.0, 0.5, 0.0]
        }
    }
}
</code></pre>
<p>By modifying the configuration file, you can:</p>
<ol>
<li>Configure AprilTag detector parameters</li>
<li>Set camera parameters (device ID, resolution, parameter file)</li>
<li>Configure data archive options</li>
<li>Customize reference tag and moving tag IDs</li>
<li>Control whether initialization is required (set <code>require_initialization</code> to <code>false</code> to skip initialization)</li>
<li>Preset tag position information</li>
</ol>
<h3>Usage</h3>
<p>Very simple, just use one command to start the system:</p>
<pre><code>python table_tracking.py
</code></pre>
<p>If you need to use a custom configuration file:</p>
<pre><code>python table_tracking.py --config CUSTOM_CONFIG_PATH
</code></pre>
<p>After the system is running, you can press the 'i' key at any time to manually trigger the initialization process.</p>
<h2>FAQ</h2>
<ol>
<li><p><strong>AprilTag library not found</strong></p>
<p>Make sure the AprilTag library is installed correctly and the library files can be found by the system.</p>
</li>
<li><p><strong>Camera cannot be opened</strong></p>
<p>Check if the camera device ID is correct and if the camera is not occupied by other programs.</p>
</li>
<li><p><strong>Detection results are inaccurate</strong></p>
<p>Make sure your camera is properly calibrated and the tag size in the configuration file is correct.</p>
</li>
</ol>
<h2>File Structure Description</h2>
<pre><code>apriltag_standalone/
├── apriltag.py              # Core code of the AprilTag detection library
├── apriltag_detector.py     # Main AprilTag detection program
├── apriltag_tool.py         # Integrated tool startup menu
├── camera_calibration.py    # Camera calibration program
├── create_chessboard.py     # Chessboard generation tool
├── configs.py               # Configuration file handler
├── config/                  # Configuration directory
│   ├── camera/              # Camera configuration
│   │   └── HSK_200W53_1080P.yaml  # Camera parameters
│   └── vision/              # Vision configuration
│       └── tags_36h11_all.json # AprilTag configuration
├── README.md                # Documentation
└── requirements.txt         # Python dependencies
</code></pre>
<h2>Technical Description</h2>
<p>This project is an independent version ported from the ROS AprilTag detection package, with ROS dependencies removed and core functions retained.
It mainly uses the following technologies:</p>
<ul>
<li>OpenCV: image processing, camera calibration, and pose estimation</li>
<li>AprilTag C library: tag detection</li>
<li>SciPy: rotation matrix and quaternion conversion</li>
</ul>
<h2>License</h2>
<p>This project is licensed under the MIT License.</p>
<h2>New Features</h2>
<h3>Multi-Tag Tracking and Occlusion Handling</h3>
<p>This system now supports the following new features:</p>
<ol>
<li><p><strong>Photo Initialization</strong>: After system startup, it will automatically take a photo for initialization, recording the positional relationships of the tags, including:</p>
<ul>
<li>Positions of fixed reference tags (IDs 0-3)</li>
<li>Relative positions among multiple moving tags (default IDs 4, 5, 6)</li>
</ul>
</li>
<li><p><strong>Occlusion Handling</strong>: After initialization, even if some tags are occluded:</p>
<ul>
<li>If reference tags are occluded, the system can estimate the occluded tag's position using other visible reference tags</li>
<li>If moving tags are occluded, the system can estimate the occluded moving tag's position using other visible moving tags</li>
</ul>
</li>
<li><p><strong>Multi-Tag Tracking</strong>: Supports simultaneous tracking of multiple moving tags, default IDs 4, 5, 6</p>
<ul>
<li>If the relative positions among moving tags are fixed, as long as one is visible, the positions of the others can be estimated</li>
<li>Moving tag IDs can be customized in the configuration file</li>
</ul>
</li>
</ol>
<h3>Configuration File Description</h3>
<p>All system configurations can be set in the <code>config/vision/table_setup.json</code> file:</p>
<pre><code class="language-json">{
    &quot;TableConfig&quot;: {
        &quot;reference_tags&quot;: [0, 1, 2, 3],      // List of reference tag IDs
        &quot;moving_tags&quot;: [4, 5, 6],            // List of moving tag IDs
        &quot;require_initialization&quot;: true,       // Whether initialization is required
        &quot;tag_positions&quot;: {                    // Preset tag positions (if any)
            &quot;0&quot;: [0.0, 0.0, 0.0],
            &quot;1&quot;: [0.5, 0.0, 0.0],
            &quot;2&quot;: [0.5, 0.5, 0.0],
            &quot;3&quot;: [0.0, 0.5, 0.0]
        }
    }
}
</code></pre>
<p>By modifying the configuration file, you can:</p>
<ol>
<li>Customize reference tag and moving tag IDs</li>
<li>Control whether initialization is required (set <code>require_initialization</code> to <code>false</code> to skip initialization)</li>
<li>Preset tag position information</li>
</ol>
<h3>Usage</h3>
<ol>
<li><p>Start the system with the default configuration:</p>
<pre><code>python table_tracking.py
</code></pre>
</li>
<li><p>Start the system with a custom configuration file:</p>
<pre><code>python table_tracking.py --config CUSTOM_CONFIG_PATH
</code></pre>
</li>
<li><p>Manual initialization: press the 'i' key while the system is running</p>
</li>
</ol>
<h3>Running Requirements</h3>
<p>Make sure all tags are visible during initialization. The system will record the relative positions among tags. After initialization, even if some tags are occluded, the system can still correctly estimate the positions of all tags.</p>
<pre><code>

---


Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-06-27


---
</code></pre>

        </div>
    </div>
    <footer class="footer">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank">Open AI Tx</a>
    </footer>
    <!-- Default Statcounter code for openaitx
https://openaitx.github.io/ -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>
    <!-- End of Statcounter Code -->
</body>
</html>