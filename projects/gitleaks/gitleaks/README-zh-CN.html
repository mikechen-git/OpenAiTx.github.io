<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gitleaks - gitleaks/gitleaks zh-CN</title>
    <meta name="title" content="gitleaks - gitleaks/gitleaks zh-CN | Gitleaks ┌─○───┐ │ │╲ │ │ │ ○ │ │ ○ ░ │ └─░───┘ 加入我们的 Discord！ Gitleaks 是一个用于检测密码、API 密钥和令牌等敏感信息的工具，可在 git 仓库、文件以及你通过 stdin 输入的任何内容中进行检测。如果你想了解更多关于检测引擎的工作原理，请查看...">
    <meta name="description" content="gitleaks/gitleaks - GitHub repository zh-CN documentation and information | Gitleaks ┌─○───┐ │ │╲ │ │ │ ○ │ │ ○ ░ │ └─░───┘ 加入我们的 Discord！ Gitleaks 是一个用于检测密码、API 密钥和令牌等敏感信息的工具，可在 git 仓库、文件以及你通过 stdin 输入的任何内容中进行检测。如果你想了解更多关于检测引擎的工作原理，请查看...">
    <meta name="keywords" content="gitleaks, gitleaks, GitHub, repository, zh-CN documentation">
    <meta name="author" content="Open AI Tx">
    <meta name="robots" content="index, follow">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://openaitx.github.io/projects/gitleaks/gitleaks/README-zh-CN.html">
    <meta property="og:title" content="gitleaks - gitleaks/gitleaks zh-CN | Gitleaks ┌─○───┐ │ │╲ │ │ │ ○ │ │ ○ ░ │ └─░───┘ 加入我们的 Discord！ Gitleaks 是一个用于检测密码、API 密钥和令牌等敏感信息的工具，可在 git 仓库、文件以及你通过 stdin 输入的任何内容中进行检测。如果你想了解更多关于检测引擎的工作原理，请查看...">
    <meta property="og:description" content="gitleaks/gitleaks - GitHub repository zh-CN documentation and information | Gitleaks ┌─○───┐ │ │╲ │ │ │ ○ │ │ ○ ░ │ └─░───┘ 加入我们的 Discord！ Gitleaks 是一个用于检测密码、API 密钥和令牌等敏感信息的工具，可在 git 仓库、文件以及你通过 stdin 输入的任何内容中进行检测。如果你想了解更多关于检测引擎的工作原理，请查看...">
    <meta property="og:image" content="https://openaitx.github.io/logo_crop.png">
    <link rel="icon" type="image/jpeg" href="/icon.jpg">
    <link rel="apple-touch-icon" href="/icon.jpg">
    <script src="/js/marked.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/css/github.min.css?v=20250613">
    <script src="/js/highlight.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/view.css?v=20250613">
    <style>
        body { display: flex; flex-direction: column; min-height: 100vh; }
        .main-container { margin: 0 auto; width: 100%; max-width: 980px; padding: 0 20px; }
        @media (max-width: 768px) { .main-container { padding: 0 15px; } }
        .markdown-body img { max-width: 100%; height: auto; }
        .header { text-align: center; margin-bottom: 30px; padding: 20px; background-color: #f6f8fa; border-bottom: 1px solid #e1e4e8; position: relative; }
        .header .links { margin-top: 10px; font-size: 16px; }
        .header .links a { color: #0366d6; text-decoration: none; margin-left: 5px; }
        .header .links a:hover { text-decoration: underline; }
        .language-badges { margin-top: 15px; text-align: center; }
        .language-badges a { display: inline-block; margin: 2px; text-decoration: none; }
        .language-badges img { height: 20px; border-radius: 3px; }
        .language-badges a:hover img { opacity: 0.8; }
    </style>
</head>
<body>
    <div style="position: fixed; top: 2px; left: 2px; z-index: 2000; background: rgba(255,255,255,0.95); border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); padding: 4px 14px; font-size: 15px; color: #222; font-family: 'Segoe UI', Arial, sans-serif; font-weight: 500; letter-spacing: 0.5px;">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank" style="color: #0366d6; text-decoration: none; font-weight: 600;">Open AI Tx</a>
    </div>
    <div class="header">
        <div class="links">
            GitHub Repository: <a href="https://github.com/gitleaks/gitleaks" id="githubRepoLink" target="_blank">gitleaks/gitleaks</a>
<h1 style="display: none;">Gitleaks ┌─○───┐ │ │╲ │ │ │ ○ │ │ ○ ░ │ └─░───┘ 加入我们的 Discord！ Gitleaks 是一个用于检测密码、API 密钥和令牌等敏感信息的工具，可在 git 仓库、文件以及你通过 stdin 输入的任何内容中进行检测。如果你想了解更多关于检测引擎的工作原理，请查看...</h1>
        </div>
        <div class="language-badges" id="languageBadges">
            <!-- You can generate language badges here if needed -->
        </div>
    </div>
    <div class="main-container">
        <div class="markdown-body" id="content">
            <h1>Gitleaks</h1>
<pre><code>┌─○───┐
│ │╲  │
│ │ ○ │
│ ○ ░ │
└─░───┘
</code></pre>
<p><a href="https://github.com/gitleaks/gitleaks/actions/workflows/test.yml"><img src="https://github.com/gitleaks/gitleaks/actions/workflows/test.yml/badge.svg" alt="GitHub Action Test" /></a>
<a href="https://hub.docker.com/r/zricethezav/gitleaks"><img src="https://img.shields.io/docker/pulls/zricethezav/gitleaks.svg" alt="Docker Hub" /></a>
<a href="https://gitleaks.io/playground"><img src="https://img.shields.io/badge/gitleaks%20-playground-blue" alt="Gitleaks Playground" /></a>
<a href="https://github.com/gitleaks/gitleaks-action"><img src="https://img.shields.io/badge/protected%20by-gitleaks-blue" alt="Gitleaks Action" /></a>
<a href="https://pkg.go.dev/github.com/zricethezav/gitleaks/v8"><img src="https://pkg.go.dev/badge/github.com/gitleaks/gitleaks/v8?status" alt="GoDoc" /></a>
<a href="https://goreportcard.com/report/github.com/gitleaks/gitleaks/v8"><img src="https://goreportcard.com/badge/github.com/gitleaks/gitleaks/v8" alt="GoReportCard" /></a>
<a href="https://raw.githubusercontent.com/gitleaks/gitleaks/master/LICENSE"><img src="https://img.shields.io/github/license/gitleaks/gitleaks.svg" alt="License" /></a></p>
<h3>加入我们的 Discord！ <a href="https://discord.gg/8Hzbrnkr7E"><img src="https://img.shields.io/discord/1102689410522284044.svg?label=&amp;logo=discord&amp;logoColor=ffffff&amp;color=7389D8&amp;labelColor=6A7EC2" alt="Discord" /></a></h3>
<p>Gitleaks 是一个用于<strong>检测</strong>密码、API 密钥和令牌等敏感信息的工具，可在 git 仓库、文件以及你通过 <code>stdin</code> 输入的任何内容中进行检测。如果你想了解更多关于检测引擎的工作原理，请查看这篇博客：<a href="https://lookingatcomputer.substack.com/p/regex-is-almost-all-you-need">Regex is (almost) all you need</a>。</p>
<pre><code>➜  ~/code(master) gitleaks git -v

    ○
    │╲
    │ ○
    ○ ░
    ░    gitleaks


发现:     &quot;export BUNDLE_ENTERPRISE__CONTRIBSYS__COM=cafebabe:deadbeef&quot;,
密钥:      cafebabe:deadbeef
规则ID:    sidekiq-secret
熵值:      2.609850
文件:      cmd/generate/config/rules/sidekiq.go
行号:      23
提交:      cd5226711335c68be1e720b318b7bc3135a30eb2
作者:      John
邮箱:      john@users.noreply.github.com
日期:      2022-08-03T12:31:40Z
指纹:      cd5226711335c68be1e720b318b7bc3135a30eb2:cmd/generate/config/rules/sidekiq.go:sidekiq-secret:23
</code></pre>
<h2>入门指南</h2>
<p>Gitleaks 可通过 Homebrew、Docker 或 Go 进行安装。Gitleaks 还以二进制形式支持多种主流平台和操作系统，可在 <a href="https://github.com/gitleaks/gitleaks/releases">发布页面</a> 获取。此外，Gitleaks 也可作为 pre-commit 钩子直接集成到你的仓库，或通过 <a href="https://github.com/gitleaks/gitleaks-action">Gitleaks-Action</a> 作为 GitHub Action 使用。</p>
<h3>安装</h3>
<pre><code class="language-bash"># MacOS
brew install gitleaks

# Docker (DockerHub)
docker pull zricethezav/gitleaks:latest
docker run -v ${path_to_host_folder_to_scan}:/path zricethezav/gitleaks:latest [COMMAND] [OPTIONS] [SOURCE_PATH]

# Docker (ghcr.io)
docker pull ghcr.io/gitleaks/gitleaks:latest
docker run -v ${path_to_host_folder_to_scan}:/path ghcr.io/gitleaks/gitleaks:latest [COMMAND] [OPTIONS] [SOURCE_PATH]

# 从源码安装（确保已安装 `go`）
git clone https://github.com/gitleaks/gitleaks.git
cd gitleaks
make build
</code></pre>
<h3>GitHub Action</h3>
<p>请查看官方的 <a href="https://github.com/gitleaks/gitleaks-action">Gitleaks GitHub Action</a></p>
<pre><code>name: gitleaks
on: [pull_request, push, workflow_dispatch]
jobs:
  scan:
    name: gitleaks
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - uses: gitleaks/gitleaks-action@v2
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          GITLEAKS_LICENSE: ${{ secrets.GITLEAKS_LICENSE}} # 仅组织账户需要，个人账户不需要。
</code></pre>
<h3>Pre-Commit</h3>
<ol>
<li><p>从 https://pre-commit.com/#install 安装 pre-commit</p>
</li>
<li><p>在你的仓库根目录创建 <code>.pre-commit-config.yaml</code> 文件，内容如下：</p>
<pre><code>repos:
  - repo: https://github.com/gitleaks/gitleaks
    rev: v8.24.2
    hooks:
      - id: gitleaks
</code></pre>
<p>对于 <a href="https://github.com/gitleaks/gitleaks/releases">原生方式运行 gitleaks</a> 或使用 <a href="https://raw.githubusercontent.com/gitleaks/gitleaks/master/.pre-commit-hooks.yaml"><code>gitleaks-docker</code> pre-commit ID</a> 通过 <a href="#docker">官方 Docker 镜像</a> 运行 gitleaks</p>
</li>
<li><p>通过执行 <code>pre-commit autoupdate</code> 自动更新配置到最新的仓库版本</p>
</li>
<li><p>执行 <code>pre-commit install</code> 进行安装</p>
</li>
<li><p>现在一切就绪！</p>
</li>
</ol>
<pre><code>➜ git commit -m &quot;this commit contains a secret&quot;
Detect hardcoded secrets.................................................Failed
</code></pre>
<p>注意：要禁用 gitleaks pre-commit 钩子，可以在提交命令前加上 <code>SKIP=gitleaks</code>，这样就会跳过 gitleaks 检查</p>
<pre><code>➜ SKIP=gitleaks git commit -m &quot;skip gitleaks check&quot;
Detect hardcoded secrets................................................Skipped
</code></pre>
<h2>用法</h2>
<pre><code>用法:
  gitleaks [命令]

可用命令:
  dir         扫描目录或文件中的敏感信息
  git         扫描 git 仓库中的敏感信息
  help        查看任意命令的帮助信息
  stdin       从标准输入检测敏感信息
  version     显示 gitleaks 版本信息

参数:
  -b, --baseline-path string          基线文件路径（其中的问题将被忽略）
  -c, --config string                 配置文件路径
                                      优先级顺序:
                                      1. --config/-c
                                      2. 环境变量 GITLEAKS_CONFIG
                                      3. 环境变量 GITLEAKS_CONFIG_TOML（内容为配置文件内容）
                                      4. (目标路径)/.gitleaks.toml
                                      如果四种方式都未指定，则 gitleaks 使用默认配置
      --diagnostics string            启用诊断（以逗号分隔的列表: cpu,mem,trace）。cpu=CPU 性能分析，mem=内存分析，trace=执行跟踪
      --diagnostics-dir string        存储诊断输出文件的目录（默认为当前目录）
      --enable-rule strings           仅启用指定 id 的规则
      --exit-code int                 检测到敏感信息时的退出码（默认 1）
  -i, --gitleaks-ignore-path string   .gitleaksignore 文件或包含该文件的文件夹路径（默认 “.”）
  -h, --help                          显示 gitleaks 帮助信息
      --ignore-gitleaks-allow         忽略 gitleaks:allow 注释
  -l, --log-level string              日志级别（trace, debug, info, warn, error, fatal）（默认 &quot;info&quot;）
      --max-decode-depth int          允许递归解码的深度（默认 &quot;0&quot;，不进行解码）
      --max-archive-depth int         允许扫描嵌套归档文件的深度（默认 &quot;0&quot;，不遍历归档）
      --max-target-megabytes int      超过该大小的文件将被跳过
      --no-banner                     不显示横幅
      --no-color                      禁用彩色输出
      --redact uint[=100]             从日志和标准输出中隐藏敏感信息。仅隐藏部分内容时，可指定百分比 0..100，例如 --redact=20（默认 100%）
  -f, --report-format string          输出格式（json, csv, junit, sarif, template）
  -r, --report-path string            报告文件路径
      --report-template string        用于生成报告的模板文件（隐含 --report-format=template）
  -v, --verbose                       显示详细扫描输出
      --version                       显示 gitleaks 版本

使用 &quot;gitleaks [命令] --help&quot; 获取某命令的更多信息。
</code></pre>
<h3>命令说明</h3>
<p>⚠️ v8.19.0 引入了变更，废弃了 <code>detect</code> 和 <code>protect</code>。这两个命令仍可用，但在 <code>--help</code> 菜单中已隐藏。你可以参考这个 <a href="https://gist.github.com/zricethezav/b325bb93ebf41b9c0b0507acf12810d2">gist</a> 进行命令迁移。
如果你发现 v8.19.0 影响了现有的 <code>detect</code>/<code>protect</code> 命令，请提交 issue。</p>
<p>Gitleaks 有三种扫描模式：<code>git</code>、<code>dir</code> 和 <code>stdin</code>。</p>
<h4>Git</h4>
<p><code>git</code> 命令用于扫描本地 git 仓库。Gitleaks 底层使用 <code>git log -p</code> 命令扫描补丁。
你可以通过 <code>log-opts</code> 选项配置 <code>git log -p</code> 的行为。
例如，若要在一系列提交上运行 gitleaks，可使用如下命令：<code>gitleaks git -v --log-opts=&quot;--all commitA..commitB&quot; path_to_repo</code>。详见 <a href="https://git-scm.com/docs/git-log">git log</a> 官方文档。
如果未指定目标路径参数，则 gitleaks 会尝试将当前工作目录作为 git 仓库进行扫描。</p>
<h4>Dir</h4>
<p><code>dir</code>（别名包括 <code>files</code>、<code>directory</code>）命令允许你扫描目录和文件。例如：<code>gitleaks dir -v path_to_directory_or_file</code>。
如果没有指定目标作为位置参数，则 gitleaks 将扫描当前工作目录。</p>
<h4>Stdin</h4>
<p>你也可以使用 <code>stdin</code> 命令将数据流式传输到 gitleaks。例如：<code>cat some_file | gitleaks -v stdin</code></p>
<h3>创建基线</h3>
<p>在扫描大型仓库或有着较长历史的仓库时，使用基线会很方便。当使用基线时，
gitleaks 会忽略基线中已有的历史发现。基线可以是任意 gitleaks 报告。要创建 gitleaks 报告，使用 <code>--report-path</code> 参数运行 gitleaks。</p>
<pre><code>gitleaks git --report-path gitleaks-report.json # 这会将报告保存在名为 gitleaks-report.json 的文件中
</code></pre>
<p>基线创建后，可以在再次运行 detect 命令时应用：</p>
<pre><code>gitleaks git --baseline-path gitleaks-report.json --report-path findings.json
</code></pre>
<p>使用 --baseline-path 参数运行 detect 命令后，报告输出（findings.json）只会包含新问题。</p>
<h2>Pre-Commit 钩子</h2>
<p>你可以通过将示例 <code>pre-commit.py</code> 脚本复制到你的 <code>.git/hooks/</code> 目录下，将 Gitleaks 作为 pre-commit 钩子运行。</p>
<h2>加载配置</h2>
<p>优先级顺序如下：</p>
<ol>
<li><code>--config/-c</code> 选项：
<pre><code class="language-bash">gitleaks git --config /home/dev/customgitleaks.toml .
</code></pre>
</li>
<li>环境变量 <code>GITLEAKS_CONFIG</code>，其值为文件路径：
<pre><code class="language-bash">export GITLEAKS_CONFIG=&quot;/home/dev/customgitleaks.toml&quot;
gitleaks git .
</code></pre>
</li>
<li>环境变量 <code>GITLEAKS_CONFIG_TOML</code>，其值为文件内容：
<pre><code class="language-bash">export GITLEAKS_CONFIG_TOML=`cat customgitleaks.toml`
gitleaks git .
</code></pre>
</li>
<li>目标路径下的 <code>.gitleaks.toml</code> 文件：
<pre><code class="language-bash">gitleaks git .
</code></pre>
</li>
</ol>
<p>如果这四种方式都未使用，则 gitleaks 会使用默认配置。</p>
<h2>配置</h2>
<p>Gitleaks 提供了一种配置格式，你可以按照此格式编写自己的密钥检测规则：</p>
<pre><code class="language-toml"># Gitleaks 配置文件的标题
title = &quot;Custom Gitleaks configuration&quot;

# 基本上你有两种自定义配置选项：
#
# 1. 定义你自己的配置，不使用默认规则
#
#    例如，可以以默认配置作为起点：
#    https://github.com/gitleaks/gitleaks/blob/master/config/gitleaks.toml
#
# 2. 扩展某个配置，规则会被覆盖或扩展
#
#    当你扩展配置时，扩展的规则具有更高优先级。
#    即，如果扩展配置与默认配置中有重复规则，扩展规则或其属性会覆盖默认规则。
#    另一点是，扩展配置时你可以将多个配置文件链式连接，最多支持两层深度。Allowlist 数组会追加，并且可以包含重复项。

# useDefault 和 path 不能同时使用，二选一。
[extend]
# useDefault 会扩展内置于二进制文件的默认 gitleaks 配置
# 最新版本位于：
# https://github.com/gitleaks/gitleaks/blob/master/config/gitleaks.toml
useDefault = true
# 或者你可以提供一个要扩展的配置文件路径。
# 路径是相对于 gitleaks 执行时的位置，
# 而不是基础配置的位置。
# path = &quot;common_config.toml&quot;
# 如果有任何规则你不想继承，可以在这里指定。
disabledRules = [ &quot;generic-api-key&quot;]

# 规则表数组，包含定义如何检测密钥的信息
[[rules]]
# 此规则的唯一标识符
id = &quot;awesome-rule-1&quot;

# 规则的简要描述
description = &quot;awesome rule 1&quot;

# 用于检测密钥的 Golang 正则表达式。注意 Golang 的正则引擎
# 不支持前瞻。
regex = '''one-go-style-regex-for-this-rule'''

# 用于从正则匹配中提取密钥的组号，如果设置了 `entropy`，则会对该组的熵进行检测。
secretGroup = 3

# 表示正则分组的最小香农熵，必须达到该值才会被视为密钥。
entropy = 3.5

# 用于匹配路径的 Golang 正则表达式。可以作为独立规则，也可以与有效的 `regex` 配合使用。
path = '''a-file-path-regex'''

# 关键字用于正则前的快速过滤。包含关键字的规则会先进行字符串比较，
# 确保内容中包含关键字。理想情况下，这些值应为标识符或规则正则中独有的字符串
# （v8.6.0 引入）
keywords = [
  &quot;auth&quot;,
  &quot;password&quot;,
  &quot;token&quot;,
]

# 用于元数据和报告的字符串数组
tags = [&quot;tag&quot;,&quot;another tag&quot;]

    # ⚠️ 在 v8.21.0 `[rules.allowlist]` 被替换为 `[[rules.allowlists]]`。
    # 这个变更是向后兼容的：`[rules.allowlist]` 实例仍然有效。
    #
    # 你可以为规则定义多个 allowlists 以减少误报。
    # 如果 _任意_ 一个 `[[rules.allowlists]]` 匹配，则发现会被忽略。
    [[rules.allowlists]]
    description = &quot;ignore commit A&quot;
    # 当定义多个条件时，默认逻辑为 &quot;OR&quot;。
    # 例如，可以匹配 |commits| 或 |paths| 或 |stopwords|。
    condition = &quot;OR&quot;
    commits = [ &quot;commit-A&quot;, &quot;commit-B&quot;]
    paths = [
      '''go\.mod''',
      '''go\.sum'''
    ]
    # 注意：stopwords 针对的是提取出的密钥，而不是整个正则匹配结果
    # 类似 'regexes' 的方式。（stopwords 在 8.8.0 引入）
    stopwords = [
      '''client''',
      '''endpoint''',
    ]

    [[rules.allowlists]]
    # &quot;AND&quot; 条件可用于确保所有条件都匹配。
    # 例如，只有 |regexes| 和 |paths| 都满足时才匹配。
    condition = &quot;AND&quot;
    # 注意：|regexes| 默认检查发现中的 _Secret_。
    # 可选值为 &quot;secret&quot;（默认）、&quot;match&quot; 和 &quot;line&quot;。
    regexTarget = &quot;match&quot;
    regexes = [ '''(?i)parseur[il]''' ]
    paths = [ '''package-lock\.json''' ]

# 你可以扩展默认配置中的某个特定规则，例如 gitlab-pat
# 如果你的 GitLab 实例定义了自定义 token 前缀
[[rules]]
id = &quot;gitlab-pat&quot;
# 其它属性均继承自默认规则

    [[rules.allowlists]]
    regexTarget = &quot;line&quot;
    regexes = [ '''MY-glpat-''' ]


# ⚠️ 在 v8.25.0 `[allowlist]` 被替换为 `[[allowlists]]`。
#
# 全局 allowlists 的优先级高于规则特定的 allowlists。
# 如果遇到 `commits` 字段中列出的提交，则会跳过该提交，不会检测出密钥。对 regexes 和 paths 同理。
[[allowlists]]
description = &quot;global allow list&quot;
commits = [ &quot;commit-A&quot;, &quot;commit-B&quot;, &quot;commit-C&quot;]
paths = [
  '''gitleaks\.toml''',
  '''(.*?)(jpg|gif|doc)'''
]
# 注意：（全局）regexTarget 默认为检查发现中的 _Secret_。
# 可选值为 &quot;match&quot; 和 &quot;line&quot;
regexTarget = &quot;match&quot;
regexes = [
  '''219-09-9999''',
  '''078-05-1120''',
  '''(9[0-9]{2}|666)-\d{2}-\d{4}''',
]
# 注意：stopwords 针对的是提取出的密钥，而不是整个正则匹配结果
# 类似 'regexes' 的方式。（stopwords 在 8.8.0 引入）
stopwords = [
  '''client''',
  '''endpoint''',
]

# ⚠️ 在 v8.25.0 版本中，`[[allowlists]]` 增加了一个新字段 |targetRules|。
#
# 通用白名单可以定义一次，并通过 |targetRules| 分配给多个规则。
# 这只会在指定规则上运行，而不是全局运行。
[[allowlists]]
targetRules = [&quot;awesome-rule-1&quot;, &quot;awesome-rule-2&quot;]
description = &quot;我们的测试资产在某些规则下会误报。&quot;
paths = ['''tests/expected/._\.json$''']
</code></pre>
<p>参考默认的 <a href="https://github.com/gitleaks/gitleaks/blob/master/config/gitleaks.toml">gitleaks 配置文件</a> 获取示例，或按照 <a href="https://github.com/gitleaks/gitleaks/blob/master/CONTRIBUTING.md">贡献指南</a> 参与默认配置的贡献。此外，你也可以阅读 <a href="https://blog.gitleaks.io/stop-leaking-secrets-configuration-2-3-aeed293b1fbf">这篇 gitleaks 博客文章</a>，其中涵盖了高级配置设置。</p>
<h3>其他配置</h3>
<h4>gitleaks:allow</h4>
<p>如果你明知要提交一个会被 gitleaks 检测到的测试密钥，可以在该行添加 <code>gitleaks:allow</code> 注释，gitleaks 会忽略该密钥。例如：</p>
<pre><code>class CustomClass:
    discord_client_secret = '8dyfuiRyq=vVc3RRr_edRk-fK__JItpZ'  #gitleaks:allow

</code></pre>
<h4>.gitleaksignore</h4>
<p>你可以在仓库根目录创建 <code>.gitleaksignore</code> 文件，以忽略特定的发现项。在 v8.10.0 版本中，Gitleaks 在报告中新增了 <code>Fingerprint</code> 字段。每个泄漏项（发现项）都有一个唯一标识密钥的 Fingerprint。将该指纹添加到 <code>.gitleaksignore</code> 文件中，可以忽略该特定密钥。参见 Gitleaks 的 <a href="https://github.com/gitleaks/gitleaks/blob/master/.gitleaksignore">.gitleaksignore</a> 示例。注意：此功能为实验性，未来可能发生变更。</p>
<h4>解码</h4>
<p>有时密钥会以某种编码方式存在，仅用正则表达式很难发现。现在你可以让 gitleaks 自动发现并解码编码文本。<code>--max-decode-depth</code> 参数启用此功能（默认值为 &quot;0&quot;，即默认不启用）。</p>
<p>支持递归解码，因为解码后的文本也可能包含编码文本。<code>--max-decode-depth</code> 参数设置递归深度限制。当没有新的编码文本片段可解码时，递归停止，因此设置很高的最大深度并不意味着一定会递归这么多次，只会按需递归。总体来说，解码功能对扫描时间的影响很小。</p>
<p>编码文本的发现项与普通发现项的不同之处在于：</p>
<ul>
<li>位置指向编码文本的边界
<ul>
<li>如果规则在编码文本之外匹配，边界会调整以包含匹配内容</li>
</ul>
</li>
<li>match 和 secret 包含解码后的值</li>
<li>增加了两个标签：<code>decoded:&lt;encoding&gt;</code> 和 <code>decode-depth:&lt;depth&gt;</code></li>
</ul>
<p>当前支持的编码方式：</p>
<ul>
<li><strong>percent</strong> - 任意可打印 ASCII 百分号编码值</li>
<li><strong>hex</strong> - 任意长度大于等于 32 个字符的可打印 ASCII 十六进制编码值</li>
<li><strong>base64</strong> - 任意长度大于等于 16 个字符的可打印 ASCII base64 编码值</li>
</ul>
<h4>压缩包扫描</h4>
<p>有时密钥被打包在如 zip 或 tarball 等归档文件中，难以被发现。现在你可以让 gitleaks 自动提取并扫描压缩包内容。<code>--max-archive-depth</code> 参数用于 <code>dir</code> 和 <code>git</code> 扫描类型，启用此功能。默认值 &quot;0&quot; 表示默认不启用。</p>
<p>支持递归扫描，因为归档文件中也可能嵌套其他归档文件。<code>--max-archive-depth</code> 参数设置递归深度限制。当没有新的归档可提取时，递归停止。设置很高的最大深度只是设置了可能的递归深度，实际只会递归到需要的深度。</p>
<p>在归档文件中发现的密钥，报告中会包含归档内部文件的路径。内部路径用 <code>!</code> 分隔。</p>
<p>发现示例（为简洁起见已缩短）：</p>
<pre><code>Finding:     DB_PASSWORD=8ae31cacf141669ddfb5da
...
File:        testdata/archives/nested.tar.gz!archives/files.tar!files/.env.prod
Line:        4
Commit:      6e6ee6596d337bb656496425fb98644eb62b4a82
...
Fingerprint: 6e6ee6596d337bb656496425fb98644eb62b4a82:testdata/archives/nested.tar.gz!archives/files.tar!files/.env.prod:generic-api-key:4
Link:        https://github.com/leaktk/gitleaks/blob/6e6ee6596d337bb656496425fb98644eb62b4a82/testdata/archives/nested.tar.gz
</code></pre>
<p>这意味着在 <code>testdata/archives/nested.tar.gz</code> 下的 <code>archives/files.tar</code> 中的 <code>files/.env.prod.</code> 文件第 4 行检测到密钥。</p>
<p>当前支持的格式：</p>
<p>支持 mholt 的 <a href="https://github.com/mholt/archives">archives 包</a> 所支持的 <a href="https://github.com/mholt/archives?tab=readme-ov-file#supported-compression-formats">压缩格式</a> 和 <a href="https://github.com/mholt/archives?tab=readme-ov-file#supported-archive-formats">归档格式</a>。</p>
<h4>报告</h4>
<p>Gitleaks 内置支持多种报告格式：<a href="https://github.com/gitleaks/gitleaks/blob/master/testdata/expected/report/json_simple.json"><code>json</code></a>、<a href="https://github.com/gitleaks/gitleaks/blob/master/testdata/expected/report/csv_simple.csv?plain=1"><code>csv</code></a>、<a href="https://github.com/gitleaks/gitleaks/blob/master/testdata/expected/report/junit_simple.xml"><code>junit</code></a>、<a href="https://github.com/gitleaks/gitleaks/blob/master/testdata/expected/report/sarif_simple.sarif"><code>sarif</code></a>。</p>
<p>如果这些格式都不满足需求，你可以用 <a href="https://www.digitalocean.com/community/tutorials/how-to-use-templates-in-go#step-4-writing-a-template">Go 的 <code>text/template</code> .tmpl 文件</a> 和 <code>--report-template</code> 参数自定义报告模板。模板可以使用 <a href="https://masterminds.github.io/sprig/"><code>Masterminds/sprig</code> 模板库</a> 的扩展功能。</p>
<p>例如，以下模板可自定义输出 JSON 格式报告：</p>
<pre><code class="language-gotemplate"># jsonextra.tmpl
[{{ $lastFinding := (sub (len . ) 1) }}
{{- range $i, $finding := . }}{{with $finding}}
    {
        &quot;Description&quot;: {{ quote .Description }},
        &quot;StartLine&quot;: {{ .StartLine }},
        &quot;EndLine&quot;: {{ .EndLine }},
        &quot;StartColumn&quot;: {{ .StartColumn }},
        &quot;EndColumn&quot;: {{ .EndColumn }},
        &quot;Line&quot;: {{ quote .Line }},
        &quot;Match&quot;: {{ quote .Match }},
        &quot;Secret&quot;: {{ quote .Secret }},
        &quot;File&quot;: &quot;{{ .File }}&quot;,
        &quot;SymlinkFile&quot;: {{ quote .SymlinkFile }},
        &quot;Commit&quot;: {{ quote .Commit }},
        &quot;Entropy&quot;: {{ .Entropy }},
        &quot;Author&quot;: {{ quote .Author }},
        &quot;Email&quot;: {{ quote .Email }},
        &quot;Date&quot;: {{ quote .Date }},
        &quot;Message&quot;: {{ quote .Message }},
        &quot;Tags&quot;: [{{ $lastTag := (sub (len .Tags ) 1) }}{{ range $j, $tag := .Tags }}{{ quote . }}{{ if ne $j $lastTag }},{{ end }}{{ end }}],
        &quot;RuleID&quot;: {{ quote .RuleID }},
        &quot;Fingerprint&quot;: {{ quote .Fingerprint }}
    }{{ if ne $i $lastFinding }},{{ end }}
{{- end}}{{ end }}
]
</code></pre>
<p>使用方法：</p>
<pre><code class="language-sh">$ gitleaks dir ~/leaky-repo/ --report-path &quot;report.json&quot; --report-format template --report-template testdata/report/jsonextra.tmpl
</code></pre>
<h2>赞助</h2>
<p align="left">
	<h3><a href="https://coderabbit.ai/?utm_source=oss&utm_medium=sponsorship&utm_campaign=gitleaks">coderabbit.ai</h3>
	  <a href="https://coderabbit.ai/?utm_source=oss&utm_medium=sponsorship&utm_campaign=gitleaks">
		  <img alt="CodeRabbit.ai Sponsorship" src="https://github.com/gitleaks/gitleaks/assets/15034943/76c30a85-887b-47ca-9956-17a8e55c6c41" width=200>
	  </a>
</p>
<h2>退出码</h2>
<p>你可以通过 --exit-code 参数设置当检测到泄漏时的退出码。默认退出码如下：</p>
<pre><code>0 - 未发现泄漏
1 - 发现泄漏或遇到错误
126 - 未知参数
</code></pre>
<hr />
<p>Tranlated By <a href="https://github.com/OpenAiTx/OpenAiTx">Open Ai Tx</a> | Last indexed: 2025-06-27</p>
<hr />

        </div>
    </div>
    <footer class="footer">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank">Open AI Tx</a>
    </footer>
    <!-- Default Statcounter code for openaitx
https://openaitx.github.io/ -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>
    <!-- End of Statcounter Code -->
</body>
</html>