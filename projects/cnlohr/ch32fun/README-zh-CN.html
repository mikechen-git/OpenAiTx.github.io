<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ch32fun - cnlohr/ch32fun zh-CN</title>
    <meta name="title" content="ch32fun - cnlohr/ch32fun zh-CN | ch32fun 一个开源开发环境（工具链、头文件、示例），适用于 CH32V003（以及许多其他 CH32V 系列芯片），基于 gcc-riscv64，可在 Windows（原生）、Linux 和/或 WSL 下使用。CH32V003 是一款 10 美分的 RISC-V EC 核心芯片，主频 48MHz，拥有 16kB...">
    <meta name="description" content="cnlohr/ch32fun - GitHub repository zh-CN documentation and information | ch32fun 一个开源开发环境（工具链、头文件、示例），适用于 CH32V003（以及许多其他 CH32V 系列芯片），基于 gcc-riscv64，可在 Windows（原生）、Linux 和/或 WSL 下使用。CH32V003 是一款 10 美分的 RISC-V EC 核心芯片，主频 48MHz，拥有 16kB...">
    <meta name="keywords" content="cnlohr, ch32fun, GitHub, repository, zh-CN documentation">
    <meta name="author" content="Open AI Tx">
    <meta name="robots" content="index, follow">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://openaitx.github.io/projects/cnlohr/ch32fun/README-zh-CN.html">
    <meta property="og:title" content="ch32fun - cnlohr/ch32fun zh-CN | ch32fun 一个开源开发环境（工具链、头文件、示例），适用于 CH32V003（以及许多其他 CH32V 系列芯片），基于 gcc-riscv64，可在 Windows（原生）、Linux 和/或 WSL 下使用。CH32V003 是一款 10 美分的 RISC-V EC 核心芯片，主频 48MHz，拥有 16kB...">
    <meta property="og:description" content="cnlohr/ch32fun - GitHub repository zh-CN documentation and information | ch32fun 一个开源开发环境（工具链、头文件、示例），适用于 CH32V003（以及许多其他 CH32V 系列芯片），基于 gcc-riscv64，可在 Windows（原生）、Linux 和/或 WSL 下使用。CH32V003 是一款 10 美分的 RISC-V EC 核心芯片，主频 48MHz，拥有 16kB...">
    <meta property="og:image" content="https://openaitx.github.io/logo_crop.png">
    <link rel="icon" type="image/jpeg" href="/icon.jpg">
    <link rel="apple-touch-icon" href="/icon.jpg">
    <script src="/js/marked.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/css/github.min.css?v=20250613">
    <script src="/js/highlight.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/view.css?v=20250613">
    <style>
        body { display: flex; flex-direction: column; min-height: 100vh; }
        .main-container { margin: 0 auto; width: 100%; max-width: 980px; padding: 0 20px; }
        @media (max-width: 768px) { .main-container { padding: 0 15px; } }
        .markdown-body img { max-width: 100%; height: auto; }
        .header { text-align: center; margin-bottom: 30px; padding: 20px; background-color: #f6f8fa; border-bottom: 1px solid #e1e4e8; position: relative; }
        .header .links { margin-top: 10px; font-size: 16px; }
        .header .links a { color: #0366d6; text-decoration: none; margin-left: 5px; }
        .header .links a:hover { text-decoration: underline; }
        .language-badges { margin-top: 15px; text-align: center; }
        .language-badges a { display: inline-block; margin: 2px; text-decoration: none; }
        .language-badges img { height: 20px; border-radius: 3px; }
        .language-badges a:hover img { opacity: 0.8; }
    </style>
</head>
<body>
    <div class="header">
        <div class="links">
            GitHub Repository: <a href="https://github.com/cnlohr/ch32fun" id="githubRepoLink" target="_blank">cnlohr/ch32fun</a>
<h1 style="display: none;">ch32fun 一个开源开发环境（工具链、头文件、示例），适用于 CH32V003（以及许多其他 CH32V 系列芯片），基于 gcc-riscv64，可在 Windows（原生）、Linux 和/或 WSL 下使用。CH32V003 是一款 10 美分的 RISC-V EC 核心芯片，主频 48MHz，拥有 16kB...</h1>
        </div>
        <div class="language-badges" id="languageBadges">
            <!-- You can generate language badges here if needed -->
        </div>
    </div>
    <div class="main-container">
        <div class="markdown-body" id="content">
            <h1>ch32fun</h1>
<p>一个开源开发环境（工具链、头文件、示例），适用于 <a href="http://www.wch-ic.com/products/CH32V003.html">CH32V003</a>（以及许多其他 CH32V 系列芯片），基于 gcc-riscv64，可在 Windows（原生）、Linux 和/或 WSL 下使用。CH32V003 是一款 10 美分的 RISC-V EC 核心芯片，主频 48MHz，拥有 16kB 闪存和 2kB RAM，并配备丰富的外设。它还提供 SOP-8、QFN-20 和 SOIC 封装。你可以在<a href="http://www.wch-ic.com/downloads/CH32V003DS0_PDF.html">这里获取数据手册</a>。</p>
<p>本项目旨在开发高效使用 CH32V003 的工具和环境。避免复杂的 HAL，释放硬件性能！现有 EVT 库体积庞大，开发环境繁重。本项目特别避免使用 HAL，使你能够直接参考 <a href="http://www.wch-ic.com/downloads/CH32V003RM_PDF.html">TRM</a>。相比之下，使用 ch32fun 的 blinky 只需 500 字节，启动更快，整体更为简洁。</p>
<p>ch32fun 包含内容如下：</p>
<ol>
<li>使用 ch32fun 的示例，数量不如 HAL 丰富，但大多数集中于 ch32v003，其中许多也兼容其他处理器。</li>
<li>“minichlink”，使用 WCH CH-Link 配合 libusb，支持跨平台。
<ul>
<li>一个 STM32F042 编程器，<a href="https://github.com/NgoHungCuong/NHC-Link042">NHC-Link042</a></li>
<li>一个 ESP32S2 编程器，<a href="https://github.com/cnlohr/esp32s2-cookbook/tree/master/ch32v003programmer">esp32s2-funprog</a></li>
<li>官方 WCH Link-E 编程器。</li>
<li>基于 Arduino 的接口，<a href="https://gitlab.com/BlueSyncLine/arduino-ch32v003-swio">Ardulink</a>。</li>
<li>支持 gdbserver 风格调试，可配合 Visual Studio 使用。</li>
<li>支持单线 printf 调试（约 400kBaud）。</li>
</ul>
</li>
<li>附带一份 libgcc 副本，便于使用非常规 risc-v 构建链，位于 <code>misc/libgcc.a</code>。</li>
<li>一个名为 &quot;ch32fun&quot; 的文件夹，包含适用于 ch32v003 的自包含源文件及头文件，可用于应用程序编译。</li>
<li>在部分系统中支持通过 printf 返回信息。</li>
<li>一个演示用的引导加载程序。</li>
</ol>
<h2>其他系列支持</h2>
<p>目前已对 ch32v103、ch32v203、ch32v208、ch32v303、ch32v305 和 ch32v307 提供实验性支持。GDB 主要在 003 上测试，但在其他处理器上也有一定程度的支持。</p>
<h2>入门指南</h2>
<p>安装/设置说明请参见<a href="https://github.com/cnlohr/ch32fun/wiki/Installation">此 wiki 页面</a></p>
<h2>特性！</h2>
<h3>通过编程接口实现高速 &quot;printf&quot; 调试</h3>
<p>这里的“高速”是真正的快，通常约 36kBytes/秒。</p>
<pre><code>./minichlink -T | pv &gt; /dev/null
Found ESP32S2 Programmer
 536KiB 0:00:15 [36.7KiB/s] [        &lt;=&gt;                     ]
</code></pre>
<p>你可以直接尝试 debugprintf 工程，或调用 SetupDebugPrintf(); 然后直接 printf() 输出信息。</p>
<h3>调试支持！</h3>
<p>通过 minichlink 内置的 gdbserver 实现！可配合 <code>gdb-multiarch</code> 以及 Visual Studio Code 使用。</p>
<h2>构建与烧录</h2>
<pre><code>cd examples/blink
make
</code></pre>
<p>text = 代码，data = 常量及初始化数据，bss = 未初始化数据。<br />
dec 是三者之和，反映程序在 flash 中所占字节数。</p>
<p>生成的 .bin 文件由 minichlink 使用，.hex 文件兼容官方 WCH 烧录工具。</p>
<h2>VSCode +/- PlatformIO</h2>
<p>注意：PlatformIO 一般用于本仓库的 CI。虽然 PlatformIO 可以在 VSCode 内编写和调试 ch32fun 工程，但你也可以完全不用 PlatformIO：相关内容参见<a href="https://github.com/cnlohr/ch32fun/tree/master/examples/template/.vscode">模板工程</a>。</p>
<p>本项目可在 VSCode 及 PlatformIO 扩展下进行编译、上传和调试。只需克隆并在 VSCode 中打开本项目，并安装好 PlatformIO 扩展。使用<a href="https://docs.platformio.org/en/latest/integration/ide/vscode.html#project-tasks">项目环境切换器</a>选择特定示例，如 &quot;blink&quot;。</p>
<p>如需基于 ch32fun 创建新的 PlatformIO 固件项目，只需使用 <a href="https://docs.platformio.org/en/latest/home/index.html">PlatformIO Home</a> 的“新建项目”向导，并将“Framework”设为“ch32v003fun”。有<a href="https://github.com/Community-PIO-CH32V/platform-ch32v/tree/develop/examples/blinky-ch32v003fun">各种示例</a>。</p>
<p><img src=".github/pio_project_creation.png" alt="pio_proj" /></p>
<p>等价的 <a href="https://docs.platformio.org/en/latest/integration/ide/vscode.html#platformio-core-cli">PlatformIO Core CLI</a> 命令如下：</p>
<pre><code class="language-sh">pio init -b genericCH32V003F4P6 -O &quot;framework = ch32v003fun&quot;
</code></pre>
<p>如果你希望将代码直接添加到 ch32fun 工程，请根据<a href="https://github.com/cnlohr/ch32fun/blob/49640fbccf231191aa83c6a2bbe9d385535b2d1e/platformio.ini#L48-L53">说明</a>扩展 <code>platformio.ini</code> 中的可用环境。</p>
<p>还请注意，当你在 PlatformIO 中打开本项目时，可以通过 VSCode 任务栏底部的<a href="https://docs.platformio.org/en/latest/integration/ide/vscode.html#project-tasks">项目环境切换器</a>选择特定示例文件夹。否则，默认情况下“Build”会编译<strong>所有</strong>示例。</p>
<p>更多细节与平台安装请参考 <a href="https://github.com/Community-PIO-CH32V/platform-ch32v">platform-ch32v</a>。</p>
<h2>clangd</h2>
<p>如果 C/C++ 语言服务器 clangd 无法找到 <code>ch32fun.h</code>，需先执行 <code>make clean</code> 清理，然后用 <code>bear -- make build</code> 编译一次，生成 <code>compile_commands.json</code>，clangd 会据此找到 makefile 指定的包含路径。<br />
<code>make clangd</code> 可一步完成上述操作。
<code>build_all_clangd.sh</code> 在 <code>build scripts</code> 目录下可为所有示例生成。</p>
<h2>快速参考</h2>
<ul>
<li><strong>必须</strong> 用于编程/调试：<code>SWIO</code> 位于 <code>PD1</code>。请勿让 PD1 多复用其他功能。</li>
<li><strong>可选</strong> <code>NRST</code> 位于 <code>PD7</code>。非必需，部分配置下默认作为 GPIO。</li>
<li><strong>可选</strong> UART <code>TX</code> 在 <code>PD5</code>。建议用 SWIO 进行 <code>printf</code> 调试。</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Tengo10/pinout-overview/main/pinouts/CH32v003/ch32v003a4m6.svg" alt="ch32v003a4m6" />
<img src="https://raw.githubusercontent.com/Tengo10/pinout-overview/main/pinouts/CH32v003/ch32v003f4p6.svg" alt="ch32v003f4p6" />
<img src="https://raw.githubusercontent.com/Tengo10/pinout-overview/main/pinouts/CH32v003/ch32v003f4u6.svg" alt="ch32v003f4u6" />
<img src="https://raw.githubusercontent.com/Tengo10/pinout-overview/main/pinouts/CH32v003/ch32v003j4m6.svg" alt="ch32v003j4m6" /></p>
<h2>更多示例/项目？</h2>
<p>其他第三方工具提供了许多示例等。更多库请参见以下仓库：</p>
<ul>
<li><a href="https://github.com/recallmenot/ch32v003fun_wildwest">ch32v003fun_wildwest</a></li>
<li><a href="https://github.com/hexeguitar/ch32v003fun_libs">ch32v003fun_libs</a></li>
<li><a href="https://github.com/ADBeta/CH32V003_lib_uart">CH32V003_lib_uart</a></li>
<li><a href="https://github.com/ADBeta/CH32Vxxx_lib_i2c">CH32Vxxx_lib_i2c</a></li>
<li><a href="https://github.com/ADBeta/CH32Vxxx_lib_swi2c">CH32Vxxx_lib_swi2c</a></li>
<li><a href="https://github.com/DeadBugEngineering/ch32v003fun_shenanigans">ch32v003fun_shenanigans</a></li>
<li><a href="https://github.com/pabloestrado/ch32fun-bmp280-driver">ch32fun-bmp280-driver</a></li>
<li><a href="https://github.com/pabloestrado/ch32fun-aht20-driver">ch32fun-aht20-driver</a></li>
</ul>
<h2>支持</h2>
<p>你可以在 github 上提交 issue，或加入我的 Discord 服务器的 #ch32fun 频道。目前邀请为私密，如需邀请请 @cnlohr 联系我获取邀请链接。我的私信已开放。</p>
<h3>脚注/链接</h3>
<ul>
<li>https://raw.githubusercontent.com/openwch/ch32v003/main/RISC-V%20QingKeV2%20Microprocessor%20Debug%20Manual.pdf 调试手册</li>
<li>http://www.wch-ic.com/downloads/QingKeV2_Processor_Manual_PDF.html 处理器手册</li>
<li>http://www.wch-ic.com/downloads/CH32V003RM_PDF.html 技术参考手册</li>
<li>http://www.wch-ic.com/downloads/CH32V003DS0_PDF.html 数据手册</li>
<li>https://github.com/CaiB/CH32V003-Architecture-Exploration/blob/main/InstructionTypes.md 本芯片压缩 ISA 详情</li>
<li>CH32V003 支持 xv 扩展，可用此定制版 rvcodec.js 解析其指令码：https://xw.macyler.moe/</li>
</ul>
<hr />
<p>Tranlated By <a href="https://github.com/OpenAiTx/OpenAiTx">Open Ai Tx</a> | Last indexed: 2025-06-07</p>
<hr />

        </div>
    </div>
    <footer class="footer">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank">Open AI Tx</a>
    </footer>
    <!-- Default Statcounter code for openaitx
https://openaitx.github.io/ -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>
    <!-- End of Statcounter Code -->
</body>
</html>