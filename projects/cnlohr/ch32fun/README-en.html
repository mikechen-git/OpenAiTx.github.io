<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ch32fun - cnlohr/ch32fun en</title>
    <meta name="title" content="ch32fun - cnlohr/ch32fun en | ch32fun An open source development environment (tooling, headers, examples) for the CH32V003 (and many other chips within the CH32V family) with gcc-riscv64 tha...">
    <meta name="description" content="cnlohr/ch32fun - GitHub repository en documentation and information | ch32fun An open source development environment (tooling, headers, examples) for the CH32V003 (and many other chips within the CH32V family) with gcc-riscv64 tha...">
    <meta name="keywords" content="cnlohr, ch32fun, GitHub, repository, en documentation">
    <meta name="author" content="Open AI Tx">
    <meta name="robots" content="index, follow">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://openaitx.github.io/projects/cnlohr/ch32fun/README-en.html">
    <meta property="og:title" content="ch32fun - cnlohr/ch32fun en | ch32fun An open source development environment (tooling, headers, examples) for the CH32V003 (and many other chips within the CH32V family) with gcc-riscv64 tha...">
    <meta property="og:description" content="cnlohr/ch32fun - GitHub repository en documentation and information | ch32fun An open source development environment (tooling, headers, examples) for the CH32V003 (and many other chips within the CH32V family) with gcc-riscv64 tha...">
    <meta property="og:image" content="https://openaitx.github.io/logo_crop.png">
    <link rel="icon" type="image/jpeg" href="/icon.jpg">
    <link rel="apple-touch-icon" href="/icon.jpg">
    <script src="/js/marked.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/css/github.min.css?v=20250613">
    <script src="/js/highlight.min.js?v=20250613"></script>
    <link rel="stylesheet" href="/view.css?v=20250613">
    <style>
        body { display: flex; flex-direction: column; min-height: 100vh; }
        .main-container { margin: 0 auto; width: 100%; max-width: 980px; padding: 0 20px; }
        @media (max-width: 768px) { .main-container { padding: 0 15px; } }
        .markdown-body img { max-width: 100%; height: auto; }
        .header { text-align: center; margin-bottom: 30px; padding: 20px; background-color: #f6f8fa; border-bottom: 1px solid #e1e4e8; position: relative; }
        .header .links { margin-top: 10px; font-size: 16px; }
        .header .links a { color: #0366d6; text-decoration: none; margin-left: 5px; }
        .header .links a:hover { text-decoration: underline; }
        .language-badges { margin-top: 15px; text-align: center; }
        .language-badges a { display: inline-block; margin: 2px; text-decoration: none; }
        .language-badges img { height: 20px; border-radius: 3px; }
        .language-badges a:hover img { opacity: 0.8; }
    </style>
</head>
<body>
    <div style="position: fixed; top: 2px; left: 2px; z-index: 2000; background: rgba(255,255,255,0.95); border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); padding: 4px 14px; font-size: 15px; color: #222; font-family: 'Segoe UI', Arial, sans-serif; font-weight: 500; letter-spacing: 0.5px;">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank" style="color: #0366d6; text-decoration: none; font-weight: 600;">Open AI Tx</a>
    </div>
    <div class="header">
        <div class="links">
            GitHub Repository: <a href="https://github.com/cnlohr/ch32fun" id="githubRepoLink" target="_blank">cnlohr/ch32fun</a>
<h1 style="display: none;">ch32fun An open source development environment (tooling, headers, examples) for the CH32V003 (and many other chips within the CH32V family) with gcc-riscv64 tha...</h1>
        </div>
        <div class="language-badges" id="languageBadges">
            <!-- You can generate language badges here if needed -->
        </div>
    </div>
    <div class="main-container">
        <div class="markdown-body" id="content">
            <h1>ch32fun</h1>
<p>An open source development environment (tooling, headers, examples) for the <a href="http://www.wch-ic.com/products/CH32V003.html">CH32V003</a> (and many other chips within the CH32V family) with gcc-riscv64 that can be used in Windows (Native), Linux and/or WSL.  The CH32V003 is a 10-cent part with a RISC-V EC core that runs at 48MHz, has 16kB of flash and 2kB of RAM and a bunch of peripherals.  It also comes in SOP-8, QFN-20 and SOIC packages.  You can get the datasheet <a href="http://www.wch-ic.com/downloads/CH32V003DS0_PDF.html">here</a>.</p>
<p>The goal of this project is to develop the tooling and environment for efficient use of the CH32V003.  Avoid complicated HALs, and unleash the hardware! The existing EVT is massive, and dev environment weighty.  This project specifically avoids the HAL and makes it so you can just use the <a href="http://www.wch-ic.com/downloads/CH32V003RM_PDF.html">TRM</a>. In contrast, blinky is only 500 bytes with ch32fun, boots faster, and significantly simpler overall.</p>
<p>ch32fun contains:</p>
<ol>
<li>Examples using ch32fun, but not as many as using the HAL.  Most of which are centered around the ch32v003, but even many of those are compatible with other processors.</li>
<li>&quot;minichlink&quot; which uses the WCH CH-Link with libusb, for cross-platform use.
<ul>
<li>An STM32F042 Programmer, the <a href="https://github.com/NgoHungCuong/NHC-Link042">NHC-Link042</a></li>
<li>An ESP32S2 Programmer, the <a href="https://github.com/cnlohr/esp32s2-cookbook/tree/master/ch32v003programmer">esp32s2-funprog</a></li>
<li>The official WCH Link-E Programmer.</li>
<li>An Arduino-based interface, <a href="https://gitlab.com/BlueSyncLine/arduino-ch32v003-swio">Ardulink</a>.</li>
<li>Supports gdbserver-style-debugging for use with Visual Studio.</li>
<li>Supports printf-over-single-wire. (At about 400kBaud)</li>
</ul>
</li>
<li>An extra copy of libgcc so you can use unusual risc-v build chains, located in the <code>misc/libgcc.a</code>.</li>
<li>A folder named &quot;ch32fun&quot; containing a single self-contained source file and header file for compiling apps for the ch32v003.</li>
<li>On some systems ability to &quot;printf&quot; back through</li>
<li>A demo bootloader.</li>
</ol>
<h2>Other family support</h2>
<p>Currently, there is experimental support for the ch32v103, ch32v203, ch32v208, ch32v303, ch32v305 and ch32v307.  GDB is mostly tested on the 003, but works, to a limited degree on the other processors.</p>
<h2>Getting Started</h2>
<p>For installation / setup instructions, see the <a href="https://github.com/cnlohr/ch32fun/wiki/Installation">wiki page here</a></p>
<h2>Features!</h2>
<h3>A fast &quot;printf&quot; debug over the programming interface.</h3>
<p>And by fast I mean very fast. Typically around 36kBytes/sec.</p>
<pre><code>./minichlink -T | pv &gt; /dev/null
Found ESP32S2 Programmer
 536KiB 0:00:15 [36.7KiB/s] [        &lt;=&gt;                     ]
</code></pre>
<p>You can just try out the debugprintf project, or call SetupDebugPrintf(); and printf() away.</p>
<h3>Debugging support!</h3>
<p>Via gdbserver built into minichlink!  It works with <code>gdb-multiarch</code> as well as in Visual Studio Code</p>
<h2>Building and Flashing</h2>
<pre><code>cd examples/blink
make
</code></pre>
<p>text = code, data = constants and initialization values, bss = uninitialized values.<br />
dec is the sum of the 3 and reflects the number of bytes in flash that will get taken up by the program.</p>
<p>The generated .bin is used by minichlink and the .hex file is compatible with the official WCH flash tool.</p>
<h2>VSCode +/- PlatformIO</h2>
<p>Note: PlatformIO is generally used for CI on this repo. While PlatformIO can be used to code and debug a ch32fun project inside VSCode, you can also do it completely without PlatformIO: For that, see <a href="https://github.com/cnlohr/ch32fun/tree/master/examples/template/.vscode">template project</a>.</p>
<p>This project can be built, uploaded and debugged with VSCode and the PlatformIO extension. Simply clone and open this project in VSCode and have the PlatformIO extension installed. Use the <a href="https://docs.platformio.org/en/latest/integration/ide/vscode.html#project-tasks">project environment switcher</a> to select a specific example, such as &quot;blink&quot;.</p>
<p>To create a new PlatformIO firmware project based on ch32fun, simply use the <a href="https://docs.platformio.org/en/latest/home/index.html">PlatformIO Home</a>'s &quot;New Project&quot; wizard and set &quot;Framework&quot; to &quot;ch32v003fun&quot;. There are <a href="https://github.com/Community-PIO-CH32V/platform-ch32v/tree/develop/examples/blinky-ch32v003fun">various examples</a>.</p>
<p><img src="https://raw.githubusercontent.com/cnlohr/ch32fun/master/.github/pio_project_creation.png" alt="pio_proj" /></p>
<p>The equivalent <a href="https://docs.platformio.org/en/latest/integration/ide/vscode.html#platformio-core-cli">PlatformIO Core CLI</a> command would be</p>
<pre><code class="language-sh">pio init -b genericCH32V003F4P6 -O &quot;framework = ch32v003fun&quot;
</code></pre>
<p>If you want to add your code directly to ch32fun project, please expand the available environments in the <code>platformio.ini</code> as <a href="https://raw.githubusercontent.com/cnlohr/ch32fun/master/platformio.ini#L48-L53">per instructions</a>.</p>
<p>Please also note that when you open this project inside PlatformIO, you can use the <a href="https://docs.platformio.org/en/latest/integration/ide/vscode.html#project-tasks">project environment switcher</a> at the bottom of the VSCode taskbar to select a specific example folder. Otherwise, &quot;Build&quot; will by default build <strong>all</strong> examples.</p>
<p>See <a href="https://github.com/Community-PIO-CH32V/platform-ch32v">platform-ch32v</a> for further details and installation of the platform.</p>
<h2>clangd</h2>
<p>If the C/C++ language server clangd is unable to find <code>ch32fun.h</code>, the example will have to be wiped <code>make clean</code> and built once with <code>bear -- make build</code>, which will generate a <code>compile_commands.json</code>, which clangd uses to find the include paths specified in the makefiles.<br />
<code>make clangd</code> does this in one step.
<code>build_all_clangd.sh</code> does in <code>build scripts</code> does this for all examples.</p>
<h2>Quick Reference</h2>
<ul>
<li><strong>REQUIRED</strong> for programming/debugging: <code>SWIO</code> is on <code>PD1</code>. Do not re-use PD1 for multiple functions.</li>
<li><strong>OPTIONAL</strong> <code>NRST</code> is on <code>PD7</code>. Not needed, defaults as GPIO in some configurations.</li>
<li><strong>OPTIONAL</strong> UART <code>TX</code> is on: <code>PD5</code>. We recommend using SWIO for <code>printf</code> debugging.</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Tengo10/pinout-overview/main/pinouts/CH32v003/ch32v003a4m6.svg" alt="ch32v003a4m6" />
<img src="https://raw.githubusercontent.com/Tengo10/pinout-overview/main/pinouts/CH32v003/ch32v003f4p6.svg" alt="ch32v003f4p6" />
<img src="https://raw.githubusercontent.com/Tengo10/pinout-overview/main/pinouts/CH32v003/ch32v003f4u6.svg" alt="ch32v003f4u6" />
<img src="https://raw.githubusercontent.com/Tengo10/pinout-overview/main/pinouts/CH32v003/ch32v003j4m6.svg" alt="ch32v003j4m6" /></p>
<h2>More examples / projects?</h2>
<p>Other third party tools are adding lots of examples, etc.  See the following repos, for extra libraries, etc.</p>
<ul>
<li><a href="https://github.com/recallmenot/ch32v003fun_wildwest">ch32v003fun_wildwest</a></li>
<li><a href="https://github.com/hexeguitar/ch32v003fun_libs">ch32v003fun_libs</a></li>
<li><a href="https://github.com/ADBeta/CH32V003_lib_uart">CH32V003_lib_uart</a></li>
<li><a href="https://github.com/ADBeta/CH32Vxxx_lib_i2c">CH32Vxxx_lib_i2c</a></li>
<li><a href="https://github.com/ADBeta/CH32Vxxx_lib_swi2c">CH32Vxxx_lib_swi2c</a></li>
<li><a href="https://github.com/DeadBugEngineering/ch32v003fun_shenanigans">ch32v003fun_shenanigans</a></li>
<li><a href="https://github.com/pabloestrado/ch32fun-bmp280-driver">ch32fun-bmp280-driver</a></li>
<li><a href="https://github.com/pabloestrado/ch32fun-aht20-driver">ch32fun-aht20-driver</a></li>
</ul>
<h2>Support</h2>
<p>You can open a github ticket or join my Discord in the #ch32fun channel.  Right now invites are private, so just ping me @cnlohr for an invite link.  My PMs are open.</p>
<h3>Footnotes/links</h3>
<ul>
<li>https://raw.githubusercontent.com/openwch/ch32v003/main/RISC-V%20QingKeV2%20Microprocessor%20Debug%20Manual.pdf Debugging Manual</li>
<li>http://www.wch-ic.com/downloads/QingKeV2_Processor_Manual_PDF.html Processor Manual</li>
<li>http://www.wch-ic.com/downloads/CH32V003RM_PDF.html Technical Reference Manual</li>
<li>http://www.wch-ic.com/downloads/CH32V003DS0_PDF.html Datasheet</li>
<li>https://github.com/CaiB/CH32V003-Architecture-Exploration/blob/main/InstructionTypes.md Details for the compressed ISA on this chip.</li>
<li>The CH32V003 has xv extensions, you can use this customized version of rvcodec.js to work with its opcodes: https://xw.macyler.moe/</li>
</ul>
<hr />
<p>Tranlated By <a href="https://github.com/OpenAiTx/OpenAiTx">Open Ai Tx</a> | Last indexed: 2025-06-07</p>
<hr />

        </div>
    </div>
    <footer class="footer">
        Powered by <a href="https://github.com/OpenAiTx/OpenAiTx" target="_blank">Open AI Tx</a>
    </footer>
    <!-- Default Statcounter code for openaitx
https://openaitx.github.io/ -->
    <script type="text/javascript">
        var sc_project = 13142514;
        var sc_invisible = 1;
        var sc_security = "d03a31d8"; 
    </script>
    <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
    <noscript>
        <div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img
                    class="statcounter" src="https://c.statcounter.com/13142514/0/d03a31d8/1/" alt="Web Analytics"
                    referrerPolicy="no-referrer-when-downgrade"></a></div>
    </noscript>
    <!-- End of Statcounter Code -->
</body>
</html>